<!DOCTYPE html><html lang="zh_CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>服务器的基本概念与初识Ajax | 音符跳动</title><meta name="author" content="kk"><meta name="copyright" content="kk"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1.客户端与服务器1.2服务器上网过程中,负责存放和对外提供资源的电脑,叫做服务器。 1.3客户端上网过程中,负责获取和消费资源的电脑,叫做客户端。 2.URL地址2.1 URL地址的概念URL (全称是UniformResourcelocator)中文叫统一资源定位符,用于标识互联网上每个资源的唯一存放位置。浏览器只有通过URL地址,才能正确定位资源的存放位置,从而成功访问到对应的资源。 常见的">
<meta property="og:type" content="article">
<meta property="og:title" content="服务器的基本概念与初识Ajax">
<meta property="og:url" content="https://2486125878.github.io/2024/03/13/ajax/index.html">
<meta property="og:site_name" content="音符跳动">
<meta property="og:description" content="1.客户端与服务器1.2服务器上网过程中,负责存放和对外提供资源的电脑,叫做服务器。 1.3客户端上网过程中,负责获取和消费资源的电脑,叫做客户端。 2.URL地址2.1 URL地址的概念URL (全称是UniformResourcelocator)中文叫统一资源定位符,用于标识互联网上每个资源的唯一存放位置。浏览器只有通过URL地址,才能正确定位资源的存放位置,从而成功访问到对应的资源。 常见的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg">
<meta property="article:published_time" content="2024-03-13T07:13:48.000Z">
<meta property="article:modified_time" content="2024-03-13T08:42:04.438Z">
<meta property="article:author" content="kk">
<meta property="article:tag" content="Ajax">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://2486125878.github.io/2024/03/13/ajax/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '服务器的基本概念与初识Ajax',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-13 16:42:04'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/header.css?1"><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="音符跳动" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.v8Y5QxZNIiQVIEk3JOCC2QHaGi?rs=1&amp;pid=ImgDetMain" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="音符跳动"><img class="site-icon" src="/img/logo.png"/><span class="site-name">音符跳动</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">服务器的基本概念与初识Ajax</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-03-13T07:13:48.000Z" title="Created 2024-03-13 15:13:48">2024-03-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-03-13T08:42:04.438Z" title="Updated 2024-03-13 16:42:04">2024-03-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/qd/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="服务器的基本概念与初识Ajax"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"></svg><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-客户端与服务器"><a href="#1-客户端与服务器" class="headerlink" title="1.客户端与服务器"></a>1.客户端与服务器</h2><h3 id="1-2服务器"><a href="#1-2服务器" class="headerlink" title="1.2服务器"></a>1.2服务器</h3><p><strong>上网过程中,负责存放和对外提供资源的电脑,叫做服务器。</strong></p>
<h3 id="1-3客户端"><a href="#1-3客户端" class="headerlink" title="1.3客户端"></a>1.3客户端</h3><p><strong>上网过程中,负责获取和消费资源的电脑,叫做客户端。</strong></p>
<h2 id="2-URL地址"><a href="#2-URL地址" class="headerlink" title="2.URL地址"></a>2.URL地址</h2><h3 id="2-1-URL地址的概念"><a href="#2-1-URL地址的概念" class="headerlink" title="2.1 URL地址的概念"></a>2.1 URL地址的概念</h3><p><strong>URL (全称是UniformResourcelocator)中文叫统一资源定位符,用于标识互联网上每个资源的唯一存放位置。浏览器只有通过URL地址,才能正确定位资源的存放位置,从而成功访问到对应的资源。</strong></p>
<p><strong>常见的URL举例:</strong></p>
<p><strong><a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com</a></strong></p>
<p><strong><a target="_blank" rel="noopener" href="http://www.taobao.com/">http://www.taobao.com</a></strong></p>
<p><strong><a target="_blank" rel="noopener" href="http://www.cnblogs.com/liulongbinblogs/p/11649393.html">http://www.cnblogs.com/liulongbinblogs/p/11649393.html</a></strong></p>
<h3 id="2-2-URL地址的组成部分"><a href="#2-2-URL地址的组成部分" class="headerlink" title="2.2 URL地址的组成部分"></a>2.2 URL地址的组成部分</h3><p><strong>URL地址一般由三部组成:</strong></p>
<p><strong>①客户端与服务器之间的通信协议</strong></p>
<p><strong>②存有该资源的服务器名称</strong></p>
<p><strong>③资源在服务器上具体的存放位置</strong></p>
<h2 id="3·客户端与服务器的通信过程"><a href="#3·客户端与服务器的通信过程" class="headerlink" title="3·客户端与服务器的通信过程"></a>3·客户端与服务器的通信过程</h2><h3 id="3-1图解客户端与服务器的通信过程"><a href="#3-1图解客户端与服务器的通信过程" class="headerlink" title="3.1图解客户端与服务器的通信过程"></a>3.1图解客户端与服务器的通信过程</h3><p><strong>客户端与服务器之间的通信过程,分为请求一处理一响应三个步骤。</strong></p>
<p><strong>网页中的每一个资源,都是通过请求-处理-响应的方式从服务器获取回来的。</strong></p>
<h3 id="3-2基于浏览器的开发者工具分析通信过程"><a href="#3-2基于浏览器的开发者工具分析通信过程" class="headerlink" title="3.2基于浏览器的开发者工具分析通信过程"></a>3.2基于浏览器的开发者工具分析通信过程</h3><p><strong>1,打开Chrome浏览器</strong></p>
<p><strong>2.Ctrl+Shift+1打开Chrome的开发者工具</strong></p>
<p><strong>3·切换到Network面板</strong></p>
<p><strong>4.选中Doc页签5,刷新页面,分析客户端与服务器的通信过程</strong></p>
<h2 id="4-服务器对外提供了哪些资源"><a href="#4-服务器对外提供了哪些资源" class="headerlink" title="4.服务器对外提供了哪些资源"></a>4.服务器对外提供了哪些资源</h2><h3 id="4-1例举网页中常见的资源"><a href="#4-1例举网页中常见的资源" class="headerlink" title="4.1例举网页中常见的资源"></a>4.1例举网页中常见的资源</h3><p><strong>文字内容Image 图片Audio音频Video视频</strong></p>
<h3 id="4-2数据也是资源"><a href="#4-2数据也是资源" class="headerlink" title="4.2数据也是资源"></a>4.2数据也是资源</h3><p><strong>网页中的数据,也是服务器对外提供的一种资源。例如股票数据、各行业排行榜等。</strong></p>
<h3 id="数据是网页的灵魂"><a href="#数据是网页的灵魂" class="headerlink" title="数据是网页的灵魂"></a><strong>数据是网页的灵魂</strong></h3><p><strong>HTML是网页的骨架</strong></p>
<p><strong>CSS是网页的颜值</strong></p>
<p><strong>Javascript是网页的行为</strong></p>
<p><strong>数据,则是网页的灵魂</strong></p>
<p><strong>骨架、颜值、行为質为数据服务数据,在网页中无处不在</strong></p>
<h3 id="4-4网页中如何请求数据"><a href="#4-4网页中如何请求数据" class="headerlink" title="4.4网页中如何请求数据"></a>4.4网页中如何请求数据</h3><p><strong>数据,也是服务器对外提供的一种资源。只要是资源,必然要通过请求一处理-响应的方式进行获取。</strong></p>
<p><strong>如果要在网页中请求服务器上的数据资源,则需要用到XMLHttpRequest对象。</strong></p>
<p><strong>XMLHttpRequest (简称xhr)是浏览器提供的js成员,通过它,可以请求服务器上的数据资源。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最简单的用法</span></span><br><span class="line"><span class="keyword">var</span> xhrObj= <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br></pre></td></tr></table></figure>

<h3 id="4-5资源的请求方式"><a href="#4-5资源的请求方式" class="headerlink" title="4.5资源的请求方式"></a>4.5资源的请求方式</h3><p><strong>客户端请求服务器时,请求的方式有很多种,最常见的两种请求方式分别为get和post请求。</strong></p>
<p><strong>get请求通常用于获取服务端资源(向服务器要资源)</strong></p>
<p><strong>例如:根据URL地址,从服务器获取HTML文件、css文件、js文件、图片文件、数据资源等</strong></p>
<p><strong>post请求通常用于向服务器提交数据(往服务器发送资源)</strong></p>
<p><strong>例如:登录时向服务器提交的登录信息、注册时向服务器提交的注册信息、添加用户时向服务器提交的用户信息等各种数据提交操作</strong></p>
<h2 id="5-了解Ajax"><a href="#5-了解Ajax" class="headerlink" title="5.了解Ajax"></a>5.了解Ajax</h2><h3 id="5-1-什么是-Ajax"><a href="#5-1-什么是-Ajax" class="headerlink" title="5.1 什么是 Ajax"></a>5.1 什么是 Ajax</h3><p><strong>Ajax的全称是Asynchronous Javascript And XML (异步JavaScript和XML)</strong></p>
<p><strong>通俗的理解:在网页中利用XMLHttpRequest对象和服务器进行数据交互的方式,就是Ajax.</strong></p>
<h3 id="5-2为什么要学Ajax"><a href="#5-2为什么要学Ajax" class="headerlink" title="5.2为什么要学Ajax"></a>5.2为什么要学Ajax</h3><p><strong>之前所学的技术,只能把网页做的更美观漂亮,或添加一些动画效果,但是, Ajax能让我们轻松实现网页与服务器之间的数据交互。</strong></p>
<h3 id="5-3-Ajax的典型应用场景"><a href="#5-3-Ajax的典型应用场景" class="headerlink" title="5.3 Ajax的典型应用场景"></a>5.3 Ajax的典型应用场景</h3><p><strong>用户名检测:注册用户时,通过ajax的形式,动态检测用户名是否被占用</strong></p>
<p><strong>搜索提示:当输入搜索关键字时,通过ajax的形式,动态加载搜索提示列表</strong></p>
<p><strong>数据分页显示:当点击页码值的时候,通过ajax的形式,根据页码值动态刷新表格的数据</strong></p>
<p><strong>数据的增删改查:数据的添加、删除、修改、查询操作,都需要通过ajax的形式,来实现数据的交互</strong></p>
<h2 id="6-jQuery-的Ajax"><a href="#6-jQuery-的Ajax" class="headerlink" title="6.jQuery 的Ajax"></a>6.jQuery 的Ajax</h2><h3 id="6-1了解jQuery中的Ajax"><a href="#6-1了解jQuery中的Ajax" class="headerlink" title="6.1了解jQuery中的Ajax"></a>6.1了解jQuery中的Ajax</h3><p><strong>浏览器中提供的XMLHttpRequest用法比较复杂,所以jQuery对XMLHtpRequest进行了封装,提供了一系列Ajax相关的函数,极大地降低了Ajax的使用难度。</strong></p>
<p><strong>jQuery中发起Ajax请求最常用的三个方法如下:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.get()</span><br><span class="line"></span><br><span class="line">$.post()</span><br><span class="line"></span><br><span class="line">$.ajax()</span><br></pre></td></tr></table></figure>



<h3 id="6-2-get-函数的语法"><a href="#6-2-get-函数的语法" class="headerlink" title="6.2$.get()函数的语法"></a>6.2$.get()函数的语法</h3><p><strong>jQuery 中$.get0函数的功能单一,专门用来发起get请求,从而将服务器上的资源请求到客户端来进行使用。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.get()函数的语法如下:</span><br><span class="line"></span><br><span class="line">$.get (url, [data], [callback])</span><br></pre></td></tr></table></figure>

<p><strong>其中,三个参数各自代表的含义如下:</strong></p>
<p><strong>参数名			参数类型			是否必选					说明</strong></p>
<p><strong>url					string					是						要请求的资源地址</strong></p>
<p><strong>data				object				    否						请求资源期间要携带的参数</strong></p>
<p><strong>callback		 function			      否					  请求成功时的回调函数</strong></p>
<h3 id="6-2-get-发起不带参数的请求"><a href="#6-2-get-发起不带参数的请求" class="headerlink" title="6.2 $.get()发起不带参数的请求"></a>6.2 $.get()发起不带参数的请求</h3><p><strong>使用$.get()函数发起不带参数的请求时,直接提供请求的URL地址和请求成功之后的回调函数即可,示例代码如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.get (<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line"></span><br><span class="line">(<span class="variable language_">console</span>.<span class="property">log</span> (res) <span class="comment">//这里的res是服务器述回的数据</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="6-2-get-发起带参数的请求"><a href="#6-2-get-发起带参数的请求" class="headerlink" title="6.2 $.get()发起带参数的请求"></a>6.2 $.get()发起带参数的请求</h3><p><strong>使用$.get()函数发起带参数的请求时,示例代码如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.get (<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;, <span class="keyword">function</span> (<span class="params">res</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> (res)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="6-3-post0函数的语法"><a href="#6-3-post0函数的语法" class="headerlink" title="6.3 $.post0函数的语法"></a>6.3 $.post0函数的语法</h3><p><strong>jQuery中$.post()函数的功能单一,专门用来发起post请求,从而向服务器提交数据。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$.post0函数的语法如下:</span></span><br><span class="line"></span><br><span class="line">$.post (url, [data], [callback])</span><br></pre></td></tr></table></figure>

<p><strong>其中,三个参数各自代表的含义如下:</strong></p>
<p><strong>参数名			参数类型			是否必选					说明</strong></p>
<p><strong>url					string					是						要提交的资源地址</strong></p>
<p><strong>data				object				    否						要提交的数据</strong></p>
<p><strong>callback		 function			      否				数据提交成功时的回调函数</strong></p>
<h3 id="6-3-post-向服务器提交数据"><a href="#6-3-post-向服务器提交数据" class="headerlink" title="6.3 $.post()向服务器提交数据"></a>6.3 $.post()向服务器提交数据</h3><p><strong>使用$posto向服务器提交数据的示例代码如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">$</span>:<span class="title function_">post</span>(<span class="string">&#x27;http://www.liulongbin.top:3006/api/addibook&#x27;</span>, <span class="comment">// 请求的URL地址&#123;</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">bookname</span>: 水浒传., <span class="attr">author</span>: 施耐庵., <span class="attr">publisher</span>: <span class="string">&#x27;上海图书出版社&#x27;</span>&#125;, <span class="comment">//提交的数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> (<span class="params">res</span>) &#123;<span class="comment">//回调函数</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> (res)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-4-ajax-函数的语法"><a href="#6-4-ajax-函数的语法" class="headerlink" title="6.4 $.ajax()函数的语法"></a>6.4 $.ajax()函数的语法</h3><p><strong>相比于$.get()和$.post()函数, jQuery中提供的$.ajax()函数,是一个功能比较综合的函数,它允许我们对Ajax请求进行更详细的配置。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>()函数的基本语法如下:</span><br><span class="line"></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//请求的方式,例如GET或POST</span></span><br><span class="line"></span><br><span class="line">url; <span class="string">&#x27;&#x27;</span> ,<span class="comment">//请求的URL地址</span></span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: &#123;&#125;,<span class="comment">//这次请求要携带的数据</span></span><br><span class="line"></span><br><span class="line"><span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;&#125;<span class="comment">//请求成功之后的回调函数</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="6-4使用-ajax-发起GET请求使用"><a href="#6-4使用-ajax-发起GET请求使用" class="headerlink" title="6.4使用$.ajax()发起GET请求使用"></a>6.4使用$.ajax()发起GET请求使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>()起<span class="variable constant_">GET</span>请求时,只需要将type属性的值设置为,<span class="variable constant_">GET</span>,即可:</span><br><span class="line"></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="comment">//请求的方式</span></span><br><span class="line"></span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="comment">//请求的URL地址</span></span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: &#123;<span class="attr">id</span>: <span class="number">1</span>&#125;,<span class="comment">//这次请求要携带的数据</span></span><br><span class="line"></span><br><span class="line"><span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123; <span class="comment">//请求成功之后的回调函数</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>. log (res)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="6-4使用-ajax-发起POST请求使用"><a href="#6-4使用-ajax-发起POST请求使用" class="headerlink" title="6.4使用$.ajax()发起POST请求使用"></a>6.4使用$.ajax()发起POST请求使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$.ajax()起GET请求时,只需要将type属性的值设置为,post,即可:</span></span><br><span class="line"></span><br><span class="line">$. <span class="title function_">ajax</span>(&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">//请求的方式</span></span><br><span class="line"></span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/addbooks&#x27;</span>, <span class="comment">//请求的URL地址</span></span><br><span class="line"></span><br><span class="line"><span class="attr">data</span>: &#123;<span class="comment">//提交给服务器的数据</span></span><br><span class="line"></span><br><span class="line"><span class="attr">bookname</span>: ‘水浒传’,</span><br><span class="line"></span><br><span class="line"><span class="attr">author</span>: ‘施耐庵’,</span><br><span class="line"></span><br><span class="line"><span class="attr">publisher</span>: <span class="string">&#x27;上海图书出版社&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123; <span class="comment">//请求成功之后的回调函数**</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>. log (res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="7-接口"><a href="#7-接口" class="headerlink" title="7.接口"></a>7.接口</h2><h3 id="7-1接口的概念"><a href="#7-1接口的概念" class="headerlink" title="7.1接口的概念"></a>7.1接口的概念</h3><p><strong>使用Ajax请求数据时,被请求的URL地址,就叫做数据接口(简称接口) 。同时,每个接口必须有请求方式。</strong></p>
<p><strong>例如:</strong></p>
<p> <strong><a target="_blank" rel="noopener" href="http://www.liulongbin.top:3006/api/getbooks">http://www.liulongbin.top:3006/api/getbooks</a> 获取图书列表的接口(GET请求)</strong></p>
<p><strong><a target="_blank" rel="noopener" href="http://www.liulongbin.top:3006/api/adabook">http://www.liulongbin.top:3006/api/adabook</a> 添加图书的接口(post请求)</strong></p>
<h3 id="7-2分析接口的请求过程"><a href="#7-2分析接口的请求过程" class="headerlink" title="7.2分析接口的请求过程"></a>7.2分析接口的请求过程</h3><p><strong>1,通过GET方式请求接口的过程</strong></p>
<p><img src="E:\桌面\笔记图\get.JPG" alt="get"></p>
<p><strong>2.通过POST方式请求接口的过程</strong></p>
<p><img src="E:\桌面\笔记图\post.JPG" alt="post"></p>
<h3 id="7-3接口测试工具"><a href="#7-3接口测试工具" class="headerlink" title="7.3接口测试工具"></a>7.3接口测试工具</h3><p><strong>1,什么是接口测试工具</strong></p>
<p><strong>为了验证接口能否被正常被访问,我们常常需要使用接口测试工具,来对数据接口进行检测。</strong></p>
<p><strong>好处:接口测试工具能让我们在不写任何代码的情况下,对接口进行调用和测试。</strong></p>
<p><strong>2.下载并安装PostMan</strong></p>
<p><strong>访问PostMan的官方下载网址<a target="_blank" rel="noopener" href="https://www.getpostman.com/downloadsl,%E4%B8%8B%E8%BD%BD%E6%89%80%E9%9C%80%E7%9A%84%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F%E5%90%8E,%E7%9B%B4%E6%8E%A5%E5%AE%89%E8%A3%85%E5%8D%B3%E5%8F%AF%E3%80%82">https://www.getpostman.com/downloadsl,下载所需的安装程序后,直接安装即可。</a></strong></p>
<h3 id="7-5使用PostMan测试POST接口"><a href="#7-5使用PostMan测试POST接口" class="headerlink" title="7.5使用PostMan测试POST接口"></a>7.5使用PostMan测试POST接口</h3><p><strong>步骤:</strong></p>
<p><strong>1选择请求的方式</strong></p>
<p><strong>2.填写请求的URL地址”</strong></p>
<p><strong>3.选择Body面板并勾选数据格式</strong></p>
<p><strong>4,填写要发送到服务器的数据</strong></p>
<p><strong>5·点击Send按钮发起POST请求</strong></p>
<h3 id="7-6接口文档"><a href="#7-6接口文档" class="headerlink" title="7.6接口文档"></a>7.6接口文档</h3><p><strong>1.什么是接口文档</strong></p>
<p><strong>接口文档,顾名思义就是接口的说明文档,它是我们调用接口的依据。好的接口文档包含了对接口URL,参数以及输出内容的说明,我们参照接口文档就能方便的知道接口的作用,以及接口如何进行调用。</strong></p>
<p><strong>2,接口文档的组成部分</strong></p>
<p><strong>接口文档可以包含很多信息,也可以按需进行精简,不过,一个合格的接口文档,应该包含以下6项内容,从而为接口的调用提供依据:</strong></p>
<p><strong>1, 接口名称:用来标识各个接口的简单说明,如登录接口,获取图书列表接口等。</strong></p>
<p><strong>2.接口URL:接口的调用地址。</strong></p>
<p><strong>3.调用方式:接口的调用方式,如GET或POST.</strong></p>
<p><strong>4·参数格式:接口需要传递的参数,每个参数必须包含参数名称、参数类型、是否必选、参数说明这4项内容。</strong></p>
<p><strong>5· 响应格式:接口的返回值的详细描述,一般包含数据名称、数据类型、说明3项内容。</strong></p>
<p><strong>6,返回示例(可选) :通讨对象的形式,例举服务器返回数据的结构。</strong></p>
<p><img src="E:\桌面\笔记图\api文档.JPG" alt="api文档"></p>
<p><img src="E:\桌面\笔记图\api2.JPG" alt="api2"></p>
<h2 id="8-案例-图书管理"><a href="#8-案例-图书管理" class="headerlink" title="8.案例-图书管理"></a>8.案例-图书管理</h2><h3 id="8-2案例用到的库和插件"><a href="#8-2案例用到的库和插件" class="headerlink" title="8.2案例用到的库和插件"></a>8.2案例用到的库和插件</h3><p><strong>用到的css库bootstrap.css</strong></p>
<p><strong>用到的javascript库jquery.js</strong></p>
<p><strong>用到的vs code插件Bootstrap 3 Snippets</strong></p>
<h3 id="8-3渲染图书列表-核心代码"><a href="#8-3渲染图书列表-核心代码" class="headerlink" title="8.3渲染图书列表(核心代码)"></a>8.3渲染图书列表(核心代码)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getBookList</span> () &#123;</span><br><span class="line"><span class="comment">//1.发起ajax请求获取图书列表数据</span></span><br><span class="line"></span><br><span class="line">$.get (<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.获取列表数据是否成功</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (res.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;获取图书列表失败! &quot;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//3.渲染页面结构</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var rows = []</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$.each(res.data, function(i, item) &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 4.循环拼接字符串</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">rows.push(&#x27;</span>&lt;tr&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#x27; + item.id + &#x27;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#x27; + item.bookname +&#x27;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#x27; + item.author + &#x27;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#x27; + item.publisher + &#x27;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>  <span class="attr">href</span>=<span class="string">&quot;javascript:; &quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span>&lt;/tr&gt;<span class="string">&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ (&#x27;</span>#bookBody<span class="string">&#x27; ) .empty () .append (rows.join ( &#x27;</span><span class="string">&#x27;)) // 5,渲染表格结构</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-form表单的基本使用"><a href="#1-form表单的基本使用" class="headerlink" title="1.form表单的基本使用"></a>1.form表单的基本使用</h2><h3 id="1-1什么是表单"><a href="#1-1什么是表单" class="headerlink" title="1.1什么是表单"></a>1.1什么是表单</h3><p><strong>表单在网页中主要负责数据采集功能。HTMIL中的<form>标签,就是用于采集用户输入的信息,并通过<form>标签的提交操作,把采集到的信息提交到服务器端进行处理。</strong></p>
<h3 id="1-2表单的组成部分"><a href="#1-2表单的组成部分" class="headerlink" title="1.2表单的组成部分"></a>1.2表单的组成部分</h3><p><strong>表单由三个基本部分组成:</strong></p>
<p><strong>表单标签</strong></p>
<p><strong>表单域</strong></p>
<p><strong>表单按钮</strong></p>
<p><strong>表单域:包含了文本框、密码框、隐藏域、多行文本框、复选框、单选框、下拉选择框和文件上传框等。</strong></p>
<h3 id="1-3-标签的属性"><a href="#1-3-标签的属性" class="headerlink" title="1.3 标签的属性"></a>1.3 <form>标签的属性</h3><p><strong>1.<form>标签用来采集数据, <form>标签的属性则是用来规定如何把采集到的数据发送到服务器。</strong></p>
<p><strong>属性					值																		描述</strong></p>
<p><strong>action				URL地址															规定当提交表单时,向何处发送表单数据</strong></p>
<p><strong>method 			get或post	 													规定以何种方式把表单数据提交到action URL</strong></p>
<p><strong>enctype			application&#x2F;x-www-form-urlencoded		规定在发送表单数据之前如何对其进行编码</strong></p>
<p>​							<strong>multipart&#x2F;form-data</strong></p>
<p>​							<strong>text&#x2F;plain</strong>			</p>
<p>**target				_blank																规定在何处打开action URL     在新窗口中打开。 **   </p>
<p>​							<strong>_self																	 默认。在相同的框架中打开。</strong>	</p>
<p>​							<strong>_parent															在父框架集中打开。(很少用)</strong></p>
<p>​							<strong>_top																	在整个窗口中打开。(很少用)</strong>													</p>
<p>​							<strong>_framename												在指定的框架中打开。(很少用)</strong>											</p>
<p><strong>1.action</strong></p>
<p><strong>action属性用来规定当提交表单时,向何处发送表单数据。</strong></p>
<p><strong>action属性的值应该是后端提供的一个URL地址,这个URL地址专门负责接收表单提交过来的数据。</strong></p>
<p><strong>当<form>表单在未指定action属性值的情况下, action的默认值为当前页面的URL地址。</strong></p>
<p><strong>注意:当提交表单后,页面会立即跳转到action属性指定的URL地址</strong></p>
<p><strong>2.target</strong></p>
<p><strong>target属性用来规定在何处打开action URL.</strong></p>
<p><strong>它的可选值有5个,默认情况下, target的值是_self,表示在相同的框架中打开action URL.</strong></p>
<p><strong>3, method</strong></p>
<p><strong>method属性用来规定以何种方式把表单数据提交到action URL</strong></p>
<p><strong>它的可选值有两个,分别是get和post.</strong></p>
<p><strong>默认情况下, method的值为get,表示通过URL地址的形式,把表单数据提交到action URL.</strong></p>
<p><strong>注意:get方式适合用来提交少量的、简单的数据。</strong></p>
<p><strong>post方式绩合用来提交大量的、复杂的、或包含文件上传的数据。</strong></p>
<p><strong>在实际开发中, <form>表单的past提交方式用的最多,很少用get,例如登录、注册、添加数据等表单操作,都需要使用post方式来提交表单。</strong></p>
<p><strong>4.enctype</strong></p>
<p><strong>enctype属性用来规定在发送表单数据之前如何对数据进行编码</strong></p>
<p><strong>它的可选值有三个,默认情况下, enctype的值为application&#x2F;x-www-form-urlencoded,表示在发送前编码所有的字符。</strong></p>
<p>**enctype			application&#x2F;x-www-form-urlencoded					在发送前编码所有字符(默认)	**</p>
<p>​							<strong>multipart&#x2F;form-data													不对字符编码。在使用包含文件上传控件的表单时,必须使用该值。</strong>		</p>
<p>​							<strong>text&#x2F;plain																		空格转换为”+”加号,但不对特殊字符编码。(很少用)</strong>			</p>
<p><strong>注意:</strong></p>
<p><strong>在涉及到文件上传的操作时,必须将enctype的值设置为multipart&#x2F;form-data</strong></p>
<p><strong>如果表单的提交不涉及到文件上传操作,则直接将enctype的值默认设置为application&#x2F;x-www-form-urlencoded 即可</strong></p>
<h3 id="1-4表单的同步提交及缺点’"><a href="#1-4表单的同步提交及缺点’" class="headerlink" title="1.4表单的同步提交及缺点’"></a>1.4表单的同步提交及缺点’</h3><p><strong>1.什么是表单的同步提交</strong></p>
<p><strong>通过点击submit按钮,触发表单提交的操作,从而使页面跳转到action URL的行为,叫做表单的同步提交。</strong></p>
<p><strong>2,表单同步提交的缺点</strong></p>
<p><strong>1.1.<form>表单同步提交后,整个页面会发生跳转,跳转到action URL所指向的地址,用户体验很差。</strong></p>
<p><strong>1.2.<form>表单同步提交后,页面之前的状态和数据会丢失。</strong></p>
<p><strong>3,如何解决表单同步提交的缺点</strong></p>
<p><strong>解决方案:表单只负责采集数据, Ajax负责将数据提交到服务器。</strong></p>
<h1 id="2-通过Ajax提交表单数据"><a href="#2-通过Ajax提交表单数据" class="headerlink" title="2.通过Ajax提交表单数据"></a>2.通过Ajax提交表单数据</h1><h2 id="2-1监听表单提交事件"><a href="#2-1监听表单提交事件" class="headerlink" title="2.1监听表单提交事件"></a>2.1监听表单提交事件</h2><p><strong>在jQuery 中,可以使用如下两种方式,监听到表单的提交事件:</strong></p>
<p><strong>$(‘#form1’).submit (function (e){</strong></p>
<p><strong>alert (‘监听到了表单的提交事件’)</strong></p>
<p><strong>})</strong></p>
<p><strong>$(‘#form1’).on (‘submit’, function(e) {</strong></p>
<p><strong>alert (“监听到了表单的提交事件’’)</strong></p>
<p><strong>})</strong></p>
<h2 id="2-2阻止表单默认提交行为"><a href="#2-2阻止表单默认提交行为" class="headerlink" title="2.2阻止表单默认提交行为"></a>2.2阻止表单默认提交行为</h2><p><strong>当监听到表单的提交事件以后,可以调用事件对象的event.preventDefaulto函数,来阻止表单的提交和页面的跳转,示例代码如下:</strong></p>
<p><strong>$(‘#forml’) .subpit (function (e) {</strong></p>
<p><strong>&#x2F;&#x2F;阻止表单的提交和页面的跳转</strong></p>
<p><strong>e.preventDefault ()</strong></p>
<p><strong>})</strong></p>
<p><strong>$(‘#form1’).on (‘submit’, function(e){</strong></p>
<p><strong>&#x2F;&#x2F;阻止表单的提交和页面的跳转</strong></p>
<p><strong>e.preventDefault ()</strong></p>
<p><strong>})</strong></p>
<h2 id="2-3快速获取表单中的数据"><a href="#2-3快速获取表单中的数据" class="headerlink" title="2.3快速获取表单中的数据"></a>2.3快速获取表单中的数据</h2><p><strong>1.serialize()函数</strong></p>
<p><strong>为了简化表单中数据的获取操作, jQuery提供了 serialize0函数,其语法格式如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ (selector).<span class="property">serialize</span> ()</span><br></pre></td></tr></table></figure>

<p><strong>serializeo函数的好处:可以一次性获取到表单中的所有的数据。</strong></p>
<p><strong>2.serialize()函数示例</strong></p>
<form id="forml ">
    <input type="text" name="username" />
    <input type="password" name="password"/>
    <button type="submit">提交</button>
</form>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&#x27;#forml &#x27;).serialize ()</span><br></pre></td></tr></table></figure>





<p><strong>&#x2F;&#x2F;调用的结果:</strong></p>
<p><strong>&#x2F;&#x2F; username&#x3D;用户名的值&amp;password&#x3D;密码的值</strong></p>
<p><strong>注意:在使用serialize()函数快速获取表单数据时,必须为每个表单元素添加name属性!</strong></p>
<h2 id="4-模板引擎的基本概念"><a href="#4-模板引擎的基本概念" class="headerlink" title="4,模板引擎的基本概念"></a>4,模板引擎的基本概念</h2><h3 id="4-1渲染U1结构时遇到的问题题"><a href="#4-1渲染U1结构时遇到的问题题" class="headerlink" title="4.1渲染U1结构时遇到的问题题"></a>4.1渲染U1结构时遇到的问题题</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rows = []</span><br><span class="line"></span><br><span class="line">$.<span class="title function_">each</span>(res.<span class="property">data</span>, <span class="keyword">function</span> (<span class="params">i, item</span>) &#123; <span class="comment">//循环拼接字符串</span></span><br><span class="line"></span><br><span class="line">rows.<span class="title function_">push</span>(<span class="string">&#x27;&lt;li class=&quot;list-group-item&quot;&gt;&#x27;</span>+ item.<span class="property">content</span> +<span class="string">&#x27;&lt;span class=&quot;badgecmt-date&quot;&gt;评论时间: &#x27;</span>+ item.<span class="property">time</span> +<span class="string">&#x27;&lt;/span&gt;&lt;span class=&quot;badge cnt-person&quot;&gt;评论人: &#x27;</span>+item. usernane +<span class="string">&#x27;&lt;/span&gt;&lt;/li&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#cmt-list&#x27;</span> ) .<span class="property">empty</span> () . append (rows.<span class="property">join</span> (<span class="string">&#x27; &#x27;</span>)) <span class="comment">//渲染列表的UI结构</span></span><br></pre></td></tr></table></figure>

<p><strong>上述代码是通过字符串拼接的形式,来渲染UI结构</strong></p>
<p><strong>如果UI结构比较复杂,则拼接字符串的时候需要格外注意引号之前的嵌套。且一旦需求发生变化,修改起来也非常麻烦。</strong></p>
<h3 id="4-2什么是模板引擎"><a href="#4-2什么是模板引擎" class="headerlink" title="4.2什么是模板引擎"></a>4.2什么是模板引擎</h3><p><strong>模板引擎,顾名思义,它可以根据程序员指定的模板结构和数据,自动生成一个完整的HTML页面。</strong></p>
<h3 id="4-3模板引擎的好处"><a href="#4-3模板引擎的好处" class="headerlink" title="4.3模板引擎的好处"></a>4.3模板引擎的好处</h3><p><strong>减少了字符串的拼接操作</strong></p>
<p><strong>使代码结构更清晰</strong></p>
<p><strong>使代码更易于阅读与维护</strong></p>
<h2 id="5-art-template模板引擎"><a href="#5-art-template模板引擎" class="headerlink" title="5.art-template模板引擎"></a>5.art-template模板引擎</h2><h3 id="5-1-art-template简介"><a href="#5-1-art-template简介" class="headerlink" title="5.1 art-template简介"></a>5.1 art-template简介</h3><p><strong>art-template是一个简约、超快的模板引擎。中文官网首页为<a target="_blank" rel="noopener" href="http://aui.github.io/art-template/zh-cn/index.html">http://aui.github.io/art-template/zh-cn/index.html</a></strong></p>
<h3 id="5-3-art-template模板引擎的基本使用"><a href="#5-3-art-template模板引擎的基本使用" class="headerlink" title="5.3 art-template模板引擎的基本使用"></a>5.3 art-template模板引擎的基本使用</h3><p><strong>1,使用传统方式渲染U1结构</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;&lt;h3&gt;用户信息&lt;/h3&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line"></span><br><span class="line"> <span class="attr">age</span>: <span class="number">20</span> ,</span><br><span class="line"></span><br><span class="line"><span class="attr">isvIP</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line"><span class="attr">regrime</span>: <span class="keyword">new</span> <span class="title class_">Date</span> (),</span><br><span class="line"></span><br><span class="line"><span class="attr">hobby</span>: [<span class="string">&#x27;吃饭&quot;,&#x27;</span> 睡觉<span class="string">&#x27;, &#x27;</span>打豆豆<span class="string">&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.art-template的使用步骤</strong></p>
<p><strong>导入 art-template</strong></p>
<p><strong>定义数据</strong></p>
<p><strong>定义模板</strong></p>
<p><strong>调用template函数</strong></p>
<p><strong>渲染HTML结构</strong></p>
<h3 id="5-4-art-template标准语法"><a href="#5-4-art-template标准语法" class="headerlink" title="5.4 art-template标准语法"></a>5.4 art-template标准语法</h3><p><strong>1.什么是标准语法art-template提供了</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这种语法格式,在&#123;&#123;&#125;&#125;内可以进行变量输出,或循环数组等操作,这种&#123;&#123;&#125;&#125;语法在art-template中被称为标准语法。</span><br></pre></td></tr></table></figure>

<p><strong>2.标准语法-输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;value&#125;&#125;</span><br><span class="line">&#123;&#123;obj.key&#125;&#125;</span><br><span class="line">&#123;&#123;obj[&#x27;key&#x27;]&#125;&#125;</span><br><span class="line">&#123;&#123;a?b: c&#125;&#125;</span><br><span class="line">&#123;&#123;a || b&#125;&#125;</span><br><span class="line">&#123;&#123;a+b&#125;&#125;</span><br><span class="line">在&#123;&#123;&#125;&#125;语法中,可以进行变量的输出、对象属性的输出、三元表达式输出、逻辑或输出、加减乘除等表达式输出</span><br></pre></td></tr></table></figure>



<p><strong>3.标准语法-原文输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;@ value &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>如果要输出的value值中,包含了HTML标签结构,则需要使用原文输出语法,才能保证HTML标签被正常渲染。</strong></p>
<p><strong>4,标准语法-条件输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如果要实现条件输出,则可以在&#123;&#123;&#125;&#125;中使用if ...else if...../if进行按需输出。</span><br><span class="line"></span><br><span class="line">&#123;&#123;if value&#125;&#125;按需输出的内容&#123;&#123;/if&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;if v1&#125;&#125;按需输出的内容&#123;&#123;else if v2&#125;&#125;按需输出的内容&#123;&#123;/if&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5·标准语法-循环输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如果要实现循环输出,则可以在&#123;&#123;&#125;&#125;内,通过each语法循环数组,当前循环的索引使用$index进行访问,当前的循环项使用$value进行访问。</span><br><span class="line"></span><br><span class="line">&#123;&#123;each arr&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;$index)&#125;  &#123;&#123;$value&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;/each)&#125;</span><br></pre></td></tr></table></figure>

<p><strong>6．标准语法-过滤器</strong></p>
<p><strong>需处理的值</strong>———–参数——–<strong>过滤器函数</strong>———返回值———–<strong>输出新值</strong></p>
<p><strong>过滤器的本质,就是一个function处理函数。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;value  |  filterName &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>过滤器语法类似管道操作符,它的上一个输出作为下一个输入。</strong></p>
<p><strong>定义过滤器的基本语法如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">template.<span class="property">defaults</span>.<span class="property">imports</span>.<span class="property">filterName</span> = <span class="keyword">function</span> (<span class="params">value</span>) &#123;<span class="comment">/*return处理的结果*/</span>&#125;</span><br></pre></td></tr></table></figure>



<p><strong>定义一个格式化时间的过滤器dateFormat如下:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.&lt;div&gt;注册时间: &#123;iregTime | dateFormat)&#125;&lt;/div&gt;</span></span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">imports</span>.<span class="property">dateFoxmat</span> = <span class="keyword">function</span> (<span class="params">date</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> y = date.<span class="title function_">getFullYear</span>() </span><br><span class="line">    <span class="keyword">var</span> m = date.<span class="title function_">getMonth</span>() +<span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> d = date.<span class="property">getDate</span> ()</span><br><span class="line">    <span class="keyword">return</span> y+<span class="string">&#x27;-&#x27;</span>+m+<span class="string">&#x27;-&#x27;</span>+d <span class="comment">//注意,过滤器最后一定要return一个值</span></span><br></pre></td></tr></table></figure>

<h2 id="6-模板引擎的实现原理"><a href="#6-模板引擎的实现原理" class="headerlink" title="6.模板引擎的实现原理"></a>6.模板引擎的实现原理</h2><h3 id="6-1正则与字符串操作"><a href="#6-1正则与字符串操作" class="headerlink" title="6.1正则与字符串操作"></a>6.1正则与字符串操作</h3><p><strong>1,基本语法</strong></p>
<p><strong>exec()函数用于检索字符串中的正则表达式的匹配。</strong></p>
<p><strong>如果字符串中有匹配的值,则返回该u配值,否则返回null.</strong></p>
<p><strong>RegExpobject.exec (string)</strong></p>
<p><strong>示例代码如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pattern =<span class="regexp">/o/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//输出的结果[&quot;o&quot;, index: 4, input: &quot;hello&quot;, groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> (pattern.<span class="property">exec</span> (str)).</span><br></pre></td></tr></table></figure>

<p><strong>2.分组</strong></p>
<p><strong>正则表达式中()包起来的内容表示一个分组,可以通过分组来提取自己想要的内容,示例代码如下:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str =<span class="string">&#x27;&lt;div&gt;我是 &#123;&#123;name)&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;([a-zA-Z]+) &#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = pattern.<span class="title function_">exec</span>(str)</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> (patternResult)</span><br><span class="line"><span class="comment">//得到name相关的分组信息</span></span><br><span class="line"><span class="comment">// [&quot;&#123;&#123;name&#125;&#125; &#125;&quot;, &quot;name&quot;, index: 7, input: &quot;&lt;div&gt;我是&#123;&#123;name&#125;&#125;&lt;/div&gt;&quot;, groups: undefined]</span></span><br></pre></td></tr></table></figure>

<p><strong>3.字符串的replace函数</strong></p>
<p><strong>replace()函数用于在字符串中用一些字符替换另一些字符,语法格式如下:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">&#x27;123456. .replace (&#x27;</span><span class="number">123</span><span class="string">&#x27;, &#x27;</span>abc<span class="string">&#x27;) //的result的值为字符串&#x27;</span>abc456</span><br></pre></td></tr></table></figure>

<p><strong>示例代码如下</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str =<span class="string">&#x27;&lt;div&gt;我是&#123;&#123;nane&#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/ &#123;&#123;([a-zA-Z]+)&#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = pattern.<span class="property">exec</span> (str)</span><br><span class="line">str = str.<span class="property">replace</span> (patternResult [<span class="number">0</span>], patternResult [<span class="number">1</span>]) <span class="comment">// replace函数返回值为替换后的新字符串</span></span><br><span class="line"><span class="comment">//输出的内容是: &lt;div&gt;我是name&lt;/div&gt;</span></span><br><span class="line"><span class="variable language_">console</span>. log (str)</span><br></pre></td></tr></table></figure>

<p><strong>4.多次replace</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = pattern.<span class="property">exec</span> (str)</span><br><span class="line">str = str.<span class="property">replace</span> (patternResult [<span class="number">0</span>], patternResult [<span class="number">1</span>])</span><br><span class="line"><span class="variable language_">console</span>.1og (str) <span class="comment">//输出&lt;div&gt;name今年&#123;&#123;age &#125;&#125;岁了&lt;/div&gt;</span></span><br><span class="line">patternResult = pattern.<span class="property">exec</span> (str)</span><br><span class="line">str = str.<span class="property">replace</span> (patternResult [<span class="number">0</span>], patternResult [<span class="number">1</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> (str) <span class="comment">//输出&lt;div&gt;name今年age岁了&lt;/div&gt;</span></span><br><span class="line">patternResult = pattern.<span class="property">exec</span> (str)</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span> (patternResult) <span class="comment">//输出null</span></span><br></pre></td></tr></table></figure>

<p><strong>5,使用while循环replące</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;)/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = <span class="literal">null</span></span><br><span class="line"><span class="keyword">while</span> (patternResult = pattern.<span class="property">exec</span> (str) ) &#123;</span><br><span class="line">    str = str.<span class="property">replace</span> (patternResult [<span class="number">0</span>], patternResult [<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line">    <span class="variable language_">console</span>.1og (str) <span class="comment">//输出&lt;div&gt;name今年age岁了&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>6.replace替换为真值</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data&#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;)/</span></span><br><span class="line"><span class="keyword">var</span> patternResult = <span class="literal">null</span></span><br><span class="line"><span class="keyword">while</span> (patternResult = pattern.<span class="property">exec</span> (str) ) &#123;</span><br><span class="line">    str = str.<span class="property">replace</span> (patternResult [<span class="number">0</span>], data[patternResult[<span class="number">1</span>]])</span><br><span class="line">&#125;</span><br><span class="line">    <span class="variable language_">console</span>.1og (str) <span class="comment">//输出&lt;div&gt;name今年age岁了&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2实现简易的模板引擎"><a href="#6-2实现简易的模板引擎" class="headerlink" title="6.2实现简易的模板引擎"></a>6.2实现简易的模板引擎</h3><p><strong>1,实现步骤</strong></p>
<p><strong>定义模板结构</strong></p>
<p><strong>预调用模板引擎</strong></p>
<p><strong>封装template函数</strong></p>
<p><strong>导入并使用自定义的模板引擎</strong></p>
<p><strong>2,定义模板结构</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> id=<span class="string">&quot;tpl-user&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名: &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄: &#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>性别: &#123;&#123;gender&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>住址: &#123;&#123;address &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>3.预调用模板引擎</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">//定义数据</span></span><br><span class="line">    <span class="keyword">var</span> data =&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">28</span>, <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;北京顺义马坡&#x27;</span> &#125;</span><br><span class="line">    <span class="comment">//调用模板函数</span></span><br><span class="line">    <span class="keyword">var</span> htmlstr = template (<span class="string">&#x27;tpl-user&#x27;</span>, data)</span><br><span class="line">    <span class="comment">//渲染HTMI结构</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">getElementById</span> (<span class="string">&#x27;user-box&#x27;</span>).<span class="property">innerHTML</span> = htmlstr </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>4.封装template函数</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">template</span> (id,data)&#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="variable language_">document</span>.<span class="property">getElementById</span> (id).<span class="property">innerHTML</span></span><br><span class="line">    <span class="keyword">var</span> pattern =<span class="regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span></span><br><span class="line">    <span class="keyword">var</span> pattResult = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">while</span> (pattResult = pattern.<span class="property">exec</span> (str))&#123;</span><br><span class="line">           str =str.<span class="property">replace</span> (pattResult [<span class="number">0</span>], data[pattResult [<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> str</span><br></pre></td></tr></table></figure>

<p><strong>5,导入并使用自定义的模板引擎</strong></p>
<script src="./js/template.js"×/script>


# 1.XMLHttpRequest的基本使用

## 1.1什么XMLHttpRequest

**XMLHtpRequest (简称xhr)是浏览器提供的Javascript对象,通过它,可以请求服务器上的数据资源。之前所学的jQuery中的Ajax函数,就是基于xhr对象封装出来的。**

## **1.2使用xhr起GET请求**

**步骤**

**创建xhr对象**

**调用xhr.open()函数**

**调用xhr.send()函数**

**听xhr.onreadystatechange事件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建XHR对象</span></span><br><span class="line"><span class="keyword">var</span> xhr =<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span> ()</span><br><span class="line"><span class="comment">//2.调用open函数,指定请求方式与URL地址</span></span><br><span class="line">xhr.<span class="property">open</span> (<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks &#x27;</span>)</span><br><span class="line"><span class="comment">//3.调用send函数,发起Ajax请求</span></span><br><span class="line">xhr.<span class="property">send</span> ()</span><br><span class="line"><span class="comment">// 4.监听onreadystatechange事件</span></span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//4.1监听xhr对象的请求状态readystate ;与服务器响应的状态status</span></span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readystate</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">//4.2打印服务器响应回来的数据</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">resnserext</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 1.3了解xhr对象的readyState属性

**XMLHttpRequest对象的readyState属性,用来表示当前Ajax请求所处的状态。每个Ajax请求必然处于以下状态中的一个:**

**值					状态									描述**

**0					UNSENT						XMLHtpRequest对象已被创建,但尚未调用open方法。**

**1					OPENED						open()方法已经被调用。**

**2			HEADERS_RECEIVED 		 send()方法已经被调用,响应头也已经被接收。**

**3					LOADING						数据接收中,此时response属性中已经包含部分数据。**

**4					DONE								Ajax请求完成,这意味着数据传输已经彻底完成或失败**

## 1.4使用xhr发起带参数的GET请求

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ……省略不必要的代码</span></span><br><span class="line">xhr.<span class="property">open</span> (<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks?id=1&#x27;</span>)</span><br><span class="line"><span class="comment">// ….省略不必要的代码</span></span><br></pre></td></tr></table></figure>

**这种在URL地址后面拼接的参数,叫做查询字符串**

## 1.5查询字符串

**1,什么是查询字符串**

**定义:查询字符串(URL参数)是指在URL的末尾加上用于向服务器发送信息的字符串(变量)**

**格式:将英文的?放在URL的末尾,然后再加上参数=值,想加上多个参数的话,使用&符号进行分隔。以这个形式,可以将想要发送给服务器的数据添加到URL中。**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不带参数的URL地址</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top: 3006/api/getbooks</span></span><br><span class="line"><span class="comment">//带一个参数的URL地址</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top: 3006/api/getbooks?id=1</span></span><br><span class="line"><span class="comment">//带两个参数的URL地址</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//ww.1iulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记</span></span><br></pre></td></tr></table></figure>

**2.GET请求携带参数的本质**

**无论使用S.ajax(),还是使用$.get(),又或者直接使用xhr对象发起GET请求,当需要携带参数的时候,本质上,都是直接将参数以查询字符串的形式,追加到URL地址的后面,发送到服务器的。**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.get (<span class="string">&#x27;url&#x27;</span>, (<span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>), <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$.get (<span class="string">&#x27;url?name=zs&amp;age=20&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;)</span><br><span class="line"></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: <span class="string">&#x27;url&#x27;</span>, <span class="attr">data</span>: &#123;<span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;, <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;&#125;)</span><br><span class="line"><span class="comment">//等价于</span></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;<span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: <span class="string">&#x27;url?name=zs&amp;age=20&#x27;</span>, <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;&#125;)</span><br></pre></td></tr></table></figure>

## 1.6 URL编码与解码

**1.什么是URL编码**

**URL地址中,只允许出现英文相关的字母、标点符号、数字,因此,在URL地址中不允许出现中文字符。**

**如果URL中需要包念中文这样的字符,则必须对中文字符进行编码(转义)**

**URL编码的原则:使用安全的字符(没有特殊用途或者特殊意义的可打印字符)去表示那些不安全的字符。**

**URL编码原则的通俗理解:使用英文字符去表示非英文字符。**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//ww.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记</span></span><br><span class="line"><span class="comment">//经过URL编码之后, URL地址变成了如下格式 </span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=%E8%A5%BF %BF%B%BF</span></span><br><span class="line">%<span class="variable constant_">BF</span>%<span class="variable constant_">BF</span>%<span class="variable constant_">BF</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

2,如何对URL进行编码与解码

浏览器提供了URL编码与解码的API,分别是:

encodeURI()编码的函数

decodeURI()解码的函数

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">encodeURI</span> (<span class="string">&#x27;黑马程序员&#x27;</span>)</span><br><span class="line"><span class="comment">//输出字符串E9BB91E9A9ACE7AB8BE5BA8FE59198</span></span><br><span class="line"><span class="built_in">decodeURI</span> (<span class="string">&#x27;8E98BB8918E98A98AC&#x27;</span>)</span><br><span class="line"><span class="comment">//输出字符串  黑马</span></span><br></pre></td></tr></table></figure>

**3.URL编码的注意事项**

**由于浏览器会自动对URL地址进行编码操作,因此,大多数情况下,程序员不需要关心URL地址的编码与解码操作。**

**更多关于URL编码的知识,请参孝如下博客:**

**https://blog.csdn.net/xd_0111/article/details/78028889**

## 1.7使用xhr发起POsT请求

**步骤:**

**创建xhr对象**

**调用xh.open()函数**

**设置Content-Type属性(固定写法)**

**调用xhr.send()函数,同时指定要发送的数据**

**监听xhr.onreadystatechange事件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建xhr对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span> ()</span><br><span class="line"><span class="comment">//2.调用open()</span></span><br><span class="line">xhr.<span class="property">open</span> (<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>)</span><br><span class="line"><span class="comment">//3.置Content-Type属性(固定写法)</span></span><br><span class="line">xhr.<span class="property">setRequestHeader</span> (<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"><span class="comment">//4.调用send(),同时将数据以查询字符串的形式,提交给服务器</span></span><br><span class="line">xhr.<span class="property">send</span> (<span class="string">&#x27;bookname=水浒传&amp;author=施耐庵&amp;publisher=天津图书出版社&#x27;</span>)</span><br><span class="line"><span class="comment">//5.监听onreadystatechange事件</span></span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readystate</span> === <span class="number">4</span>&amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

# 2,数据交换格式

## 2.1什么是数据交换格式

**数据交换格式,就是服务器端与客户端之间进行数据传输与交换的格式。前端领域,经常提及的两种数据交换格式分别是XML和JSON,其中XML用的非常少,所以,我们重点要学习的数据交换格式就是JSON.**

​										**数据传输与交换**

**web服务器------------------XML------JSON-----------用户的电脑(客户端)**

## 2.2 XML

**1.什么是XML**

**XML的英文全称是EXtensible Markup Language,即可扩展标记语言。因此, XML和HTML类似也是一种标记语音。**

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">note</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">to</span>&gt;</span>1s<span class="tag">&lt;/<span class="name">to</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">from</span>&gt;</span>zs<span class="tag">&lt;/<span class="name">from</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">heading</span>&gt;</span>通知<span class="tag">&lt;/<span class="name">heading</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span>晚上开会<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">note</span>&gt;</span></span><br></pre></td></tr></table></figure>

**2.XML和HTML的区别**

**XML和HTML虽然都是标记语言,但是,它们两者之间没有任何的关系。**

**HTML被设计用来描述网页上的内容,是网页内容的载体**

**XML被设计用来传输和存储数据,是数据的载体**

**3.XML的缺点**

**XML格式臃肿,和数据无关的代码多,体积大,传输效率低**

**在Javascript中解析XML比较麻烦**

## 2.3 JSON

**1.什么是JSON**

**概念: JSON的英文全称是JavaScript Object Notation,即"JavaScript对象表示法"。简单来讲**

**JSON就是Javascript对象和数组的字符申表示法,它使用文本表示一个JS对象或数组的信息,因此,JSON的本质是字符串**

**作用: JSON是一种轻量级的文本数据交换格式,在作用上类似于XML,专门用于存储和传输数据,但是JSON比XML更小、更快、更易解析。** 

**现状: JSON是在2001年开始被推广和使用的数据格式,到现今为止, JSON已经成为了主流的数据交换格式。** 

**2.JSON的两种结构** 

**JSON就是用字符串来表示Javascript的对象和数组。所以, JSON中包含对象和数组两种结构,通过这两种结构的相互嵌套,可以表示各种复杂的数据结构。**



**对象结构:对象结构在JSON中表示为()括起来的内容。数据结构为( key: value, key: value . ..)的键值对结构。其中, key必须是使用英文的双引号包裹的字符串, value的数据类型可以是数字、字符串.布尔值、null、数组、对象6种类型。** 

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2s&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hobby&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;吃饭&quot;</span><span class="punctuation">,</span> <span class="string">&quot;睡觉&quot;</span><span class="punctuation">,</span> <span class="string">&quot;打豆豆&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span> </span><br></pre></td></tr></table></figure>

**数组结构:数组结构在JSON中表示为[]括起来的内容。数据结构为["java" "javascript", 30,true...]数组中数据的类型可以是数字、字符串、布尔值、null、数组、对象6种类型。**

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="string">&quot;java&quot;</span><span class="punctuation">,</span> <span class="string">&quot;python&quot;</span><span class="punctuation">,</span> <span class="string">&quot;php&quot;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span> <span class="number">100</span><span class="punctuation">,</span> <span class="number">200</span><span class="punctuation">,</span> <span class="number">300.5</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zs&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1s&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">&#125;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="punctuation">[</span><span class="string">&quot;苹果&quot;</span><span class="punctuation">,</span> <span class="string">&quot;榴莲&quot;</span><span class="punctuation">,</span> <span class="string">&quot;椰子&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span> <span class="number">50</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">]</span> <span class="punctuation">]</span> </span><br></pre></td></tr></table></figure>

**3.JSON语法注意事项**

**属性名必须使用双引号包裹**

**字符串类型的值必须使用双引号包裹**

**JSON中不允许使用单引号表示字符串**

**JSON中不能写注释**

**JSON的最外层必须是对象或数组格式**

**不能使用undefined或函数作为JSON的值**

**JSON的作用:在计算机与网络之间存储和传输数据。**

**JSON的本质:用字符串来表示Javascript对象数据或数组数据**

**4.JSON和JS对象的关系** 

**JSON是JS对象的字符串表示法,它使用文本表示一个JS对象的信息,本质是一个字符串。例如:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这是一个对象</span></span><br><span class="line"><span class="keyword">var</span> obj =&#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;</span><br><span class="line"><span class="comment">//这是一个JSON字符串,本质是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> json =<span class="string">&#x27;(&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125; &#x27;</span></span><br></pre></td></tr></table></figure>

**5.JSON和JS对象的互转**

**要实现从ISON字符串转换为JS对象,使用JSON.parse()方法:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="title class_">JSON</span>.<span class="property">parse</span> (<span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;world&quot;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">//结果是&#123;a: &#x27;He11o&#x27;, d: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

**要实现从JS对象转换为JSON字符串,使用JSON.stringify()方法:** 

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json =<span class="title class_">JsoN</span>. stringify (&#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;wor14&#x27;</span>&#125;)</span><br><span class="line"><span class="comment">//结果是&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;world&quot;&#125;&#x27; </span></span><br></pre></td></tr></table></figure>

**6,序列化和反序列化**

**把数据对象转换为字符串的过程,叫做序列化,例如:调用JSON.stringify0函数的操作,叫做JSON序列化。**

**把字符串转换为数据对象的过程,叫做反序列化,例如:调用ISON.parse0函数的操作,叫做JSON反序列化。**

## 3.1要实现的效果

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;./itheima.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//2.调用自定义的itheima函数,发起Ajax数据请求</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">itheima</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">method</span>: <span class="string">&#x27;请求类型&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">url</span>: <span class="string">&#x27;请求地址&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">data</span>: &#123;<span class="comment">/*请求参数对象*/</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123; <span class="comment">//成功的回调函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">//打印数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> </span><br></pre></td></tr></table></figure>

## 3.2定义options参数选项

**itheima()函数是我们自定义的Ajax函数,它接收一个配置对象作为参数,配置对象中可以配置如下属性:**

**method		请求的类型**

**url				 请求的URL地址**

**data 			 请求携带的数据**

**success		请求成功之后的回调函数**

## 3.3处理data参数

 **需要把data对象,转化成查询字符串的格式,从而提交给服务器,因此提前定义resolveData函数如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//处理data 参数</span></span><br><span class="line"><span class="comment">//@param (data)需要发送到服务器的数据</span></span><br><span class="line"><span class="comment">//@returns (string)返回拼接好的查询字符串name=zs&amp;age=10</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolveData</span> (data) &#123;</span><br><span class="line">    <span class="keyword">var</span> arr= []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> data)&#123;</span><br><span class="line">        arr.<span class="property">push</span> (k +<span class="string">&#x27;=&#x27;</span> + data[k])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="property">join</span> (<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 3.4定义itheima函数

**在itheima0函数中,需要创建xhr对象,并监听onreadystatechange事件:** 

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">itheima</span> (options) &#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span> ()</span><br><span class="line">    <span class="comment">//拼接查询字符串</span></span><br><span class="line">    <span class="keyword">var</span> qs = resolveData (options.<span class="property">data</span>)</span><br><span class="line">    <span class="comment">//监听请求状态改变的事件</span></span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">readystate</span> ===<span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span>===<span class="number">200</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> result = <span class="title class_">JSON</span>.<span class="property">parse</span> (xhr.<span class="property">responseText</span>)</span><br><span class="line">            options.<span class="title function_">success</span>(result)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 3.5判断请求的类型

**不同的请求类型,对应xhr对象的不同操作,因此需要对请求类型进行if..else ...的判断**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (options.<span class="property">method</span>.<span class="property">toUpperCase</span> ()===<span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">//发起GET请求</span></span><br><span class="line">    xhr.<span class="property">open</span> (options.<span class="property">method</span>, options.<span class="property">url</span> + <span class="string">&#x27;?&#x27;</span> + qs)</span><br><span class="line">    xhr.<span class="property">send</span> ()</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (options.<span class="property">method</span>.<span class="property">toUpperCase</span> ()===<span class="string">&#x27;post&#x27;</span>)&#123;</span><br><span class="line">    <span class="comment">//发起POST请求</span></span><br><span class="line">    xhr.<span class="property">open</span> (options.<span class="property">method</span>, options.<span class="property">url</span>)</span><br><span class="line">    xhr.<span class="property">setRequestHeader</span> (<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line">    xhr.<span class="property">send</span> (qs)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

# 4.XMLHttpRequest Level2的新特性

## 4.1认识XMLHttpRequest Level2

**1.旧版XMLHttpRequest的缺点**

**只支持文本数据的传输,无法用来读取和上传文件**

**传送和接收数据时,没有进度信息,只能提示有没有完成，**

**2.XMLHttpRequest Level2的新功能**

**可以设置HTTP请求的时限**

**可以使用FormData对象管理表单数据**

**可以上传文件**

**可以获得数据传输的进度信息**

## 4.2设置HTTP请求时限

**有时, Ajax操作很耗时,而且无法预知要花多少时间。如果网速很慢,用户可能要等很久。新版本的XMLHttpRequest对象,增加了timeout属性,可以设置HTTP请求的时限:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">timeout</span> = <span class="number">3000</span></span><br></pre></td></tr></table></figure>

**上面的语句,将最长等待时间设为3000毫秒。过了这个时限,就自动停止HTTP请求。与之配套的还有一个timeout事件,用来指定回调函数:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span> (<span class="params">event</span>)&#123;</span><br><span class="line">    alert (<span class="string">&#x27;请求超时! &#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 4.3 FormData对象管理表单数据

**Ajax操作往往用来提交表单数据。为了方便表单处理, HTML5新增了一个FormData对象,可以模拟表单操作:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.新建FormData对象</span></span><br><span class="line"><span class="keyword">var</span> fd =<span class="keyword">new</span> <span class="title class_">FormData</span> ()</span><br><span class="line"><span class="comment">//2为Formbata添加表单项</span></span><br><span class="line">fd.<span class="property">append</span> (<span class="string">&#x27;uname&#x27;</span>, <span class="string">&#x27;zs&#x27;</span>)</span><br><span class="line">fd.<span class="property">append</span> (<span class="string">&#x27;upwd&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">//3.创建XHR对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMIHttpRequest</span>()</span><br><span class="line"><span class="comment">//4·指定请求类型与URL地址</span></span><br><span class="line">xhr.<span class="property">open</span> (<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top: 3006/api/formdata&#x27;</span>)</span><br><span class="line"><span class="comment">//5．直接提交FormData对象，这与提交网页表单的效果，完全一样</span></span><br><span class="line">xhr.<span class="property">send</span> (fd)</span><br></pre></td></tr></table></figure>

**FormData对象也可以用来获取网页表单的值,示例代码如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取表单元素</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="property">querySelector</span> (<span class="string">&#x27;#form1&#x27;</span>)</span><br><span class="line"><span class="comment">//监听表单元素的submit事件</span></span><br><span class="line">form.<span class="property">addEventListener</span> (<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    e.<span class="property">preventDefault</span> ()</span><br><span class="line">    <span class="comment">//根据form表单创建FormData对象,会自动将表单数据填充到FormData对象中</span></span><br><span class="line">    <span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span> (form)</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span> ()</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;http://www.liulongbin.top:3006/api/formdata&#x27;</span>)</span><br><span class="line">    xhr.<span class="property">send</span> (fd)</span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 4.4上传文件

**新版XMLHttpRequest对象,不仅可以发送文本信息,还可以上传文件。**

**实现步骤:**

**①定义UI结构**

**②验证是否选择了文件**

**向FormData中追加文件**

**使用xhr发起上传文件的请求**

**监听onreadystatechange事件**

**1.定义UI结构**

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.文件选择框--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;filel&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2.上传按钮--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnUpload&quot;</span>&gt;</span>上传文件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--3,显示上传到服务器上的图片--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

**2.验证是否选择了文件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.获取上传文件的按钮</span></span><br><span class="line"><span class="keyword">var</span> btnUpload =<span class="variable language_">document</span>.<span class="title function_">querySeleator</span>(<span class="string">&#x27;#btnUpload&#x27;</span>)</span><br><span class="line"><span class="comment">//2. 按钮添加click事件监听</span></span><br><span class="line">btnUpload.<span class="property">addEventListener</span> (<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">//3.获取到选择的文件列表</span></span><br><span class="line"><span class="keyword">var</span> files = <span class="variable language_">document</span>.<span class="property">querySeleator</span> (<span class="string">&#x27;#filel&#x27;</span>).<span class="property">files</span></span><br><span class="line">    <span class="keyword">if</span> (files.<span class="property">length</span> &lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;请选择要上传的文件!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//....后续业务逻辑</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**3.向FormData中追加文件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建FormData对象</span></span><br><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line"><span class="comment">//2.向FormData中追加文件</span></span><br><span class="line">fd.<span class="property">append</span> ( <span class="string">&#x27;avatar&#x27;</span>, files[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

**4,使用xhr发起上传文件的请求**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建xhr对象</span></span><br><span class="line"><span class="keyword">var</span> xhr =<span class="keyword">new</span> xMLHttpRequest ()</span><br><span class="line"><span class="comment">// 2,调用open函数,指定请求类型与URL地址。其中,请求类型必须为PoST</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;POST&#x27;,&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;)</span></span><br><span class="line"><span class="string">//3.发起请求</span></span><br><span class="line"><span class="string">xhr.send (fd)</span></span><br></pre></td></tr></table></figure>

**5.监听onreadystatechange事件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readystate</span> =<span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> =<span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> data = <span class="title class_">JsoN</span>.<span class="property">parse</span> (xhr.<span class="property">responseText</span>)</span><br><span class="line">        <span class="keyword">if</span> (data.<span class="property">status</span>=<span class="number">200</span>) &#123; <span class="comment">//上传文件成功</span></span><br><span class="line">        <span class="comment">//将服务器返回的图片地址,设置为&lt;img&gt;标签的src属性</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">queryselector</span>(<span class="string">&#x27;#img&#x27;</span>).<span class="property">src</span>=<span class="string">&#x27;http://www.liulongbin.top: 3006&#x27;</span> + data.<span class="property">url1</span> </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//上传文件失败</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="property">log</span> (data, message)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 4.5显示文件上传进度

**新版本的XMLHttpRequest对象中,可以通过监听xhr.upload.onprogress事件,来获取到文件的上传进度语法格式如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建xHR对象</span></span><br><span class="line"><span class="keyword">var</span> xhr =<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span> ()</span><br><span class="line"><span class="comment">//监听xhr.upload的onprogress事件</span></span><br><span class="line">xhr.<span class="property">upload</span>. onprogress = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">// e.lenghcomputable是一个布尔值,表示当前上传的资源是否具有可计算的长度</span></span><br><span class="line"><span class="keyword">if</span> (e.<span class="property">lengthcomputable</span>)&#123;</span><br><span class="line">    <span class="comment">// e.loaded已传输的字节</span></span><br><span class="line">    <span class="comment">// e.total需传输的总字节</span></span><br><span class="line">    <span class="keyword">var</span> percentcomplete =<span class="title class_">Math</span>.<span class="property">ceil</span> ((e.<span class="property">loaded</span> / e.<span class="property">total</span>) *<span class="number">100</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**2.bootstap进度条**

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 文件选择器 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file1&quot;</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--上传文件按钮 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnUpload&quot;</span>&gt;</span>上传文件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 500px; margin: 15px 10px;&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar progress-bar-striped active&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 0%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;percent&quot;</span>&gt;</span></span><br><span class="line">           0%</span><br><span class="line">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

**3,监听上传进度的事件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">upload</span>.<span class="property">onprogress</span> =<span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">lengthcomputable</span>) &#123;</span><br><span class="line">        <span class="comment">//1.计算出当前上传进度的百分比</span></span><br><span class="line">    <span class="keyword">var</span> percentcomplete =<span class="title class_">Math</span>.<span class="property">ceil</span> ((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>)</span><br><span class="line">    $(<span class="string">&#x27;#percerki)</span></span><br><span class="line"><span class="string">      //2.设置进度条的宽度</span></span><br><span class="line"><span class="string">      .attr (&#x27;</span>style<span class="string">&#x27;, &#x27;</span><span class="attr">width</span>:<span class="string">&#x27; + percentComplete + &#x27;</span> %<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">      //3.显示当前的上传进度百分比</span></span><br><span class="line"><span class="string">      .html (percentComplete +&#x27;</span>%<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br></pre></td></tr></table></figure>

**4,监听上传完成的事件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">upload</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    $ (<span class="string">&#x27;#percent&#x27;</span>)</span><br><span class="line">    <span class="comment">//移除上传中的类样式</span></span><br><span class="line">    .<span class="property">removeclass</span> ()</span><br><span class="line">    <span class="comment">//添加上传完成的类样式</span></span><br><span class="line">     .<span class="property">addclass</span> (<span class="string">&#x27;progress-bar progress-bar-success&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

# 5.jQuery高级用法

## 5.1 jQuery实现文件上传

**1.定义UI结构**

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入jQuery-&gt;</span></span><br><span class="line"><span class="comment">&lt;script src=&quot;./lib/jquery.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;!--文件选择框--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file1&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--上传文件按钮--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnUpload&quot;</span>&gt;</span>上传<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

**2.验证是否选择了文件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#btnUpload&#x27;</span>).<span class="property">on</span> (<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//1,将jQuery对象转化为DOM对象,并获取选中的文件列表</span></span><br><span class="line">    <span class="keyword">var</span> files =$(<span class="string">&#x27;#filel&#x27;</span>) [<span class="number">0</span>] .<span class="property">files</span></span><br><span class="line">    <span class="comment">// 2.判断是否选择了文件</span></span><br><span class="line">    <span class="keyword">if</span> (files.<span class="property">length</span> &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;请选择图片后再上传!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**3.向FormData中追加文件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向FormData中追加文件</span></span><br><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span> ()</span><br><span class="line">fd.<span class="property">append</span> (<span class="string">&#x27;avatar&#x27;</span>, files [<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

**4,使用jQuery发起上传文件的请求**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: fd,</span><br><span class="line">    <span class="comment">//不修改content-Type属性,使用FormData默认的content-Type值</span></span><br><span class="line">    <span class="attr">contentType</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//不对FormData中的数据进行ur1编码,而是将FormData数据原样发送到服务器</span></span><br><span class="line">    <span class="attr">processData</span>: <span class="literal">false</span>, </span><br><span class="line">    <span class="attr">success</span>: <span class="title function_">fuction</span>(<span class="params">res</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.1og (res)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 5.2 jQuery实现loading效果

**1.ajaxStart(callback)**

**Ajax请求开始时,执行ajaxStart函数。可以在ajaxStart的callback中显示loading效果,示例代码如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自jQuery版本1.8起,该方法只能被附加到文档</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="property">ajaxstart</span> (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#loading&#x27;</span>).<span class="property">show</span> ()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**注意: $(document).jaxStart()函数会监听当前文档内所有的Ajax请求。**



**2.ajaxStop(callback)**

**Ajax请求结束时,执行ajaxstop函数。可以在ajaxStop的callback中隐藏loading效果,示例代码如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自jguery版本1.8起,该方法只能被附加到文档</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="property">ajaxstop</span> (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    $(<span class="string">&#x27;#loading&#x27;</span>).<span class="title function_">hide</span>()</span><br><span class="line">&#125; )</span><br></pre></td></tr></table></figure>

# 6.axios

## 6.1什么是axios

**Axios是专注于网络数据请求的库。**

**相比于原生的XMLHttpRequest对象, axios简单易用。**

**相比于jQuery, axios更加轻量化,只专注于网络数据请求。**

## 6.2 axios发起GET请求

**axios发起get请求的语法:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">get</span> (<span class="string">&#x27;url&#x27;</span>, &#123; <span class="attr">params</span>: &#123;<span class="comment">/*参数*/</span>&#125; &#125;).<span class="property">then</span> (callback)</span><br></pre></td></tr></table></figure>

**具体的请求示例如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求的URL地址</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span></span><br><span class="line"><span class="comment">//请求的参数对象</span></span><br><span class="line"><span class="keyword">var</span> paramsobj=&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;</span><br><span class="line"><span class="comment">//调用axios.get()发起GET请求</span></span><br><span class="line">axios.<span class="property">get</span> (url, &#123; <span class="attr">params</span>: paramsobj &#125;) .<span class="property">then</span> (<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="comment">// res.data是服务器返回的数据</span></span><br><span class="line">    <span class="keyword">var</span> result = res.<span class="property">data</span></span><br><span class="line">    <span class="variable language_">console</span>. log (res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

### 6.3 axios发起POST请求

**axios发起post请求的语法:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">post</span> (<span class="string">&#x27;url&#x27;</span>, &#123;<span class="comment">/*参数*/</span> &#125;) .<span class="property">then</span> (callback)</span><br></pre></td></tr></table></figure>

**具体的请求示例如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求的URL地址</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span></span><br><span class="line"><span class="comment">//要提交到服务器的数据</span></span><br><span class="line"><span class="keyword">var</span> dataobj=&#123; <span class="attr">location</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;顺义&#x27;</span> &#125;</span><br><span class="line"><span class="comment">//调用axios.post()发起POST请求</span></span><br><span class="line">axios.<span class="property">post</span> (url, dataobj).<span class="property">then</span> (<span class="title function_">fuction</span>(<span class="params">res</span>)&#123;</span><br><span class="line"><span class="comment">// res.data是服务器返回的数据</span></span><br><span class="line"> <span class="keyword">var</span> result =res.<span class="property">data</span></span><br><span class="line"> <span class="variable language_">console</span>.<span class="property">log</span> (result)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

## 6.4直接使用axios发起请求

**axios也提供了类似于jQuery中$.ajax()的函数,语法如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios (&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;请求类型&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;请求的URI地址&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;<span class="comment">/*POST数据*/</span>&#125;,</span><br><span class="line">    <span class="attr">params</span>: &#123;<span class="comment">/* GET参数*/</span> &#125;</span><br><span class="line">&#125;).<span class="property">then</span> (callback)</span><br></pre></td></tr></table></figure>

**1,直接使用axios发起GET请求**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios (&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;<span class="comment">// GET参数要通过params属性提供</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;) .<span class="property">then</span> (<span class="keyword">function</span> (<span class="params">res</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="property">log</span> (res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**2.直接使用axios发起POST请求**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios (&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http:/www.liulongbin.top:3006/api/post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;<span class="comment">// POST数据要通过data属性提供</span></span><br><span class="line">    <span class="attr">bookname</span>: <span class="string">&#x27;程序员的自我修养&#x27;</span>,</span><br><span class="line">    <span class="attr">price</span>: <span class="number">666</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;).<span class="property">then</span> (<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="property">log</span> (res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

# 1.了解同源策略和跨域

## 1.1同源策略

**1.什么是同源**

**如果两个页面的协议,域名和端口都相同,则两个页面具有相同的源。**

**例如,下表给出了相对于http://www.test.com/index.html页面的同源检测:**



**URL																	是否同源						原因**

**http://www.test.com/other.html				 	是						同源(协议、域名、端口相同)**

**https://www.test.com/about.html				   否						协议不同(http与https)**

**http://blog.test.com/movie.html					  否					域名不同(www.test.com与blog.test.com)**

**http://www.test.com:7001/home.html			否					端口不同(默认的80端口与7001端**

**http://www.test.com:80/main.html				  是					同源(协议、域名、端口相同)**



**2·什么是同源策略**

**同源策略(英文全称Same origin policy)是浏览器提供的一个安全功能**

**MDN官方给定的概念:同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的重要安全机制。**

**通俗的理解:浏览器规定, A网站的JavaScript,不允许和非同源的网站C之间,进行资源的交互,例如:**

**无法读取非同源网页的Cookie, LocalStorage和IndexedDB,**

**无法接触非同源网页的DOM**

**无法向非同源地址发送Ajax请求**

## 1.2跨域

**1.什么是跨域**

**同源指的是两个URL的协议、域名、端口一致,反之,则是跨域**

**出现跨域的根本原因:浏览器的同源策略不允许非同源的URL之间进行资源的交互。**

**网页: http://www.test.com/index.html**

**接口: http://www.api.com/userlist**

**2.浏览器对跨域请求的拦截**

**注意:浏览器允许发起跨域请求,但是,跨域请求回来的数据,会被浏览器拦截,无法被页面获取到**

**3,如何实现跨域数据请求**

**现如今,实现跨域数据请求,最主要的两种解决方案,分别是JSONP和CORS.**

**JSONP:出现的早,兼容性好(兼容低版本IE) 。是前端程序员为了解决跨域问题,被迫想出来的一种临时解决方案。缺点是只支持GET请求,不支持POST请求。**

**CORS:出现的较晚,它是w3C标准,属于跨域Ajax请求的根本解决方案。支持GET和POST请求。缺点是不兼容某些低版本的浏览器。**

# 2.JSONP

## 2.1什么是JSONP

**JSONP (ISON with Padding)是JSON的一种“使用模式" ,可用于解决主流浏览器的跨域数据访问的问题。**

## 2.2 JSONP的实现原理

**由于浏览器同源策略的限制,网页中无法通过Ajax请求非同源的接口数据。但是<script>标签不受浏览器同源策略的影响,可以通过src属性,请求非同源的js脚本**

**因此, JSONP的实现原理,就是通过<script>标签的src属性,请求跨域的数据接口,并通过函数调用的形式,接收跨域接口响应回来的数据。**

## 2.3自己实现一个简单的JSONP

**定义一个success回调函数:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">suocesa</span> (data) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="property">log</span> (<span class="string">&#x27;获取到了data数据&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="property">log</span> (data)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

**通过<script>标签,请求接口数据:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;http://ajax.frontend.itheina.net:3006/api/jsonp?callback=success&amp;name=zs&amp;age=20&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

## 2.4 JSONP的缺点

**由于JSONP是通过<script>标签的src属性,来实现跨域数据获取的,所以, JSONP只支持GET数据请求,不支持POST请求。**

**注意: JSONP和Ajax之间没有任何关系,不能把JSONP请求数据的方式叫做Ajax,因为JSONP没有用到XMLHttpRequest这个对象**

## 2.5 jQuery中的JSONP

**jQuery提供的S.ajax0函数,除了可以发起真正的Ajax数据请求之外,还能够发起JSONP数据请求,例如:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax (&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://ajax.frontend.itheima.net:3006/api/jsonp?name=zs&amp;age=20&#x27;</span>,</span><br><span class="line">    <span class="comment">//如果要使用s.ajax()发起JSONP请求,必须指定datatype为jsonp</span></span><br><span class="line">    <span class="attr">dataType</span>:<span class="string">&#x27; jsonp&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.1og (res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**默认情况下,使用jQuery发起JSONP请求,会自动携带一个callback-jQueryxxx的参数, jQueryxx是随机生成的一个回调函数名称。**

## 2.6自定义参数及回调函数名称

**在使用jQuery发起ISONP请求时,如果想要自定义JSONP的参数以及回调函数名称,可以通过如下两个参数来指定:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.ajax (&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;http://ajax.frontend.itheima.net:3006/api/jsonp?name=zs&amp;age=20&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">    <span class="comment">//发送到服务端的参数名称,默认值为callback</span></span><br><span class="line">    <span class="attr">jsonp</span>: <span class="string">&#x27;callback&#x27;</span>,</span><br><span class="line">    <span class="comment">//自定义的回调函数名称,默认值为jqueryxxx格式</span></span><br><span class="line">    <span class="attr">jsonpCallback</span>: <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="property">log</span> (res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 2.7 jQuery中JSONP的实现过程

**jQuery中的JSONP,也是通过<script>标签的src属性实现跨域数据访问的,只不过, jQuery采用的是动态创建和移除<script>标签的方式,来发起JSONP数据请求。**

**在发起JSONP请求的时候,动态向<header> 中append一<script>标签;**

**在JSONP请求成功以后,动态从<header>中移除刚才append进去的<script>标签;**

# 3.案例-淘宝搜索

## 3.2获取用户输入的搜索关键词

**为了获取到用户每次按下键盘输入的内容,需要监听 入框的keyup事件,示例代码如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听文本框的keyup事件</span></span><br><span class="line">$(<span class="string">&#x27;#ipt&#x27;</span>).<span class="property">on</span> (<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//获取用户输入留内容</span></span><br><span class="line">    <span class="keyword">var</span> keywords = $(<span class="variable language_">this</span>).<span class="title function_">val</span>().<span class="property">trim</span> ()</span><br><span class="line">    <span class="comment">//判断用户输入的内容是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (keywords.<span class="property">length</span> &lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span>获取搜索建议列表</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

## 3.3封装getSuggestList函数

**将获取搜索建议列表的代码,封装到getSuggestList函数中,示例代码如下:**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getSuggestList</span> (kw) &#123;</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="comment">//指定请求的URL,地址,其中,q是用户输入的关键字</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://suggest.taobao.com/sug?q=&#x27;</span> +kw,</span><br><span class="line">        <span class="comment">// 定要发起的是JSONP请求</span></span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">        <span class="comment">//成功的回调函数</span></span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="property">log</span> (res) &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 3.4渲染建议列表的U1结构

**1,定义搜索建议列表**

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- tab栏区域--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--搜索区域--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-box&quot;</span><span class="attr">x</span>&lt;/<span class="attr">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--搜索建议列表--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;suggest-list&quot;</span>×&lt;/<span class="attr">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

**2,定义模板结构**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--模板结构--&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;tpl-suggestList&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        </span><span class="template-variable">&#123;&#123;<span class="name"><span class="built_in">each</span></span> result&#125;&#125;</span><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;suggest-item&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">$value</span>[0]&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">		</span><span class="template-tag">&#123;&#123;/<span class="name"><span class="built_in">each</span></span>&#125;&#125;</span><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

**3·定义渲染模板结构的函数**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//渲染建议列表</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">renderSuggestList</span> (res)&#123;</span><br><span class="line">    <span class="comment">//如果没有需要渲染的数据,则直接return</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">result</span>.<span class="property">length</span> &lt;=o) &#123;</span><br><span class="line">        <span class="keyword">return</span> $(<span class="string">&#x27;#sugqest-list&#x27;</span>).<span class="property">empty</span> () .<span class="property">hide</span> ()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//渲染模板结构</span></span><br><span class="line">    <span class="keyword">var</span> htmlstr = template (<span class="string">&#x27;tpl-suggestList&#x27;</span>, res)</span><br><span class="line">    $(<span class="string">&#x27;#suggest-1ist&#x27;</span>).<span class="property">html</span> (htmlstr) .<span class="property">show</span> ()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**4,搜索关键词为空时隐藏搜索建议列表**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#ipt&#x27;</span>).<span class="property">on</span> (<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//获取用户输入的内容</span></span><br><span class="line">    <span class="keyword">var</span> keywords =$(<span class="variable language_">this</span>).<span class="title function_">val</span>().<span class="title function_">trim</span>()</span><br><span class="line">    <span class="comment">//判断用户输入的内容是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (keywords.<span class="property">length</span> &lt;= <span class="number">0</span>)</span><br><span class="line">        <span class="comment">//如果关键词为空,则清空后隐藏搜索建议列表</span></span><br><span class="line">        <span class="keyword">return</span> $(<span class="string">&#x27;#suggest-list&#x27;</span>).<span class="property">empty</span> () .<span class="property">hide</span> ()</span><br><span class="line">&#125;</span><br><span class="line">    getSuggestzist (keywords)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 3.5输入框的防抖

**1.什么是防抖**

**防抖策略(debounce)是当事件被触发后,延迟n秒后再执行回调,如果在这n秒内事件又被触发,则重新计时。**

**2·防抖的应用场景**

**用户在输入框中连续输入一串字符时,可以通过防抖策略、只在输入完后,才执行查询的请求,这样可以有效减少请求次数,节约请求资源;**

**3,实现输入框的防抖**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.防抖动的timer</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="literal">null</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounceSearch</span> (keywords) &#123;<span class="comment">// 2.定义防抖的函数</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span> (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//发起JSONP请求</span></span><br><span class="line">        getsuggestlist (keywords) </span><br><span class="line">    &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">&#x27;#ipt&#x27;</span>).<span class="property">on</span> (<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 3.在触发keyup事件时,立即清空timer</span></span><br><span class="line">    <span class="built_in">clearTimeout</span> (timer)</span><br><span class="line">    <span class="comment">// .省略其他代码</span></span><br><span class="line">    debounceSearch (keywords)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 3.6缓存搜索的建议列表

**1,定义全局缓存对象**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//缓存对象</span></span><br><span class="line"><span class="keyword">var</span> cacheobj =&#123;&#125; </span><br></pre></td></tr></table></figure>

**2,将搜索结果保存到缓存对象中**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//渲染建议列表</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">renderSuggestList</span> (res) &#123;</span><br><span class="line">    <span class="comment">// …..省略其他代码</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//将搜索的结果，添加到缓存对象中</span></span><br><span class="line">    <span class="keyword">var</span> k =$(<span class="string">&#x27;#ipt&#x27;</span>).<span class="property">val</span> ().<span class="title function_">trim</span>()</span><br><span class="line">    cacheobj [k] =res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**3·优先从缓存中获取搜索建议**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听文本框的keyup事件</span></span><br><span class="line">$(<span class="string">&#x27;#ipt&#x27;</span>).<span class="property">on</span> (<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// …..省略其他代码</span></span><br><span class="line">    <span class="comment">//优先从缓存中获取搜索建议</span></span><br><span class="line">    <span class="keyword">if</span> (cacheopj [keywords])&#123; </span><br><span class="line">        <span class="keyword">return</span> renderSuggestList (cacheobj [keywords])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取搜索建议列表</span></span><br><span class="line">    debounceSearch (keywords)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 4.1什么是节流

**节流策略(throttle) ,顾名思义,可以减少一段时间内事件的触发频率。**

## 4.2节流的应用场景

**鼠标连续不断地触发某事件(如点击) ,只在单位时间内只触发一次;**

**懒加载时要监听计算滚动条的位置,但不必每次滑动都触发,可以降低计算的频率,而不必去浪费CPU资源;**

## 4.3节流案例-鼠标跟随效果

**1.渲染U结构并美化样式**

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--UI结构--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./assets/angel.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;angel&quot;</span> /&gt;</span></span><br><span class="line">        /*scss样式*/</span><br><span class="line">html,body&#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">	overflow: hidden;</span><br><span class="line">#angel &#123;</span><br><span class="line">position: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**2,不使用节流时实现鼠标跟随效果**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ (<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//获取图片元素</span></span><br><span class="line">    <span class="keyword">var</span> angel =$(<span class="string">&#x27;angel&#x27;</span>)</span><br><span class="line">    <span class="comment">//监听文档的mousemove事件</span></span><br><span class="line">    $ (<span class="variable language_">document</span>) .<span class="property">on</span> (<span class="string">&quot;mousemove&#x27;, function(e)&#123;</span></span><br><span class="line"><span class="string">       //设置图片的位</span></span><br><span class="line"><span class="string">    $ (angel) .css (&#x27;left&#x27;, e.pagex +&#x27;px&#x27;).css(&#x27;top&#x27;, e.pageY + &#x27;px&#x27;)&#125;)&#125;)</span></span><br></pre></td></tr></table></figure>

**3,节流阀的概念**

**高铁卫生间是否被占用,由红绿灯控制,红灯表示被点用,绿灯表示可使用。**

**假设每个人上卫生间都需要花费5分钟,则五分钟之内,被占用的卫生间无法被其他人使用。**

**上一个人使用完毕后,需要将红灯重置为绿灯,表示下一个人可以使用卫生间。**

**下一个人在上卫生间之前,需要先判断控制灯是否为绿色,来知晓能否上卫生间。**



**节流阔为空,表示可以执行下次操作;不为空,表示不能执行下次操作。**

**当前操作执行完,必须将节流阀重置为空,表示可以执行下次操作了。**

**每次执行操作前,必须先判断节流阀是否为空。**

**4,使用节流优化鼠标跟随效果**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> angel =$(<span class="string">&#x27;#angel)</span></span><br><span class="line"><span class="string">    var timer = nul1 // 1.预定义一个timer节流阀</span></span><br><span class="line"><span class="string">     $ (document) .on (&#x27;</span>mousemove, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (timer) &#123; <span class="keyword">return</span> &#125; <span class="comment">// 3.判断节流阀是否为空,如果不为空,则证明距离上次执行间隔不足16毫秒</span></span><br><span class="line">    timer=<span class="built_in">setTimeout</span> (<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        $(angel) .<span class="property">css</span> (<span class="string">&#x27;left&#x27;</span>, e.<span class="property">pagex</span> + <span class="string">&#x27;px&#x27;</span>) .<span class="property">css</span> (<span class="string">&#x27;top&#x27;</span>, e.<span class="property">pageY</span> + <span class="string">&#x27;px&#x27;</span>)</span><br><span class="line">        timer =<span class="literal">null</span> <span class="comment">//2.当设置了鼠标跟随效果后,清空timer节流阀,方便下次开启延时器&#125;, 16)</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

## 4.4总结防抖和节流的区别

**防抖:如果事件被频繁触发,防抖能保证只有最有一次触发生效!前面N多次的触发都会被忽略!**

**节流:如果事件被频繁触发,书流能够减少事件触发的频率,因此,节流是有选择性地执行一部分事件**



# HTTP协议加强

## 1.1什么是通信

**通信,就是信息的传递和交换。**

**通信三要素:**

**通信的主体**

**通信的内容**

**通信的方式**

**1,现实生活中的通信**

**案例:张三要把自己考上传智专修学院的好消息写信告诉自己的好朋友李四。**

**其中:**

**通信的主体是张三和李四;**

**通信的内容是考上传智专修学院;**

**通信的方式是写信:**

**2,互联网中的通信**

**案例:服务器把传智专修学院的简介通过响应的方式发送给客户端浏览器。**

**其中,**

**通信的主体是服务器和客户端浏览器;**

**通信的内容是传智专修学院的简介;**

**通信的方式是响应**

## 1.2什么是通信协议

**通信协议(Communication Protocol)是指通信的双方完成通信所必须遵守的规则和约定。**

**通俗的理解:通信双方采用约定好的格式来发送和接收消息,这种事先约定好的通信格式,就叫做通信协议。**



**1.现实生活中的通信协议**

**张三与李四采用写信的方式进行通信,在填写信封时,写信的双方需要遵守固定的规则。信封的填写规则就是一种通信协议。**

**2.互联网中的通信协议**

**客户端与服务器之间要实现网页内容的传输,则通信的双方必须遵守网页内容的传输协议。**

**网页内容又叫做超文本,因此网页内容的传输协议又叫做超文本传输协议(HyperText Transfer Protocol)简称HTTP协议**

## 1.3 НТТP

**1,什么是HTTP协议**

**HTTP协议即超文本传送协议(HyperText Transfer Protocol) ,它规定了客户端与服务器之间进行网页内容传输时所必须遵守的传输格式。**

**列如:**

**客户端要以HTTP协议要求的格式把数据提交到服务器**

**服务器要以HTTP协议要求的格式把内容响应给客户端**

**2.HTTP协议的交互模型**

**HTTP协议采用了请求/响应的交互模型。**

## 2.1什么是HTTP请求消息

**由于HTTP协议属于客户端浏览器和服务器之间的通信协议。因此,客户端发起的请求叫做HTTP请求,客户端发送到服务器的消息,叫做HTTP请求消息。**

**注意: HTTP请消息叫做HTTP请求报文**

## 2.2 HTTP请求消息的组成部分

**HTTP请求消息由请求行(request line) 、请求头部( header ) 、空行和请求体4个部分组成,**

**1.请求行**

**请求行由请求方式、URL和HTTP协议版本3个部分组成,他们之间使用空格隔开**

**2,请求头部**

**请求头部用来描述客户端的基本信息,从而把客户端相关的信息告知服务器。**

**比如:** 

**User-Agent用来说明当前是什么类型的浏览器;** 

**Content-Type用来描述发送到服务器的数据格式;** 

**Accept用来描述客户端能够接收什么类型的返回内容;** 

**Accept-Language用来描述客户端期望接收哪种人类语言的文本内容。**

**请求头部由多行键/值对组成,每行的键和值之间用英文的冒号分隔。**



**2,请求头部-常见的请求头字段**

**头部字段							说明**

**Host								要请求的服务器域名**

**Connection					客户端与服务器的连接方式(close或keepalive)**

**Content-Length 			用来描述请求体的大小**

**Accept							 客户端可识别的响应内容类型列表**

**User-Agent					产生请求的浏览器类型**

**Content-Type				客户端告诉服务器实际发送的教据类型**

**Accept-Encoding 		 客户端可接收的内容压缩编码形式**

**Accept-Language 		用户期望获得的自然语言的优先顺序**

**关于更多请求头字段的描述,可以查看MDN官方文档: https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers**



**3.空行**

**最后一个请求头字段的后面是一个空行,通知服务器请求头部至此结束。**

**请求消息中的空行,用来分隔请求头部与请求体。**



**4,请求体**

**请求体中存放的,是要通过POST方式提交到服务器的数据。**

**注意:只有POST请求才有请求体, GET请求没有请求体**





## 3.2 HTTP响应消息的组成部分

**HTTP响应消息由状态行、响应头部、空行和响应体4个部分组成,如下图所示:**

**1.状态行**

**状态行由HTTP协议版本、状态码和状态码的描述文本3个部分组成,他们之间使用空格隔开;**

**2,响应头部**

**响应头部用来描述服务器的基本信息,响应头部由多行键/值对组成,每行的键和值之间用英文的冒号分隔。**

**关于更多响应头字段的描述,可以查看MDN官方文档: https://developer.mozillaorg/zh-CN/docs/Web/HTTP/Headers**

**3.空行**

**在最后一个响应头部字段结束之后,会紧跟一个空行,用来通知客户端响应头部至此结束。响应消息中的空行,用来分隔响应头部与响应体**

**4.响应体**

**响应体中存放的,是服务器响应给客户端的资源内容。**



## 4.1什么是HTTP请求方法

**HTTP请求方法,属于HTTP协议中的一部分,请求方法的作用是:用来表明要对服务器上的资源执行的操作。最常用的请求方法是GET和POST**

**序号			方法					描述**

**1				 GET				查询发送请求来获得服务器上的资源,请求体中不会包含请求数据,请求数据放在协议头中,**

**2				POST			 (新增)向服务器提交资源(例如提交表单或上传文件) 。数据被包含在请求体中提交给服务器**

**3 				PUT				(修改)向服务器提交资源,并使用提交的新资源,替换掉服务器对应的旧资源。**

**4				DELETE			(删除)请求服务器删除指定的资源**

**5			    HEAD			  HEAD方法请求一个与GET请求的响应相同的响应,但没有响应体。**

**6				OPTIONS 	  获取http服务器支持的http请求方法,允许客户端查看服务器的性能,比如ajax跨域时的预检等。**

**7				CONNECT 	建立一个到由目标资源标识的服务器的隧道。**

**8			    TRACE			沿着到目标资源的路径执行一个消息环回测试,主要用于测试或诊断**

**9				 PATCH			是对PUT方法的补充,用来对已知资源进行局部更新。**





## 5.1什么是HTTP响应状态码

**HTTP响应状态码(HTTP Status Code) ,也属于HTTP协议的一部分,用来标识响应的状态。**

**响应状态码会随着响应消息一起被发送至客户端浏览器,浏览器根据服务器返回的响应状态码,就能知道这次HTTP请求的结果是成功还是失败了.**

**HTTP状态码由三个十进制数字组成,第一个十进制数字定义了状态码的类型,后两个数字用来对状态码进行细分。,** 

**HTTP状态码共分为5种类型:**

**分类			分类描述**

**1\**			 信息,服务器收到请求,需要请求者继续执行操作(实际开发中很少遇到1\**类型的状态码)**

**2\**			成功,操作被成功接收并处理**

**3\**			重定向,需要进一步的操作以完成请求**

**4\**			客户端错误,请求包含语法错误或无法完成请求**

**5\**			服务器错误,服务器在处理请求的过程中发生了错误**



**1.2成功相关的响应状态码**

**2\**范围的状态码,表示服务器已成功接收到请求并进行处理。常见的2**类型的状态码如下:**

**状态码		状态码英文名称					中文描述**

**200						OK						201Created请求成功。一般用于GET与POST请求**

**201						Created				已创建。成功请求并创建了新的资源,通常用于POST或PUT请求**



**2.3重定向相关的响应状态码**

**3范围的状态码,表示服务器要求客户端重定向,需要客户端进一步的操作以完成资源的请求。常见的3类型的状态码如下:**

**状态码		状态码英文名称					中文描述**

**301			MovedPermanently			永久移动。请求的资源已被永久的移动到新URI,返回信息会包括新的URI,浏览器会自动定向到新URI,今后任何新的请求都应使用新的URI代替**

**302			Found									临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI**

**304			Not Modified						未修改。所请求的资源未修改,服务器返回此状态码时,不会返回任何资源(响应消息中不包含响应体) 。客户端通常会缓存访问过的资源。**



**3.4\**户端错误相关的响应状态码**

**4\**范围的状态码,表示客户端的请求有非法内容,从而导致这次请求失败。常见的4类型的状态码如下:**

**状态码			状态码英文名称				中文描述**

**400					Bad Request				1、语义有误,当前请求无法被服务器理解。除非进行修改,否则客户端不应该重复提交这个请求。2、请求参数有误。**

**401					Unauthorized			当前请求需要用户验证。**

**403					Forbidden				服务器已经理解请求,但是拒绝执行它。**

**404					Not FoundRequest		服务器无法根据客户端的请求找到资源(网页)**

**408					 Timeout					请求超时。服务器等待客户端发送的请求时间过长,超时。**



**4.5*服务端错误相关的响应状态码**

**5\**范围的状态码,表示服务器未能正常处理客户端的请求而出现意外错误。常见的5类型的状态码如下:**

**状态码		状态码英文名称				中文描述**

**500			Internal ServerError		服条器内部错误,无法完成请求。**

**501			Not Implemented			服务器不支持该请求方法,无法完成请求。只有GET和HEAD请求方法是要求每个服务器必须支持的,其它请求方法在不支持的服务器上会返回501**

**503			Service Unavailable		由于超载或系统维护,服务器暂时的无法处理客户端的请求。**

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://2486125878.github.io">kk</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://2486125878.github.io/2024/03/13/ajax/">https://2486125878.github.io/2024/03/13/ajax/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Ajax/">Ajax</a></div><div class="post_share"><div class="social-share" data-image="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/13/js/" title="javascript"><img class="cover" src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">javascript</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/13/thinkphp-sql/" title="thinkphp_sql"><img class="cover" src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">thinkphp_sql</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://tse3-mm.cn.bing.net/th/id/OIP-C.v8Y5QxZNIiQVIEk3JOCC2QHaGi?rs=1&amp;pid=ImgDetMain" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">kk</div><div class="author-info__description">...</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/2486125878" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2486125878@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">1.客户端与服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">1.2服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.2.</span> <span class="toc-text">1.3客户端</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-URL%E5%9C%B0%E5%9D%80"><span class="toc-number">2.</span> <span class="toc-text">2.URL地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-URL%E5%9C%B0%E5%9D%80%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 URL地址的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-URL%E5%9C%B0%E5%9D%80%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 URL地址的组成部分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%C2%B7%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">3·客户端与服务器的通信过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E5%9B%BE%E8%A7%A3%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="toc-number">3.1.</span> <span class="toc-text">3.1图解客户端与服务器的通信过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E5%9F%BA%E4%BA%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7%E5%88%86%E6%9E%90%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="toc-number">3.2.</span> <span class="toc-text">3.2基于浏览器的开发者工具分析通信过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E4%BA%86%E5%93%AA%E4%BA%9B%E8%B5%84%E6%BA%90"><span class="toc-number">4.</span> <span class="toc-text">4.服务器对外提供了哪些资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E4%BE%8B%E4%B8%BE%E7%BD%91%E9%A1%B5%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">4.1.</span> <span class="toc-text">4.1例举网页中常见的资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E6%95%B0%E6%8D%AE%E4%B9%9F%E6%98%AF%E8%B5%84%E6%BA%90"><span class="toc-number">4.2.</span> <span class="toc-text">4.2数据也是资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%98%AF%E7%BD%91%E9%A1%B5%E7%9A%84%E7%81%B5%E9%AD%82"><span class="toc-number">4.3.</span> <span class="toc-text">数据是网页的灵魂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E7%BD%91%E9%A1%B5%E4%B8%AD%E5%A6%82%E4%BD%95%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">4.4.</span> <span class="toc-text">4.4网页中如何请求数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E8%B5%84%E6%BA%90%E7%9A%84%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="toc-number">4.5.</span> <span class="toc-text">4.5资源的请求方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BA%86%E8%A7%A3Ajax"><span class="toc-number">5.</span> <span class="toc-text">5.了解Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BB%80%E4%B9%88%E6%98%AF-Ajax"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 什么是 Ajax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6Ajax"><span class="toc-number">5.2.</span> <span class="toc-text">5.2为什么要学Ajax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-Ajax%E7%9A%84%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 Ajax的典型应用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-jQuery-%E7%9A%84Ajax"><span class="toc-number">6.</span> <span class="toc-text">6.jQuery 的Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E4%BA%86%E8%A7%A3jQuery%E4%B8%AD%E7%9A%84Ajax"><span class="toc-number">6.1.</span> <span class="toc-text">6.1了解jQuery中的Ajax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-get-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">6.2.</span> <span class="toc-text">6.2$.get()函数的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-get-%E5%8F%91%E8%B5%B7%E4%B8%8D%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">6.3.</span> <span class="toc-text">6.2 $.get()发起不带参数的请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-get-%E5%8F%91%E8%B5%B7%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">6.4.</span> <span class="toc-text">6.2 $.get()发起带参数的请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-post0%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">6.5.</span> <span class="toc-text">6.3 $.post0函数的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-post-%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">6.6.</span> <span class="toc-text">6.3 $.post()向服务器提交数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-ajax-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">6.7.</span> <span class="toc-text">6.4 $.ajax()函数的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4%E4%BD%BF%E7%94%A8-ajax-%E5%8F%91%E8%B5%B7GET%E8%AF%B7%E6%B1%82%E4%BD%BF%E7%94%A8"><span class="toc-number">6.8.</span> <span class="toc-text">6.4使用$.ajax()发起GET请求使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4%E4%BD%BF%E7%94%A8-ajax-%E5%8F%91%E8%B5%B7POST%E8%AF%B7%E6%B1%82%E4%BD%BF%E7%94%A8"><span class="toc-number">6.9.</span> <span class="toc-text">6.4使用$.ajax()发起POST请求使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.</span> <span class="toc-text">7.接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">7.1.</span> <span class="toc-text">7.1接口的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2%E5%88%86%E6%9E%90%E6%8E%A5%E5%8F%A3%E7%9A%84%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B"><span class="toc-number">7.2.</span> <span class="toc-text">7.2分析接口的请求过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7"><span class="toc-number">7.3.</span> <span class="toc-text">7.3接口测试工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5%E4%BD%BF%E7%94%A8PostMan%E6%B5%8B%E8%AF%95POST%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.4.</span> <span class="toc-text">7.5使用PostMan测试POST接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-number">7.5.</span> <span class="toc-text">7.6接口文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%A1%88%E4%BE%8B-%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86"><span class="toc-number">8.</span> <span class="toc-text">8.案例-图书管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E6%A1%88%E4%BE%8B%E7%94%A8%E5%88%B0%E7%9A%84%E5%BA%93%E5%92%8C%E6%8F%92%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">8.2案例用到的库和插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3%E6%B8%B2%E6%9F%93%E5%9B%BE%E4%B9%A6%E5%88%97%E8%A1%A8-%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81"><span class="toc-number">8.2.</span> <span class="toc-text">8.3渲染图书列表(核心代码)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-form%E8%A1%A8%E5%8D%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">9.</span> <span class="toc-text">1.form表单的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8%E5%8D%95"><span class="toc-number">9.1.</span> <span class="toc-text">1.1什么是表单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E8%A1%A8%E5%8D%95%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">9.2.</span> <span class="toc-text">1.2表单的组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E6%A0%87%E7%AD%BE%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">9.3.</span> <span class="toc-text">1.3 标签的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E8%A1%A8%E5%8D%95%E7%9A%84%E5%90%8C%E6%AD%A5%E6%8F%90%E4%BA%A4%E5%8F%8A%E7%BC%BA%E7%82%B9%E2%80%99"><span class="toc-number">9.4.</span> <span class="toc-text">1.4表单的同步提交及缺点’</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E9%80%9A%E8%BF%87Ajax%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number"></span> <span class="toc-text">2.通过Ajax提交表单数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E7%9B%91%E5%90%AC%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">2.1监听表单提交事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E9%98%BB%E6%AD%A2%E8%A1%A8%E5%8D%95%E9%BB%98%E8%AE%A4%E6%8F%90%E4%BA%A4%E8%A1%8C%E4%B8%BA"><span class="toc-number">2.</span> <span class="toc-text">2.2阻止表单默认提交行为</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E5%BF%AB%E9%80%9F%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%8D%95%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">3.</span> <span class="toc-text">2.3快速获取表单中的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">4.</span> <span class="toc-text">4,模板引擎的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E6%B8%B2%E6%9F%93U1%E7%BB%93%E6%9E%84%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E9%A2%98"><span class="toc-number">4.1.</span> <span class="toc-text">4.1渲染U1结构时遇到的问题题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">4.2.</span> <span class="toc-text">4.2什么是模板引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">4.3.</span> <span class="toc-text">4.3模板引擎的好处</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-art-template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">5.</span> <span class="toc-text">5.art-template模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-art-template%E7%AE%80%E4%BB%8B"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 art-template简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-art-template%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">5.2.</span> <span class="toc-text">5.3 art-template模板引擎的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-art-template%E6%A0%87%E5%87%86%E8%AF%AD%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">5.4 art-template标准语法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">6.模板引擎的实现原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E6%AD%A3%E5%88%99%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="toc-number">6.1.</span> <span class="toc-text">6.1正则与字符串操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E5%AE%9E%E7%8E%B0%E7%AE%80%E6%98%93%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">6.2.</span> <span class="toc-text">6.2实现简易的模板引擎</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/13/SSM/" title="SSM"><img src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSM"/></a><div class="content"><a class="title" href="/2024/03/13/SSM/" title="SSM">SSM</a><time datetime="2024-03-13T07:40:53.000Z" title="Created 2024-03-13 15:40:53">2024-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/13/JavaWeb/" title="JavaWeb"><img src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaWeb"/></a><div class="content"><a class="title" href="/2024/03/13/JavaWeb/" title="JavaWeb">JavaWeb</a><time datetime="2024-03-13T07:40:02.000Z" title="Created 2024-03-13 15:40:02">2024-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/13/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" title="数据可视化"><img src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据可视化"/></a><div class="content"><a class="title" href="/2024/03/13/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" title="数据可视化">数据可视化</a><time datetime="2024-03-13T07:19:21.000Z" title="Created 2024-03-13 15:19:21">2024-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/13/Vue/" title="Vue"><img src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue"/></a><div class="content"><a class="title" href="/2024/03/13/Vue/" title="Vue">Vue</a><time datetime="2024-03-13T07:18:25.000Z" title="Created 2024-03-13 15:18:25">2024-03-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/13/nodeJs/" title="nodeJs"><img src="https://images.pexels.com/photos/15999575/pexels-photo-15999575.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nodeJs"/></a><div class="content"><a class="title" href="/2024/03/13/nodeJs/" title="nodeJs">nodeJs</a><time datetime="2024-03-13T07:17:22.000Z" title="Created 2024-03-13 15:17:22">2024-03-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer"><div class="bubbles"><div class="bubble" style="--size:2.2570823778176274rem; --distance:6.7332556393099825rem; --position:-0.8116193177597708%; --time:2.91210659213923s; --delay:-3.4204272709904124s;"></div><div class="bubble" style="--size:4.68229456762269rem; --distance:7.996063414537007rem; --position:24.69445852381557%; --time:2.65647731594624s; --delay:-3.3435160470117475s;"></div><div class="bubble" style="--size:2.4182009198454377rem; --distance:6.7634050881052055rem; --position:64.07821293664591%; --time:3.0874343171360294s; --delay:-3.9118444614787684s;"></div><div class="bubble" style="--size:2.607267546199033rem; --distance:8.328550948621192rem; --position:24.311655346129374%; --time:3.906460081427804s; --delay:-3.004866168538113s;"></div><div class="bubble" style="--size:5.139857643129324rem; --distance:6.388590463466922rem; --position:19.451394316512065%; --time:3.285576467128715s; --delay:-2.6291660786472835s;"></div><div class="bubble" style="--size:5.0570818029957225rem; --distance:6.097518721728632rem; --position:-1.1294844249968117%; --time:2.960461249386409s; --delay:-2.0404268418099387s;"></div><div class="bubble" style="--size:2.8841835396204196rem; --distance:8.22680411343145rem; --position:96.87311757901503%; --time:3.8822852554562104s; --delay:-3.1236180236233855s;"></div><div class="bubble" style="--size:4.046872611650663rem; --distance:7.12085022510493rem; --position:56.603721600432245%; --time:2.584668757584656s; --delay:-2.765927947597476s;"></div><div class="bubble" style="--size:5.147647801179914rem; --distance:7.095447505602148rem; --position:72.45821659882151%; --time:3.521801516958942s; --delay:-2.222829440651391s;"></div><div class="bubble" style="--size:5.468068606652695rem; --distance:6.223459152943114rem; --position:41.137914589398086%; --time:2.5649848407932754s; --delay:-2.1178808623513556s;"></div><div class="bubble" style="--size:2.5430118544555684rem; --distance:8.227506464997907rem; --position:-0.9142492719185036%; --time:3.908520805909282s; --delay:-3.2331992090379584s;"></div><div class="bubble" style="--size:5.578570150918944rem; --distance:9.340786779426617rem; --position:78.96295365202586%; --time:3.613628588746002s; --delay:-3.573381368567213s;"></div><div class="bubble" style="--size:2.6117215767271693rem; --distance:9.638981354710975rem; --position:36.41285961475721%; --time:2.8486990669279457s; --delay:-2.9069422416706074s;"></div><div class="bubble" style="--size:5.782531221633367rem; --distance:6.5119155175137085rem; --position:8.987777726109487%; --time:3.400365042913931s; --delay:-3.4859862751546467s;"></div><div class="bubble" style="--size:4.361687470562192rem; --distance:7.943066279011231rem; --position:95.8255268088921%; --time:2.3500193899383617s; --delay:-2.8391882600319187s;"></div><div class="bubble" style="--size:5.236297385248433rem; --distance:9.168452469066455rem; --position:12.400418474084923%; --time:2.676670957489033s; --delay:-2.4003477821728834s;"></div><div class="bubble" style="--size:4.4706535259948295rem; --distance:9.057345119380756rem; --position:94.59268928944536%; --time:3.6931726903057203s; --delay:-2.723921153545458s;"></div><div class="bubble" style="--size:3.421195613777625rem; --distance:7.411121601844803rem; --position:95.9452737202383%; --time:3.050962975391132s; --delay:-2.521812243977023s;"></div><div class="bubble" style="--size:4.186919837675947rem; --distance:7.877305360695604rem; --position:18.789431388142113%; --time:2.0075071598887995s; --delay:-3.637526964953637s;"></div><div class="bubble" style="--size:5.967717253610133rem; --distance:9.846502233940047rem; --position:61.073679059376474%; --time:3.9399708730367196s; --delay:-2.2975550363914925s;"></div><div class="bubble" style="--size:3.2191856210262033rem; --distance:9.880528718784563rem; --position:97.14437359507512%; --time:2.7054546620967663s; --delay:-2.89722651721829s;"></div><div class="bubble" style="--size:2.5086279066258417rem; --distance:7.4174614118134246rem; --position:24.70381702354713%; --time:2.869416341994243s; --delay:-2.9461832823778176s;"></div><div class="bubble" style="--size:3.9722225226973826rem; --distance:8.444536498450553rem; --position:10.765035808087154%; --time:2.3476499512193523s; --delay:-3.1331333162007975s;"></div><div class="bubble" style="--size:3.182965738237823rem; --distance:7.711800439643212rem; --position:70.8045643079175%; --time:3.2125712100578037s; --delay:-3.781406118863681s;"></div><div class="bubble" style="--size:3.5681686912160586rem; --distance:7.507596910274809rem; --position:16.969690756279846%; --time:2.8945739584600614s; --delay:-3.2490420027205764s;"></div><div class="bubble" style="--size:3.6752717612993244rem; --distance:7.255468198206061rem; --position:62.436778786884105%; --time:2.932262834147096s; --delay:-2.0628971789576296s;"></div><div class="bubble" style="--size:4.339706381585551rem; --distance:8.427204144941324rem; --position:13.801990267119653%; --time:2.542015066335209s; --delay:-2.974871891004806s;"></div><div class="bubble" style="--size:2.2408634252094375rem; --distance:9.77182126562845rem; --position:0.7157033117403389%; --time:2.8573211595213452s; --delay:-3.9087695075550575s;"></div><div class="bubble" style="--size:2.737691266172239rem; --distance:9.223824540557525rem; --position:65.76480627138636%; --time:3.7013684987505626s; --delay:-2.2700608669819053s;"></div><div class="bubble" style="--size:4.4487206486556rem; --distance:7.195911382667777rem; --position:39.576494557120945%; --time:2.4679963745412743s; --delay:-2.2604451825770218s;"></div><div class="bubble" style="--size:2.945519675904893rem; --distance:6.636063198329252rem; --position:3.070947290131265%; --time:2.7631636521055314s; --delay:-3.970074071827242s;"></div><div class="bubble" style="--size:3.830767111265132rem; --distance:6.736094307360108rem; --position:24.796249092489443%; --time:2.3221748503602946s; --delay:-3.7522267216621628s;"></div><div class="bubble" style="--size:2.3613023132349618rem; --distance:8.203582514662287rem; --position:-2.788716742507036%; --time:2.905056472848289s; --delay:-2.6560409413816597s;"></div><div class="bubble" style="--size:3.048689073391343rem; --distance:7.927549562827557rem; --position:97.97317537867019%; --time:3.1633603573492226s; --delay:-2.721665895612267s;"></div><div class="bubble" style="--size:5.759514913289946rem; --distance:9.4237472859282rem; --position:35.65741542815051%; --time:2.0029996688330107s; --delay:-2.9510345824786386s;"></div><div class="bubble" style="--size:5.395106137851057rem; --distance:8.80110458232205rem; --position:86.3035812175756%; --time:2.6866233803856767s; --delay:-3.2673862293875473s;"></div><div class="bubble" style="--size:2.2467684635305165rem; --distance:8.542810945418958rem; --position:71.19863058228388%; --time:2.232027305623715s; --delay:-3.8690472281103725s;"></div><div class="bubble" style="--size:3.8103163267051876rem; --distance:9.337276118730458rem; --position:104.00982731864957%; --time:3.137629443525831s; --delay:-3.2918583838779565s;"></div><div class="bubble" style="--size:3.185171364104699rem; --distance:8.031074731603976rem; --position:27.06610503473248%; --time:3.081363500296858s; --delay:-2.3556496922972783s;"></div><div class="bubble" style="--size:5.493560061745379rem; --distance:8.468020170751593rem; --position:2.7195222276328597%; --time:3.684692706590465s; --delay:-2.5388141895113283s;"></div><div class="bubble" style="--size:3.9042429524455384rem; --distance:7.7346178631643445rem; --position:71.12600471635673%; --time:3.6983459063724076s; --delay:-2.2250987185149103s;"></div><div class="bubble" style="--size:5.102167612370244rem; --distance:6.087711274190959rem; --position:24.15129009816575%; --time:3.4812455138437666s; --delay:-2.7293941109166258s;"></div><div class="bubble" style="--size:5.789365802434613rem; --distance:6.473643633597357rem; --position:49.10089998328788%; --time:3.7494699000239597s; --delay:-3.0213190505370173s;"></div><div class="bubble" style="--size:5.796987381456739rem; --distance:6.355579092128788rem; --position:50.98729783218054%; --time:3.6140066032329345s; --delay:-2.101304829281995s;"></div><div class="bubble" style="--size:3.9075144388815612rem; --distance:9.277448011814835rem; --position:85.60606980393626%; --time:3.2390665090842563s; --delay:-3.1797165528555023s;"></div><div class="bubble" style="--size:2.9999033033902274rem; --distance:8.899295839370936rem; --position:92.28324568373034%; --time:2.9402125214156936s; --delay:-3.6954079300488876s;"></div><div class="bubble" style="--size:5.542156345975935rem; --distance:6.278738100833541rem; --position:89.75052840501642%; --time:2.513017070474483s; --delay:-3.7069135376524014s;"></div><div class="bubble" style="--size:5.009391954743562rem; --distance:6.6570387797629875rem; --position:102.75697910953771%; --time:3.276883471509009s; --delay:-3.7433365644638914s;"></div><div class="bubble" style="--size:5.767239833825639rem; --distance:8.194993798191787rem; --position:53.654257732896895%; --time:3.9554009425390437s; --delay:-2.5052206985441665s;"></div><div class="bubble" style="--size:5.477901169013029rem; --distance:8.597367867870785rem; --position:34.078970523356666%; --time:2.2032272580942664s; --delay:-2.577768334208086s;"></div><div class="bubble" style="--size:4.759014076353649rem; --distance:9.227098569152393rem; --position:20.11972777898173%; --time:3.598128371356024s; --delay:-2.216268998877473s;"></div><div class="bubble" style="--size:2.9970864820198786rem; --distance:8.966863441513539rem; --position:83.0713860807883%; --time:2.545658160751763s; --delay:-3.8969634732948535s;"></div><div class="bubble" style="--size:5.261698915917062rem; --distance:7.286899775591332rem; --position:45.120748975446425%; --time:2.8779176088505487s; --delay:-2.235191370245489s;"></div><div class="bubble" style="--size:5.731436492021849rem; --distance:8.43981381680748rem; --position:38.531299848554916%; --time:3.1160172146741543s; --delay:-2.0457684828917158s;"></div><div class="bubble" style="--size:3.4281219549304485rem; --distance:6.5136597126404405rem; --position:50.038945453719506%; --time:3.2089393683351264s; --delay:-2.243023639264251s;"></div><div class="bubble" style="--size:2.051792872991019rem; --distance:7.6153905301577485rem; --position:74.43754798496278%; --time:2.927258874994277s; --delay:-3.3946510524713562s;"></div><div class="bubble" style="--size:4.5361692428377065rem; --distance:9.605216485278152rem; --position:102.81313796577398%; --time:3.6022290748337458s; --delay:-2.3302166738735246s;"></div><div class="bubble" style="--size:2.51011361173453rem; --distance:8.49580220384831rem; --position:19.578897673424365%; --time:3.84246308856052s; --delay:-3.8498213869785136s;"></div><div class="bubble" style="--size:4.67908462210636rem; --distance:7.139168767905482rem; --position:91.81852831880722%; --time:3.490660689273466s; --delay:-2.8881264163112457s;"></div><div class="bubble" style="--size:3.528897134083664rem; --distance:7.624114736028042rem; --position:91.47349704727786%; --time:3.963397380097381s; --delay:-2.892942765372058s;"></div><div class="bubble" style="--size:4.0349574296820565rem; --distance:9.967911745461173rem; --position:27.248975357067373%; --time:3.7405251043047056s; --delay:-2.914821834174172s;"></div><div class="bubble" style="--size:3.837807592583469rem; --distance:6.94230472442707rem; --position:62.9570010660383%; --time:3.4490256561577857s; --delay:-3.550239295873465s;"></div><div class="bubble" style="--size:5.2708428767715265rem; --distance:9.498455898588663rem; --position:32.94612614830209%; --time:2.460183796757086s; --delay:-2.0246771289984946s;"></div><div class="bubble" style="--size:3.154912203825794rem; --distance:7.376120602369708rem; --position:32.81528374989647%; --time:2.0938930624079815s; --delay:-2.7411701780350852s;"></div><div class="bubble" style="--size:4.903680762391236rem; --distance:8.898198303702282rem; --position:99.57653221509548%; --time:3.8289159834569255s; --delay:-2.7788602065142642s;"></div><div class="bubble" style="--size:5.6826922336560335rem; --distance:9.757389769844764rem; --position:101.67163822284023%; --time:2.0757153048511023s; --delay:-3.207210640850802s;"></div><div class="bubble" style="--size:3.8251676112061155rem; --distance:9.01691302540003rem; --position:32.65528646848564%; --time:2.7485546557278333s; --delay:-3.9712755569497s;"></div><div class="bubble" style="--size:4.0625377437294725rem; --distance:8.12864825206379rem; --position:32.31700289891694%; --time:3.956673179371655s; --delay:-3.1246040196851768s;"></div><div class="bubble" style="--size:5.146582001637443rem; --distance:6.132852034586195rem; --position:6.9148199470743705%; --time:2.523003654364501s; --delay:-3.830356049359997s;"></div><div class="bubble" style="--size:3.682409173023647rem; --distance:7.413135937568703rem; --position:72.96097362288259%; --time:2.9783197810412534s; --delay:-2.5197013717401124s;"></div><div class="bubble" style="--size:4.058289878122096rem; --distance:7.9680117309113045rem; --position:87.05112068420884%; --time:3.1337524008380986s; --delay:-3.652063746304957s;"></div><div class="bubble" style="--size:5.940014239873992rem; --distance:8.20992738416335rem; --position:88.26644209723646%; --time:3.1942119120895645s; --delay:-2.3343368574212606s;"></div><div class="bubble" style="--size:3.147746554376446rem; --distance:9.411062586949175rem; --position:31.661409765813524%; --time:2.231611865317408s; --delay:-3.366826986906021s;"></div><div class="bubble" style="--size:2.4936850905181185rem; --distance:6.534645355040055rem; --position:91.70654115690269%; --time:3.7340116787678284s; --delay:-3.2239121499692165s;"></div><div class="bubble" style="--size:4.3820952645701325rem; --distance:8.158557204477564rem; --position:34.1596569491491%; --time:3.16559940968508s; --delay:-2.482014167711964s;"></div><div class="bubble" style="--size:4.585881736127624rem; --distance:8.850345221595258rem; --position:19.340931032138013%; --time:2.3457807624186007s; --delay:-3.051223175982504s;"></div><div class="bubble" style="--size:3.887854490649218rem; --distance:9.639848274526958rem; --position:90.56299968183676%; --time:2.4969697082755693s; --delay:-2.7987369371383783s;"></div><div class="bubble" style="--size:3.224205061742281rem; --distance:9.317998402274583rem; --position:31.844625384988362%; --time:3.305626428670774s; --delay:-2.5969158995662243s;"></div><div class="bubble" style="--size:2.036487059993342rem; --distance:9.134069693557159rem; --position:85.53533321674855%; --time:2.3320241424666857s; --delay:-3.664569897447427s;"></div><div class="bubble" style="--size:2.260782688621088rem; --distance:9.799228292940064rem; --position:8.906946674729088%; --time:2.9741958824782415s; --delay:-2.567649383357556s;"></div><div class="bubble" style="--size:4.082087847129288rem; --distance:7.797093747035515rem; --position:-4.623368265944762%; --time:3.521128819642712s; --delay:-2.6693958267372966s;"></div><div class="bubble" style="--size:2.67993416351327rem; --distance:8.350957575610504rem; --position:3.339090946215034%; --time:2.1453515510254735s; --delay:-2.715833509642042s;"></div><div class="bubble" style="--size:2.636099043414669rem; --distance:6.414227205497728rem; --position:25.561372082423944%; --time:2.014712181405718s; --delay:-3.7544151902454868s;"></div><div class="bubble" style="--size:2.9485210734881884rem; --distance:8.749027467945837rem; --position:9.559698911208198%; --time:2.1846295834539218s; --delay:-3.726471165888322s;"></div><div class="bubble" style="--size:2.2439974634995377rem; --distance:8.428802147636404rem; --position:20.438301035167875%; --time:2.4012071072075223s; --delay:-2.8682971962742347s;"></div><div class="bubble" style="--size:5.334166782182787rem; --distance:7.845271014361723rem; --position:0.9615558437712091%; --time:2.6237628944815197s; --delay:-3.897479937324551s;"></div><div class="bubble" style="--size:3.141626335970166rem; --distance:8.117149465832117rem; --position:79.08861708128929%; --time:3.051357927149634s; --delay:-3.5290278257728023s;"></div><div class="bubble" style="--size:2.3871175607446435rem; --distance:6.167292031962565rem; --position:49.53337868063476%; --time:3.801588672007148s; --delay:-3.76332008259395s;"></div><div class="bubble" style="--size:2.6470318702556064rem; --distance:9.38394168076334rem; --position:13.038375713117958%; --time:3.424630469825809s; --delay:-2.9183161055390636s;"></div><div class="bubble" style="--size:2.691702812135686rem; --distance:7.260219114665032rem; --position:54.20648638527359%; --time:3.797445117959925s; --delay:-2.361087622006874s;"></div><div class="bubble" style="--size:5.041642208587772rem; --distance:6.747706777010575rem; --position:37.840420167960815%; --time:3.870103034388335s; --delay:-2.42198723083097s;"></div><div class="bubble" style="--size:2.213697830109175rem; --distance:6.163861367518547rem; --position:47.881545258052206%; --time:2.43613535793737s; --delay:-3.8848218298640713s;"></div><div class="bubble" style="--size:3.814490174310091rem; --distance:7.341641338050893rem; --position:51.98189748068622%; --time:3.7911487110159214s; --delay:-2.1765865006119767s;"></div><div class="bubble" style="--size:3.622808732109611rem; --distance:7.90213205102769rem; --position:102.58573388700968%; --time:2.203900957262636s; --delay:-2.846368995074525s;"></div><div class="bubble" style="--size:3.406721505538605rem; --distance:7.930276062076465rem; --position:46.503535162466115%; --time:3.157398604267189s; --delay:-2.920078894342302s;"></div><div class="bubble" style="--size:5.329214194681714rem; --distance:6.045965019888011rem; --position:-2.1014606996902674%; --time:3.458432136926031s; --delay:-3.6956492411857793s;"></div><div class="bubble" style="--size:3.4189702150667394rem; --distance:9.29846921703756rem; --position:86.84481617547519%; --time:2.568874432201566s; --delay:-2.52785178925642s;"></div><div class="bubble" style="--size:3.21054233280137rem; --distance:6.342511227373063rem; --position:63.064369617746095%; --time:2.706828312908953s; --delay:-3.972775512015918s;"></div><div class="bubble" style="--size:4.596664430261699rem; --distance:7.341876058470264rem; --position:64.88472640326492%; --time:2.5476311905003444s; --delay:-2.3613595468841324s;"></div><div class="bubble" style="--size:3.4219594958164716rem; --distance:6.299242687226681rem; --position:55.08655121268997%; --time:3.790835020870587s; --delay:-2.392434445060879s;"></div><div class="bubble" style="--size:5.72174559754881rem; --distance:9.276404883208183rem; --position:1.7166889523391866%; --time:2.05949064488318s; --delay:-3.6355611918510315s;"></div><div class="bubble" style="--size:5.901285736659333rem; --distance:9.597212699795483rem; --position:5.887598145201764%; --time:3.7816260116022145s; --delay:-2.9718140375295214s;"></div><div class="bubble" style="--size:3.146953495334592rem; --distance:6.576497111284143rem; --position:96.45432897753345%; --time:3.7620761780495284s; --delay:-2.500015331052356s;"></div><div class="bubble" style="--size:2.741090563863537rem; --distance:7.2984033757218825rem; --position:56.90707344703229%; --time:2.4173204809219713s; --delay:-3.9077807229900845s;"></div><div class="bubble" style="--size:4.536814397227405rem; --distance:9.172031695806943rem; --position:21.13896450512155%; --time:2.5158275867046185s; --delay:-2.502380190993744s;"></div><div class="bubble" style="--size:3.9587404711009198rem; --distance:8.545274078759721rem; --position:88.20383228576293%; --time:3.3886970987516287s; --delay:-2.277086565614179s;"></div><div class="bubble" style="--size:4.213192043971287rem; --distance:8.963972127782135rem; --position:89.64306373043375%; --time:3.7298831185122103s; --delay:-2.528062379759411s;"></div><div class="bubble" style="--size:3.3176969488716255rem; --distance:6.036836187538142rem; --position:67.20027198265284%; --time:3.4821157678150167s; --delay:-2.8294216390644045s;"></div><div class="bubble" style="--size:4.911500181609308rem; --distance:6.035424147211971rem; --position:85.96148446204849%; --time:3.1434643898690413s; --delay:-3.413532723682627s;"></div><div class="bubble" style="--size:2.1867447742268453rem; --distance:8.686875859105216rem; --position:57.817619034985654%; --time:3.1058701763737115s; --delay:-3.5600247011255313s;"></div><div class="bubble" style="--size:5.154538400006145rem; --distance:6.912872411554923rem; --position:94.56402882221211%; --time:3.2941924263232973s; --delay:-3.2202243489956324s;"></div><div class="bubble" style="--size:5.764918225672778rem; --distance:9.005532586239244rem; --position:14.78197850842649%; --time:2.456774432346633s; --delay:-3.391148960621804s;"></div><div class="bubble" style="--size:4.748737885716102rem; --distance:7.454485537340512rem; --position:63.70020233253486%; --time:3.723083047638329s; --delay:-3.66445460020373s;"></div><div class="bubble" style="--size:3.7097818347115536rem; --distance:6.769448536209462rem; --position:87.18045945814254%; --time:3.6786013109588045s; --delay:-2.8209966209740815s;"></div><div class="bubble" style="--size:3.1641235152101963rem; --distance:6.441570877710279rem; --position:45.96722291825597%; --time:3.916685014534557s; --delay:-3.1486869014364984s;"></div><div class="bubble" style="--size:3.020453049007595rem; --distance:6.957999197828158rem; --position:50.45747384292398%; --time:2.965031333126456s; --delay:-3.639893333888998s;"></div><div class="bubble" style="--size:4.16450458934766rem; --distance:9.131532942906137rem; --position:67.15799431832075%; --time:2.2329550854198867s; --delay:-3.7943035062233226s;"></div><div class="bubble" style="--size:3.4988725922830515rem; --distance:9.90282691178107rem; --position:76.71537045523756%; --time:3.238416874254438s; --delay:-3.793025677242276s;"></div><div class="bubble" style="--size:3.327304452593121rem; --distance:6.428310234291648rem; --position:21.716791255624017%; --time:3.959273069680089s; --delay:-2.5900825405392998s;"></div><div class="bubble" style="--size:3.360354852622204rem; --distance:9.621697894051678rem; --position:74.91149711495211%; --time:3.1174627662584493s; --delay:-2.190546794398318s;"></div><div class="bubble" style="--size:2.6936949399525787rem; --distance:7.600016270532066rem; --position:85.16792618872597%; --time:2.3447126407448207s; --delay:-2.7831608298911568s;"></div><div class="bubble" style="--size:3.8006096987229077rem; --distance:8.854001346308554rem; --position:20.133348698452643%; --time:2.02797116274726s; --delay:-3.1821328836715463s;"></div><div class="bubble" style="--size:3.234233785837537rem; --distance:9.018026397641567rem; --position:101.78361788776866%; --time:3.531706569403664s; --delay:-2.288423560931837s;"></div><div class="bubble" style="--size:3.935215285506402rem; --distance:9.816016992613692rem; --position:62.11457115627502%; --time:3.9537185599164735s; --delay:-2.375810703468069s;"></div><div class="bubble" style="--size:5.683547082755318rem; --distance:7.4959509448992785rem; --position:32.22377626711637%; --time:2.5552130472412213s; --delay:-2.8347042756198757s;"></div><div class="bubble" style="--size:4.920127196513184rem; --distance:6.325122723315314rem; --position:96.93911419119338%; --time:3.1495979827224843s; --delay:-3.8048838610891136s;"></div><div class="bubble" style="--size:2.110278820958148rem; --distance:7.741336612924862rem; --position:11.017612598726156%; --time:2.287438019178556s; --delay:-3.043156269980976s;"></div><div class="bubble" style="--size:5.6246143704420275rem; --distance:8.236729110308584rem; --position:81.41740554651987%; --time:2.891273785550252s; --delay:-2.7776274313282414s;"></div></div><div class="content"><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>
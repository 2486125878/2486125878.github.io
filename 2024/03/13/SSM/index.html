<!DOCTYPE html><html lang="zh_CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SSM | 凯瑟兰森</title><meta name="author" content="凯瑟兰森"><meta name="copyright" content="凯瑟兰森"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1.Spring简介1.1 Spring是什么Spring是分层的Java SE&#x2F;EE应用full-stack轻量级开源框架,以loc ( Inverse Of Control :反转控制)和AOP (Aspect Oriented Programming :面向切面编程)为内核。 提供了展现层SpringMVC和持久层Spring JDBCTemplate以及业务层事务管理等众多的企业">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM">
<meta property="og:url" content="https://2486125878.github.io/2024/03/13/SSM/index.html">
<meta property="og:site_name" content="凯瑟兰森">
<meta property="og:description" content="1.Spring简介1.1 Spring是什么Spring是分层的Java SE&#x2F;EE应用full-stack轻量级开源框架,以loc ( Inverse Of Control :反转控制)和AOP (Aspect Oriented Programming :面向切面编程)为内核。 提供了展现层SpringMVC和持久层Spring JDBCTemplate以及业务层事务管理等众多的企业">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg">
<meta property="article:published_time" content="2024-03-13T07:40:53.000Z">
<meta property="article:modified_time" content="2024-03-13T08:22:50.000Z">
<meta property="article:author" content="凯瑟兰森">
<meta property="article:tag" content="JAVA">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://2486125878.github.io/2024/03/13/SSM/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SSM',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-13 16:22:50'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/header.css?1"><link rel="stylesheet" href="/css/custom.css?1"  media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="凯瑟兰森" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.v8Y5QxZNIiQVIEk3JOCC2QHaGi?rs=1&amp;pid=ImgDetMain"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>const loadingPercentage = document.getElementById("loading-percentage");
loadingPercentage.style.color = "black";
let loadingPercentageTimer = setInterval(function() {
  var progressBar = document.querySelector(".pace-progress");
  if (!progressBar) return
  var currentValue = progressBar.getAttribute("data-progress-text");
  if (currentValue !== loadingPercentage.textContent) {
    loadingPercentage.textContent = currentValue;
    if (currentValue === "100%") {
      clearInterval(loadingPercentageTimer);
    }
  }
}, 100);
const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="/css/progress_bar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.v8Y5QxZNIiQVIEk3JOCC2QHaGi?rs=1&amp;pid=ImgDetMain" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="凯瑟兰森"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/logo.png"/><span class="site-name">凯瑟兰森</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SSM</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-03-13T07:40:53.000Z" title="Created 2024-03-13 15:40:53">2024-03-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-03-13T08:22:50.000Z" title="Updated 2024-03-13 16:22:50">2024-03-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SSM"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"></svg><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-Spring简介"><a href="#1-Spring简介" class="headerlink" title="1.Spring简介"></a>1.Spring简介</h1><h2 id="1-1-Spring是什么"><a href="#1-1-Spring是什么" class="headerlink" title="1.1 Spring是什么"></a>1.1 Spring是什么</h2><p><strong>Spring是分层的Java SE&#x2F;EE应用full-stack轻量级开源框架,以loc ( Inverse Of Control :反转控制)和AOP (Aspect Oriented Programming :面向切面编程)为内核。</strong></p>
<p><strong>提供了展现层SpringMVC和持久层Spring JDBCTemplate以及业务层事务管理等众多的企业级应用技术还能整合开源世界众多著名的第三方框架和类库,逐渐成为使用最多的JavaEE企业应用开源框架。</strong></p>
<h2 id="1-2-Spring发展历程"><a href="#1-2-Spring发展历程" class="headerlink" title="1.2 Spring发展历程"></a>1.2 Spring发展历程</h2><p><strong>1997年, IBM提出了EjB的思想</strong></p>
<p><strong>1998年, SUN制定开发标准规范EjB1.0</strong></p>
<p><strong>1999年, EJB1.1发布</strong></p>
<p><strong>2001年, EJB2.0发布</strong></p>
<p><strong>2003年, EJB2.1发布</strong></p>
<p><strong>2006年, EJB3.0发布</strong></p>
<p><strong>Rod Johnson (Spring之父)Expert One-to-One J2EE Design and Development(2002)阐述yJ2EE使用EJB开发设计的优点及解决方案</strong></p>
<p><strong>Expert One-to-One J2EE Development without EJB(2004)阐述了J2EE开发不使用EJB的解决方式(Spring雏形)</strong></p>
<p><strong>2017年9月份发布了Spring的最新版本Spring5.0通用版(GA)</strong></p>
<h2 id="1-3-Spring的优势"><a href="#1-3-Spring的优势" class="headerlink" title="1.3 Spring的优势"></a>1.3 Spring的优势</h2><h3 id="1-方便解耦-简化开发"><a href="#1-方便解耦-简化开发" class="headerlink" title="1)方便解耦,简化开发"></a><strong>1</strong>)方便解耦,简化开发</h3><p><strong>Spring提供的loC容器,可以将对象间的依赖关系交由Spring进行控制,避免硬编码所造成的过度耦合。用户也不必再为单例模式类、属性文件解析等这些很底层的需求编写代码,可以更专注于上层的应用。</strong></p>
<h3 id="2-AOP编程的支持"><a href="#2-AOP编程的支持" class="headerlink" title="2) AOP编程的支持"></a>2) AOP编程的支持</h3><p><strong>通过Spring的AOP功能,方便进行面向切面编程,许多不容易用传统OOP实现的功能可以通过AOP轻松实现。</strong></p>
<h3 id="3-声明式事务的支持"><a href="#3-声明式事务的支持" class="headerlink" title="3)声明式事务的支持"></a>3)声明式事务的支持</h3><p><strong>可以将我们从单调烦闷的事务管理代码中解脱出来,通过声明式方式灵活的进行事务管理,提高开发效率和质量。</strong></p>
<h2 id="4-方便程序的测试"><a href="#4-方便程序的测试" class="headerlink" title="4)方便程序的测试"></a>4)方便程序的测试</h2><p><strong>可以用非容器依赖的编程方式进行几乎所有的测试工作,测试不再是昂贵的操作,而是随手可做的事情。</strong></p>
<h3 id="5-方便集成各种优秀框架"><a href="#5-方便集成各种优秀框架" class="headerlink" title="5)方便集成各种优秀框架"></a><strong>5)方便集成各种优秀框架</strong></h3><p><strong>Spring对各种优秀框架(Struts, Hibernate, Hessian、 Quart等)的支持。</strong></p>
<h3 id="6-降低JavaEE-API的使用难度"><a href="#6-降低JavaEE-API的使用难度" class="headerlink" title="6)降低JavaEE API的使用难度"></a>6)降低JavaEE API的使用难度</h3><p><strong>Spring对JavaEE API (如JDBC、 JavaMail、远程调用等)进行了薄薄的封装层,使这些API的使用难度大为降低。</strong></p>
<h3 id="7-Java源码是经典学习范例"><a href="#7-Java源码是经典学习范例" class="headerlink" title="7.Java源码是经典学习范例"></a>7.Java源码是经典学习范例</h3><p><strong>Spring的源代码设计精妙、结构清晰、匠心独用,处处体现着大师对Java设计模式灵活运用以及对Java技术的高深造诣。它的源代码无意是Java技术的最佳实践的范例。</strong></p>
<h2 id="1-4-Spring的体系结构"><a href="#1-4-Spring的体系结构" class="headerlink" title="1.4 Spring的体系结构"></a>1.4 Spring的体系结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\24861\Desktop\spring.JPG" alt="spring"></p>
<h1 id="2-Spring快速入门"><a href="#2-Spring快速入门" class="headerlink" title="2.Spring快速入门"></a>2.Spring快速入门</h1><h2 id="2-1-Spring程序开发步骤"><a href="#2-1-Spring程序开发步骤" class="headerlink" title="2.1 Spring程序开发步骤"></a>2.1 Spring程序开发步骤</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\24861\Desktop\spring2.JPG" alt="spring2"></p>
<p><strong>导入Spring开发的基本包坐标</strong></p>
<p><strong>编写Dao接口和实现类</strong></p>
<p><strong>创建Spring核心配置文件</strong></p>
<p><strong>在Spring配置文件中配置UserDaolmpl</strong></p>
<p><strong>使用Spring的API获得Bean实例</strong></p>
<h3 id="Spring的开发步骤"><a href="#Spring的开发步骤" class="headerlink" title="Spring的开发步骤"></a>Spring的开发步骤</h3><p><strong>@导入坐标</strong></p>
<p><strong>②创建Bean</strong></p>
<p><strong>③创建applicationContext.xml在配置文件中进行配置</strong></p>
<p><strong>⑤创建ApplicationContext对象getBean</strong></p>
<h1 id="3-Spring配置文件"><a href="#3-Spring配置文件" class="headerlink" title="3.Spring配置文件"></a>3.Spring配置文件</h1><h2 id="3-1-Bean标签基本配置"><a href="#3-1-Bean标签基本配置" class="headerlink" title="3.1 Bean标签基本配置"></a>3.1 Bean标签基本配置</h2><p><strong>用于配置对象交由Spring来创建。</strong></p>
<p><strong>默认情况下它调用的是类中的无参构,函散,如果没有无参构造函数则不能创建成功。</strong></p>
<p><strong>基本属性</strong></p>
<p><strong>id: Bean实例在Spring器中的唯一标识</strong></p>
<p><strong>class: Bean的全限定名称</strong></p>
<h2 id="3-2-Bean标签范围配置"><a href="#3-2-Bean标签范围配置" class="headerlink" title="3.2 Bean标签范围配置"></a>3.2 Bean标签范围配置</h2><p><strong>scope:指对象的作用范围,取值如下:</strong></p>
<p><strong>取值范围					说明</strong></p>
<p><strong>singleton					默认值,单例的</strong></p>
<p><strong>prototype					多例的</strong></p>
<p><strong>request						WEB项目中, Spring创建一个Bean的对象,将对象存入到request域中</strong></p>
<p><strong>session						WEB项目中, Spring创建一个Bean的对象,将对象存入到session域中</strong></p>
<p><strong>global session			WEB项目中,应用在Portlet环境,如果没有Portlet环境那么globalSession相当于session</strong></p>
<p><strong>1)当scope的取值为singleton时</strong></p>
<p><strong>Bean的实例化个数: 1个</strong></p>
<p><strong>Bean的实例化时机:当Spring核心文件被加时,实例化配置的Bean实例</strong></p>
<p><strong>Bean的生命周期:</strong></p>
<p>​		<strong>对象创建:当应用加载,创建容器时,对象就被创建了</strong></p>
<p>​		<strong>对象运行：只要容器在,对象一直活着</strong></p>
<p>​		<strong>对象销毁:当应用卸载,销毁容器时,对象就被销毁了</strong></p>
<p><strong>2)当scope的取值为prototype时</strong></p>
<p><strong>Bean的实例化个数:多</strong></p>
<p><strong>Bean的实例化时机:当调用getBean0方法时实例化Bean</strong></p>
<p>​		<strong>对象创建:当使用对象时,创建新的对象实例</strong></p>
<p>​		<strong>对象运行:只要对象在使用中,就一直活着</strong></p>
<p>​		<strong>对象销毁:当对象长时间不用时,被Java的垃圾回收器回收了</strong></p>
<h2 id="3-3-Bean生命周期配置"><a href="#3-3-Bean生命周期配置" class="headerlink" title="3.3 Bean生命周期配置"></a>3.3 Bean生命周期配置</h2><p><strong>init-method:指定类中的初始化方法名称</strong></p>
<p><strong>destroy-method:指定类中销毁方法名称</strong></p>
<h2 id="3-4-Bean实例化三种方式"><a href="#3-4-Bean实例化三种方式" class="headerlink" title="3.4 Bean实例化三种方式"></a>3.4 Bean实例化三种方式</h2><p><strong>无参构造方法实例化</strong></p>
<p><strong>工厂静态方法实例化</strong></p>
<p><strong>工厂实例方法实例化</strong></p>
<h2 id="3-6-Bean的依赖注入分析"><a href="#3-6-Bean的依赖注入分析" class="headerlink" title="3.6 Bean的依赖注入分析"></a>3.6 Bean的依赖注入分析</h2><p><strong>目前UserService实例和UserDao实例都存在与Spring容器中,当前的做法是在容器外部获得UserService实例和UserDao实例,然后在程序中进行结合。</strong></p>
<p><strong>因为UserService和UserDao都在Spring容器中,而最终程序直接使用的是UserService,所以可以在Spring容器中,将UserDao设置到UserService内部。</strong></p>
<h2 id="3-7-Bean的依赖注入概念"><a href="#3-7-Bean的依赖注入概念" class="headerlink" title="3.7 Bean的依赖注入概念"></a>3.7 Bean的依赖注入概念</h2><p><strong>依赖注入(Dependency Injection) :它是Spring框架核心lOC的具体实现。</strong></p>
<p><strong>在编写程序时,通过控制反转,把对象的创建交给了Spring,但是代码中不可能出现没有依赖的情况。</strong></p>
<p><strong>lOC解耦只是降低他们的依赖关系,但不会消除。例如:业务层仍会调用持久层的方法。</strong></p>
<p><strong>那这种业务层和持久层的依赖关系,在使用Spring之后,就让Spring来维护了简单的说,就是坐等框架把持久层对象传入业务层,而不用我们自己去获取。</strong></p>
<h2 id="3-7-Bean的依赖注入方式"><a href="#3-7-Bean的依赖注入方式" class="headerlink" title="3.7 Bean的依赖注入方式"></a>3.7 Bean的依赖注入方式</h2><p><strong>怎么将UserDao怎样注入到Userservice内部呢?</strong></p>
<p><strong>构造方法</strong></p>
<p><strong>set方法</strong></p>
<h2 id="3-7-Bean的依赖注入方式-1"><a href="#3-7-Bean的依赖注入方式-1" class="headerlink" title="3.7 Bean的依赖注入方式"></a>3.7 Bean的依赖注入方式</h2><p><strong>1.set方法注入</strong></p>
<p><strong>p命名空间注入本质也是set方法注入,但比起上述的set方法注入更加防便,主要体现在配置文件中,如下:首先,需要引入P命名空间:</strong></p>
<p><strong>xmlns:p&#x3D;”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/p">http://www.springframework.org/schema/p</a></strong></p>
<p><strong>其次,需要修改注入方式</strong></p>
<bean id="userService" class="com.itheima.service.impl.UserService Impl" p: userDao-ref="userDao"/>

<h2 id="3-8-Bean的依赖注入的数据类型"><a href="#3-8-Bean的依赖注入的数据类型" class="headerlink" title="3.8 Bean的依赖注入的数据类型"></a>3.8 Bean的依赖注入的数据类型</h2><p><strong>上面的操作,都是注入的引用Bean,除了对象的引用可以注入,普通数据类型,集合等都可以在容器中进行注入</strong></p>
<p><strong>注入数据的三种数据类型</strong></p>
<p><strong>普通数据类型</strong></p>
<p><strong>引用数据类型</strong></p>
<p><strong>集合数据类型</strong></p>
<h2 id="3-9引入其他配置文件-分模块开发"><a href="#3-9引入其他配置文件-分模块开发" class="headerlink" title="3.9引入其他配置文件(分模块开发)"></a>3.9引入其他配置文件(分模块开发)</h2><p><strong>实际开发中, Spring的配置内容非常多,这就导致Spring配置很繁杂目体积很大,所以,可以将部分配置拆解到其他配置文件中,而在Spring主配置文件通过import标签进行加载</strong></p>
<import resource="applicationContext-xxx.xml"/>

<h2 id="3-6知识要点"><a href="#3-6知识要点" class="headerlink" title="3.6知识要点"></a>3.6知识要点</h2><p><strong>Spring的重点配置</strong></p>
<p><strong><bean>标签</strong></p>
<p><strong>id属性:在容器中Bean实例的唯一标识,不允许重复</strong></p>
<p><strong>class属性:要实例化的Bean的全限定名</strong></p>
<p><strong>scope属性:Bean的作用范围,常用是singleton (默认)和prototype</strong></p>
<p><strong><property>标签:属性注入</strong></p>
<p><strong>name属性:属性名称</strong></p>
<p><strong>value属性:注入的普通属性值</strong></p>
<p><strong>ref属性:注入的对象引用值</strong></p>
<p><strong><list>标签</strong></p>
<p><strong>1.<map>标签</strong></p>
<p><strong><properties>标签</strong></p>
<p><strong><constructor-arg>标签</strong></p>
<p><strong><import>标签:导入其他的Spring的分文件</strong></p>
<h1 id="4-Spring相API"><a href="#4-Spring相API" class="headerlink" title="4.Spring相API"></a>4.Spring相API</h1><h2 id="4-1-ApplicationContext继承体系"><a href="#4-1-ApplicationContext继承体系" class="headerlink" title="4.1 ApplicationContext继承体系"></a>4.1 ApplicationContext继承体系</h2><p><strong>applicationContext:接口类型,代表应用上下文,可以通过其实例获得Spring容器中的Bean对象</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\24861\Desktop\11.JPG" alt="11"></p>
<h2 id="4-2-ApplicationContext的实现类"><a href="#4-2-ApplicationContext的实现类" class="headerlink" title="4.2 ApplicationContext的实现类"></a>4.2 ApplicationContext的实现类</h2><p><strong>ClassPathXmlApplicationContext</strong></p>
<p><strong>它是从类的根路径下加载配置文件推荐使用这种</strong></p>
<p> <strong>FileSystemXmlApplicationContext</strong></p>
<p><strong>它是从磁盘路径上加载配置文件,配置文件可以在磁盘的任意位置。</strong></p>
<p><strong>AnnotationConfigApplicationContext</strong></p>
<p><strong>当使用注解配置容器对象时,需要使用此类来创健spring容器。它用来读取注解。</strong></p>
<h2 id="4-3-getBean-方法使用"><a href="#4-3-getBean-方法使用" class="headerlink" title="4.3 getBean()方法使用"></a>4.3 getBean()方法使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">获取id形式</span><br><span class="line"><span class="keyword">public</span> object <span class="title function_">getBean</span><span class="params">(string name)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">    assertBeanEactorvactive ();</span><br><span class="line">    <span class="keyword">return</span> getBeanFactory().getBean(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; T <span class="title function_">getBean</span><span class="params">(Class&lt;T&gt; requiredType)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">    assertBeanFactorvActive();</span><br><span class="line">    <span class="keyword">return</span> getBeanFactory().getBean (requiredType);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>其中,当参数的数据类型是字符串时,表示根据Bean的id从容器中获得Bean实例,返回是Object,需要强转。当参数的数据类型是Class类型时,表示根据类型从容器中匹配Bean实例,当容器中相同类型的Bean有多个时则此方法会报错。</strong></p>
<h2 id="4-4知识要点"><a href="#4-4知识要点" class="headerlink" title="4.4知识要点"></a>4.4知识要点</h2><h3 id="Spring的重点API"><a href="#Spring的重点API" class="headerlink" title="Spring的重点API"></a>Spring的重点API</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">classpathxmlApplicationContext</span> (<span class="string">&quot;xml文件&quot;</span>)</span><br><span class="line">    app.getBean (<span class="string">&quot;id&quot;</span>)</span><br><span class="line">    app.getBean (Class)</span><br></pre></td></tr></table></figure>



<h1 id="1-Spring配置数据源"><a href="#1-Spring配置数据源" class="headerlink" title="1.Spring配置数据源"></a>1.Spring配置数据源</h1><h2 id="1-1数据源-连接池-的作用"><a href="#1-1数据源-连接池-的作用" class="headerlink" title="1.1数据源(连接池)的作用"></a>1.1数据源(连接池)的作用</h2><p><strong>数据源(连接池)是提高程序性能如出现的</strong></p>
<p><strong>事先实例化数据源,初始化部分连接资源</strong></p>
<p><strong>使用连接资源时从数据源中获取</strong></p>
<p><strong>使用完毕后将连接资源还给数据源</strong></p>
<p><strong>常见的数据源(连接池): DBCP, C3P0, BoneCP, Druid等</strong></p>
<h2 id="1-1数据源的开发步骤"><a href="#1-1数据源的开发步骤" class="headerlink" title="1.1数据源的开发步骤"></a>1.1数据源的开发步骤</h2><p><strong>导入数据源的坐标和数据库驱动坐标</strong></p>
<p><strong>创建数据源对象</strong></p>
<p><strong>设置数据源的基本连接数据</strong></p>
<p><strong>使用数据源获取连接资源和归还连接资源</strong></p>
<h2 id="1-2数据源的手动创建"><a href="#1-2数据源的手动创建" class="headerlink" title="1.2数据源的手动创建"></a>1.2数据源的手动创建</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSouceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//测试手动创建c3p0数据源(加载properties配置文件)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">//读取配置文件</span></span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">rb</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line">        String driver= rb.getString(<span class="string">&quot;jdbc.driver&quot;</span>);</span><br><span class="line">        String url=rb.getString(<span class="string">&quot;jdbc.url&quot;</span>);</span><br><span class="line">        String username=rb.getString(<span class="string">&quot;jdbc.username&quot;</span>);</span><br><span class="line">        String password= rb.getString(<span class="string">&quot;jdbc.password&quot;</span>);</span><br><span class="line">    <span class="comment">//创建数据源对象</span></span><br><span class="line">        ComboPooledDataSource dataSource=<span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line">        dataSource.setDriverClass(driver);</span><br><span class="line">        dataSource.setJdbcUrl(url);</span><br><span class="line">        dataSource.setUser(username);</span><br><span class="line">        dataSource.setPassword(password);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//测试手动创建druid数据源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        DruidDataSource dataSource=<span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="type">DruidPooledConnection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//测试手动创建c3p0数据源</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> PropertyVetoException, SQLException &#123;</span><br><span class="line">        ComboPooledDataSource dataSource=<span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line">        dataSource.setDriverClass(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setJdbcUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>);</span><br><span class="line">        dataSource.setUser(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        Connection connection=dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:<span class="comment">//localhost:3306/db1</span></span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=<span class="number">123456</span></span><br></pre></td></tr></table></figure>



<h2 id="1-3-Spring配置数据源"><a href="#1-3-Spring配置数据源" class="headerlink" title="1.3 Spring配置数据源"></a>1.3 Spring配置数据源</h2><p><strong>可以将DataSource的创建权交由Spring容器去完成</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSouceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//测试spring容器去产生数据源对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        ApplicationContext app=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContent.xml&quot;</span>);</span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> app.getBean(DataSource.class);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSouce&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-4抽取jdbc配置文件"><a href="#1-4抽取jdbc配置文件" class="headerlink" title="1.4抽取jdbc配置文件"></a>1.4抽取jdbc配置文件</h2><p><strong>applicationContext.xml加载jdbc.properties配置文件获得连接信息。</strong></p>
<p><strong>首先,需要引入context命名空间和约束路径:</strong></p>
<p><strong>命名空间:</strong> </p>
<p><strong>xmlns:context&#x3D;”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>“</strong></p>
<p><strong>约束路径:</strong> </p>
<p><strong><a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></strong></p>
<p><strong><a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath: jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource &quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">names</span>&quot;<span class="attr">jdbaUrl</span>&quot; <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdba.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-5知识要点"><a href="#1-5知识要点" class="headerlink" title="1.5知识要点"></a>1.5知识要点</h2><p><strong>Spring容器加载properties文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;xx.properties&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;key&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="2-Spring注解开发"><a href="#2-Spring注解开发" class="headerlink" title="2.Spring注解开发"></a>2.Spring注解开发</h1><h2 id="2-1-Spring原始注解"><a href="#2-1-Spring原始注解" class="headerlink" title="2.1 Spring原始注解"></a>2.1 Spring原始注解</h2><p><strong>Spring是轻代码而重配置的框架,配置比较繁重,影响开发效率,所以注解开发是一种趋势,注解代替xml配置文件可以简化配置,提高开发效率。</strong></p>
<p><strong>Spring原始注解主要是替代<Bean>的配置</strong></p>
<p><strong>注解												说明</strong></p>
<p><strong>@Component				使用在类上用于实例化Bean</strong></p>
<p><strong>@Controller					使用在web层类上用于实例化Bean</strong></p>
<p><strong>@Service						使用在service层类上用于实例化Bean</strong></p>
<p><strong>@Repository				使用在dao层类上用于实例化Bean</strong></p>
<p><strong>@Autowired				使用在字段上用于根据类型依赖注入</strong></p>
<p><strong>@Qualifier					结合@Autowired一起使用用于根据名称进行依赖注入</strong></p>
<p><strong>@Resource				相当于@Autowired+@Qualifier,按照名称进行注入</strong></p>
<p> <strong>@Value						注入普通属性</strong></p>
<p><strong>@Scope						标注Bean的作用范围</strong></p>
<p><strong>@PostConstruct		使用在方法上标注该方法是Bean的初始化方法</strong></p>
<p><strong>@PreDestroy				使用在方法上标注该方法是Bean的销毁方法</strong></p>
<p><strong>注意:使用注解进行开发时,需要在applicationContext.xml中配置组件扫描,作用是指定哪个包及其子包下的Bean需要进行扫描以便识别使用注解配置的类、字段和方法。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注解的组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="2-Spring注解开发-1"><a href="#2-Spring注解开发-1" class="headerlink" title="2.Spring注解开发"></a>2.Spring注解开发</h1><h2 id="2-2-Spring新注解"><a href="#2-2-Spring新注解" class="headerlink" title="2.2 Spring新注解"></a>2.2 Spring新注解</h2><p><strong>使用上面的注解还不能全部替代xml配置文件,还需要使用注解替代的配置如下:</strong></p>
<p><strong>非自定义的Bean的配置:<bean></strong></p>
<p><strong>加载properties文件的配置:<a href="context:property-placeholder">context:property-placeholder</a></strong></p>
<p>**组件扫描的配置: <a href="context:component-scan**">context:component-scan**</a></p>
<p><strong>引入其他文件: <import></strong></p>
<p>​		<strong>注解													说明</strong></p>
<p><strong>@Configuration			用于指定当前类是一个Spring配置类,当创建容器时会从该类上加载注解</strong></p>
<p><strong>@ComponentScan		用于指定Spring在初始化容器时要扫描的包。</strong></p>
<p>​											<strong>作用和在Spring的xml配置文件中的</strong></p>
<p>​										<strong>&lt;context:component-scan base-package&#x3D;”com.itheima’&#x2F;&gt;一样</strong></p>
<p><strong>@Bean								使用在方法上,标注将该方法的返回值存储到Spring容器中</strong></p>
<p><strong>@PropertySource			用于加载.properties文件中的配置</strong></p>
<p><strong>@lmport							用于导入其他配置类</strong></p>
<h1 id="3-Spring集成Junit"><a href="#3-Spring集成Junit" class="headerlink" title="3.Spring集成Junit"></a>3.Spring集成Junit</h1><h2 id="3-1原始Junit测试Spring的问题"><a href="#3-1原始Junit测试Spring的问题" class="headerlink" title="3.1原始Junit测试Spring的问题"></a>3.1原始Junit测试Spring的问题</h2><p><strong>在测试类中,每个测试方法都有以下两行代码:</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext app=<span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> app.getBean(<span class="string">&quot;accountService&quot;</span>,IAccountService.class);</span><br></pre></td></tr></table></figure>

<p><strong>这两行代码的作用是获取容器,如果不写的话,直接会提示空指针异常。所以又不能轻易删掉</strong></p>
<h2 id="3-2上述问题解决思路"><a href="#3-2上述问题解决思路" class="headerlink" title="3.2上述问题解决思路"></a>3.2上述问题解决思路</h2><p><strong>让SpringJunit负责创建Spring容器,但是需要将配置文件的名称告诉它</strong></p>
<p><strong>将需要进行测试Bean直接在测试类中进行注入</strong></p>
<h2 id="3-3-Spring集成Junit步骤"><a href="#3-3-Spring集成Junit步骤" class="headerlink" title="3.3 Spring集成Junit步骤"></a>3.3 Spring集成Junit步骤</h2><p><strong>导入spring集成Junit的坐标</strong></p>
<p><strong>使用@Runwith注解替换原来的运行期</strong></p>
<p><strong>使用@ContextConfiguration指定配置文件或配置类</strong></p>
<p><strong>使用@Autowired注入需要测试的对象</strong></p>
<p><strong>创建测试方法进行测试</strong> </p>
<h1 id="1-Spring集成web环境"><a href="#1-Spring集成web环境" class="headerlink" title="1.Spring集成web环境"></a>1.Spring集成web环境</h1><h2 id="1-1-ApplicationContext应用上下文获取方式"><a href="#1-1-ApplicationContext应用上下文获取方式" class="headerlink" title="1.1 ApplicationContext应用上下文获取方式"></a>1.1 ApplicationContext应用上下文获取方式</h2><p><strong>应用上下文对象是通过new ClasspathXmlApplicationContext(spring配置文件)方式获取的,但是每次从容器中获得Bean时都要编写new ClasspathXmlApplicationContext(spring配置文件),这样的弊端是配置文件加载多次,应用上下文对象创建多次。</strong></p>
<p><strong>在Web项目中,可以使用ServletContextListener监听Web应用的启动,我们可以在Web应用启动时,就加载Spring的配置文件,创建应用上下文对象ApplicationContext,在将其存储到最大的域servletContexttd中,这样就可以在任意位置从域中获得应用上下文ApplicationContext对象了。</strong></p>
<h2 id="1-2-Spring提供获取应用上下文的工具"><a href="#1-2-Spring提供获取应用上下文的工具" class="headerlink" title="1.2 Spring提供获取应用上下文的工具"></a>1.2 Spring提供获取应用上下文的工具</h2><p><strong>上面的分析不用手动实现, Spring提供了一个监听器ContextLoaderListener就是对上述功能的封装,该监听器内部加载Spring配置文件,创建应用上下文对象,并存储到ServletContext域中,提供了一个客户端工具WebApplicationContextUtils供使用者获得应用上下文对象。</strong> </p>
<p><strong>所以我们需要做的只有两件事:</strong></p>
<p><strong>① 在web.xml中配置ContextLoaderListener监听器(导入spring-web坐标)</strong></p>
<p><strong>② 使用WebApplicationContextUtils获应用上下文对象ApplicationContext</strong></p>
<h2 id="1-3导入Spring集成web的坐标"><a href="#1-3导入Spring集成web的坐标" class="headerlink" title="1.3导入Spring集成web的坐标"></a>1.3导入Spring集成web的坐标</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependenoy</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h2 id="1-4-配置ContextLoaderListener监听器"><a href="#1-4-配置ContextLoaderListener监听器" class="headerlink" title="1.4 配置ContextLoaderListener监听器"></a>1.4 配置ContextLoaderListener监听器</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--全局参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationcontext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Spring的监听器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></span><br><span class="line">        org. springframework.web.context.Context LoaderListener</span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-5通过工具获得应用上下文对象"><a href="#1-5通过工具获得应用上下文对象" class="headerlink" title="1.5通过工具获得应用上下文对象"></a>1.5通过工具获得应用上下文对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span>webapplicationcontextutils.getwebApplicationContext(servletcontext);</span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> applicationContext.getBean (<span class="string">&quot;id&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="1-5知识要点-1"><a href="#1-5知识要点-1" class="headerlink" title="1.5知识要点"></a>1.5知识要点</h2><p><strong>Spring集成web环境步骤</strong></p>
<p><strong>①配置GontextLoaderListener监听器</strong></p>
<p><strong>②使用WebApplicationContextUtils获得应用上下文</strong></p>
<h1 id="2-SpringMVC-简介"><a href="#2-SpringMVC-简介" class="headerlink" title="2.SpringMVC 简介"></a>2.SpringMVC 简介</h1><h2 id="2-1-SpringMVC概述"><a href="#2-1-SpringMVC概述" class="headerlink" title="2.1 SpringMVC概述"></a>2.1 SpringMVC概述</h2><p><strong>SpringMVC是一种基于Java的实现MVC设计模型的请求驱动类型的轻量级Web框架,属于SpringFrameWork的后续产品,已经融合在Spring Web Flow中。</strong></p>
<p><strong>模型-视图-控制</strong></p>
<p><strong>SpringMVC已经成为目前最主流的MVC框架之一,并且随着Spring3.0的发布,全面超越Struts2,成为最优秀的MVC框架。它通过一套注解,让一个简单的Java类成为处理请求的控制器,而无须实现任何接口。同时它还支持RESTful编程风格的请求。</strong></p>
<h2 id="2-3-SpringMVC快速入门"><a href="#2-3-SpringMVC快速入门" class="headerlink" title="2.3 SpringMVC快速入门"></a>2.3 SpringMVC快速入门</h2><p><strong>需求:客户端发起请求,服务器端接收请求,执行逻辑并进行视图跳转。</strong></p>
<p><strong>开发步骤:</strong></p>
<p><strong>①导入SpringMVC相关坐标</strong></p>
<p><strong>② 配置SpringMVC核心控制器DispathcerServlet</strong></p>
<p><strong>3.创建Controller类和视图页面</strong></p>
<p><strong>4.使用注解配置Controller类中业务方法的映射地址</strong></p>
<p><strong>5.配置SpringMVC核心文件spring-mvc.xml</strong></p>
<p><strong>6.客户端发起请求测试</strong></p>
<h1 id="3-SpringMVC-组件解析"><a href="#3-SpringMVC-组件解析" class="headerlink" title="3.SpringMVC 组件解析"></a>3.SpringMVC 组件解析</h1><h2 id="3-1-SpringMVC的执行流程"><a href="#3-1-SpringMVC的执行流程" class="headerlink" title="3.1 SpringMVC的执行流程"></a>3.1 SpringMVC的执行流程</h2><p><strong>①用户发送请求至前端控制器DispatcherServlet,</strong></p>
<p><strong>② DispatcherServlet收到请求调用HandlerMapping处理器映射器。</strong> </p>
<p><strong>③处理器映射器找到具体的处理器(可以根据xml配置、注解进行查找),生成处理器对象及处理器拦截器(如果有则生成)一并返回给DispatcherServlet,</strong></p>
<p><strong>4.DispatcherServlet调用HandlerAdapter处理器适配器。</strong></p>
<p><strong>5.HandlerAdapter经过适配调用具体的处理器(Controller, 也叫后端控制器)。</strong></p>
<p><strong>6 Controller执行完成返回ModelAndView.</strong></p>
<p><strong>7.HandlerAdaptercontroller执行结果ModelAndView返回给DispatcherServlet.</strong></p>
<p><strong>8.DispatcherServletModelAndView传给ViewReslover视图解析器。</strong></p>
<p><strong>9.ViewReslover解析后返回具体View.</strong></p>
<p><strong>10.DispatcherServlet根据View进行演染视图(即将模型数据填充至视图中) .DispatcherServlet响应用户。</strong></p>
<h2 id="3-3-SpringMVC注解解析"><a href="#3-3-SpringMVC注解解析" class="headerlink" title="3.3 SpringMVC注解解析"></a>3.3 SpringMVC注解解析</h2><p><strong>@RequestMapping</strong></p>
<p><strong>作用:用于建立请求URL和处理请求方法之间的对应关系</strong></p>
<p><strong>位置:.</strong></p>
<p><strong>类上,请求URL的第一级访问目录。此处不写的话,就相当于应用的根目录.</strong></p>
<p><strong>方法上,请求URL的第二级访问目录,与类上的使用@ReqquestMapping标注的一级目录一起组成访问虚拟路径属性:</strong></p>
<p><strong>.value:用于指定请求的URL.它和path属性的作用是一样的</strong></p>
<p><strong>.method:用于指定请求的方式</strong></p>
<p><strong>.params:用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的key和(value必须和配置的一模一样</strong></p>
<p><strong>params &#x3D; [“accountName”), 表示请求参数必须有accountName</strong></p>
<p><strong>params &#x3D; [“moeny!100”), 表示请求参数中money不能是100</strong></p>
<p><strong>1.mvc命名空间引入</strong></p>
<p><strong>命名空:xmlns: context&#x3D;”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context%22xmlns:mvc=%22http://www.springframework.org/schema/mvo">http://www.springframework.org/schema/context&quot;xmlns:mvc=&quot;http://www.springframework.org/schema/mvo</a>“</strong></p>
<p><strong>约束地址: <a target="_blank" rel="noopener" href="http://www/">http://www</a>. springframework. org&#x2F;schema&#x2F;contexthttp: &#x2F;&#x2F;www. springframework.org&#x2F;schema&#x2F;aontext&#x2F;spring-aontext. xsdhttp: &#x2F;&#x2F;<a target="_blank" rel="noopener" href="http://www.springframework/">www.springframework</a>. org&#x2F;schema&#x2F;mva<a target="_blank" rel="noopener" href="http://www.apringframework.org/schema/mvo/spring-mva">http://www.apringframework.org/schema/mvo/spring-mva</a>. xad</strong></p>
<p><strong>2.组件扫描</strong></p>
<p><strong>springMvc基于spring容器,所以在进行springMVc操作时,需要将controller存储到spring容器中,如果使用econtroller注解标注的话,就需要使用</strong></p>
<p><strong>&lt;context:component-scan basepackage&#x3D;”com. itheima. controller”&#x2F;&gt;进行组件扫描。</strong></p>
<h2 id="3-4-SpringMVC的XML配置解析"><a href="#3-4-SpringMVC的XML配置解析" class="headerlink" title="3.4 SpringMVC的XML配置解析"></a>3.4 SpringMVC的XML配置解析</h2><p><strong>1.视图解析器</strong></p>
<p><strong>SpringMVc有默认组件配置,默认组件都是DispatcherServlet.properties配置文件中配置的,该配置文件地址org&#x2F;springframework&#x2F;web&#x2F;servlet&#x2F;DispatcherServlet.properties,该文件中配置了默认的视图解析器,如下:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.web.servlet. ViewResolver=org.springframework. web.servlet.view.InternalResourceViewResolver</span><br></pre></td></tr></table></figure>

<p><strong>翻看该解析器源码,可以看到该解析器的默认设置,如下:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REDIRECT_URL_PREFIX = &quot;redireat:&quot; --重定前缀</span><br><span class="line">FORWARD_URL_PREFIx = &quot;forward:&quot; --转发前缀(默认值)</span><br><span class="line">prefix = &quot;&quot;; --视图名称前缀</span><br><span class="line">suffix =&quot;&quot;;--视图名称后缀</span><br></pre></td></tr></table></figure>

<h2 id="3-5-知识要点"><a href="#3-5-知识要点" class="headerlink" title="3.5 知识要点"></a>3.5 知识要点</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SpringMVC的相关组件</span><br><span class="line">前端控制器: DispatcherServlet</span><br><span class="line">处理器映射器: HandlerMapping</span><br><span class="line">处理器适配器: HandlerAdapter</span><br><span class="line">处理器: Handler</span><br><span class="line">视图解析器: View Resolver</span><br><span class="line">视图: View</span><br><span class="line">SpringMVC的注解和配置</span><br><span class="line">请求映射注解: @RequestMapping</span><br><span class="line">视图解析器配置:</span><br><span class="line">REDIRECT_URL_PREFIX = &quot;redirect:&quot;</span><br><span class="line">FORWARD_URL_PREFIX = &quot;forward:&quot;</span><br><span class="line">prefix= &quot;&quot;</span><br><span class="line">suffix= &quot;&quot;</span><br></pre></td></tr></table></figure>

<h1 id="1-SpringMVC的数据响应"><a href="#1-SpringMVC的数据响应" class="headerlink" title="1.SpringMVC的数据响应"></a>1.SpringMVC的数据响应</h1><h2 id="1-1-SpringMVC的数据响应方式"><a href="#1-1-SpringMVC的数据响应方式" class="headerlink" title="1.1 SpringMVC的数据响应方式"></a>1.1 SpringMVC的数据响应方式</h2><p><strong>1)页面跳转.</strong></p>
<p><strong>直接返回字符串</strong></p>
<p><strong>通过ModelAndView对象返回</strong></p>
<p><strong>2)回写数据</strong></p>
<p><strong>直接返回字符串</strong></p>
<p><strong>返回对象或集合</strong></p>
<h2 id="1-2页面跳转"><a href="#1-2页面跳转" class="headerlink" title="1.2页面跳转"></a>1.2页面跳转</h2><p><strong>1.返回字符串形式直接返回字符串:此种方式会将返回的字符串与视图解析器的前后缀拼接后跳转。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quiak&quot;</span>)</span><br><span class="line">publia string <span class="title function_">quickMethod</span> <span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INE/views/&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>转发资源地址: &#x2F;WEB-INE&#x2F;views&#x2F;index.jsp</strong></p>
<p><strong>返回带有前缀的字符串:</strong></p>
<p><strong>转发: forward:&#x2F;WEB-INE&#x2F;views&#x2F;index. jsp</strong></p>
<p><strong>重定向: redirect:&#x2F;index. jsp</strong></p>
<p><strong>2.返回ModelAndView对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/quick4&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save4</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;博学谷&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/quick3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">save3</span><span class="params">(ModelAndView modelAndView)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置模型数据</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;itheima555&quot;</span>);</span><br><span class="line">        <span class="comment">//设置视图名称</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/quick2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">save2</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//        Model:模型作用封装数据</span></span><br><span class="line"><span class="comment">//        view:作用展示数据</span></span><br><span class="line">      ModelAndView modelAndView= <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">      <span class="comment">//设置模型数据</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;itcat&quot;</span>);</span><br><span class="line">      <span class="comment">//设置视图名称</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//请求映射 请求地址http://local:8080/user/quick</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/quick&quot;,method = RequestMethod.GET,params = &#123;&quot;username&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;controller save running web&quot;</span>);</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-3回写数据"><a href="#1-3回写数据" class="headerlink" title="1.3回写数据"></a>1.3回写数据</h2><p><strong>1.直接返回字符串</strong></p>
<p><strong>Web基础阶段,客户端访问服务器端,如果想直接回写字符串作为响应体返回的话,只需要使用response.getWriter().print( “hello world” )即可,那么在Controller中想直接回写字符串该怎样呢?</strong></p>
<p><strong>通过SpringMVC框架注入的response对象,使用response.getWriterO.print( “hello world” )回写数据,此时不需要视图跳转,业务方法返回值为void.</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick4&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod4</span> <span class="params">(Httpserfletresponse response)</span> throwsIOException&#123;</span><br><span class="line">    response.getwriter().print (<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>将需要回写的字符串直接返回,但此时需要通过@ResponseBody注解告知SpringMVC框架,方法返回的字符串不是跳转是直接在http响应体中返回。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick5&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> string <span class="title function_">quickMethod5</span> <span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello springMVC!!!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.返回对象或集合</strong></p>
<p><strong>通过SpringMVC帮助我们对对象或集合进行json字符串的转换并回写,为处理器适配器配置消息转换参数,指定使用jackson进行对象或集合的转换,因此需要在spring-mvc.xml中进行如下配置:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;messageConverters&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>在方法上添加@ResponseBody就可以返回json格式的字符串,但是这样配置比较麻烦,配置的代码比较多,因此,我们可以使用mvc的注解驱动代替上述配置。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mvc的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:</span> <span class="attr">annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>在SpringMVC的各个组件中,处理器映射器、处理器适配器、视图解析器称为SpringMVC的三大组件。使用<a href="mvc:annotation-driven">mvc:annotation-driven</a>自动加载 RequestMappingHandlerMapping (处理映射器)和RequestMappingHandlerAdapter (处理适配器),可用在Spring-xml.xml配置文件中使用<a href="mvc:annotation-driven">mvc:annotation-driven</a>替代注解处理器和适配器的配置。同时使用<a href="mvc:annotation-driven">mvc:annotation-driven</a>默认底层就会集成jackson进行对象或集合的json格式字符串的转换。</strong></p>
<h2 id="1-4-知识要点"><a href="#1-4-知识要点" class="headerlink" title="1.4 知识要点"></a>1.4 知识要点</h2><p><strong>SpringMVC的数据响应方式</strong></p>
<p><strong>1)页面跳转</strong></p>
<p><strong>.直接返回字符</strong></p>
<p><strong>.通过ModelAndView对象返回</strong></p>
<p><strong>2)回写数据</strong></p>
<p><strong>.直接返回字符串</strong></p>
<p><strong>.返回对象或集合</strong></p>
<h1 id="2-SpringMVC-获得请求数据"><a href="#2-SpringMVC-获得请求数据" class="headerlink" title="2.SpringMVC 获得请求数据"></a>2.SpringMVC 获得请求数据</h1><h2 id="2-1获得请求参数"><a href="#2-1获得请求参数" class="headerlink" title="2.1获得请求参数"></a>2.1获得请求参数</h2><p><strong>客户端请求参数的格式是: name&#x3D;value&amp;name&#x3D;value……</strong></p>
<p><strong>服务器端要获得请求的参数,有时还需要进行数据的封装, SpringMVC可以接收如下类型的参数:</strong></p>
<p><strong>基本类型参数</strong></p>
<p><strong>POJO类型参数</strong></p>
<p><strong>数组类型参数</strong></p>
<p><strong>集合类型参数</strong></p>
<h2 id="2-2获得基本类型参数"><a href="#2-2获得基本类型参数" class="headerlink" title="2.2获得基本类型参数"></a>2.2获得基本类型参数</h2><p><strong>Controller中的业务方法的参数名称要与请求参数的name一致,参数值会自动映射匹配。</strong></p>
<p><strong><a target="_blank" rel="noopener" href="http://localhost:8080/itheima_springmvcl/quick9?username=zhangsan&age=12">http://localhost:8080/itheima_springmvcl/quick9?username=zhangsan&amp;age=12</a></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick9&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod9</span> <span class="params">(String username, <span class="type">int</span> age)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println (username);</span><br><span class="line">    System.out.println (age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-获得POJO类型参数"><a href="#2-3-获得POJO类型参数" class="headerlink" title="2.3 获得POJO类型参数"></a>2.3 获得POJO类型参数</h2><p><strong>Controller中的业务方法的POJO参数的属性名与请求参数的name一致,参数值会自动映射匹配。</strong></p>
<p><strong>http;&#x2F;&#x2F;loca1host: 8080&#x2F;itheima springmvc1&#x2F;quick9?cname&#x3D;zhangsan&amp;age&#x3D;12</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    getter/setter...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapsing</span> (<span class="string">&quot;/quick10&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod10</span> <span class="params">(User user)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println (user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4获得数组类型参数"><a href="#2-4获得数组类型参数" class="headerlink" title="2.4获得数组类型参数"></a>2.4获得数组类型参数</h2><p><strong>Controller中的业务方法数组名称与请求参数的name致,参数值会自动映射匹配。</strong></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/itheima_springmvc1/quick11?strs=111&strs=222&strs=333">http://localhost:8080/itheima_springmvc1/quick11?strs=111&amp;strs=222&amp;strs=333</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick11&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod11</span> <span class="params">(String [] strs)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println (Arrays.asList (strs));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-5获得集合类型参数"><a href="#2-5获得集合类型参数" class="headerlink" title="2.5获得集合类型参数"></a>2.5获得集合类型参数</h2><p><strong>获得集合参数时,要将集合参数包装到一个POJO中才可以。</strong></p>
<p><strong>当使用ajax提交时,可以指定contentType为json形式,那么在方法参数位置使用@RequestBody可以直接接收集合数据而无需使用POJO进行包装。</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> &lt;script src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jqury.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> userList=<span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">    userList.push(&#123;username:<span class="string">&quot;zhangsan&quot;</span>,age:<span class="string">&quot;18&quot;</span>&#125;)</span><br><span class="line">    userList.push(&#123;username:<span class="string">&quot;lisi&quot;</span>,age:<span class="string">&quot;30&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">        url:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/quick15&quot;</span>,</span><br><span class="line">        data:JSON.stringify(userList),</span><br><span class="line">        contentType:<span class="string">&quot;application/json;charset=utf-8&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-6请求数据乱码问题"><a href="#2-6请求数据乱码问题" class="headerlink" title="2.6请求数据乱码问题"></a>2.6请求数据乱码问题</h2><p><strong>当post请求时,数据会出现乱码,我们可以设置一个过滤器来进行编码的过滤。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Characterencodingrilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web. filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-7-参数定注解-requestParam"><a href="#2-7-参数定注解-requestParam" class="headerlink" title="2.7 参数定注解@requestParam"></a>2.7 参数定注解@requestParam</h2><p><strong>当请求的参数名称与Controller的业务方法参数名称不一致时,就需要通过@RequestParam注解显示的绑定。</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$(pageContext.request.contextPath]/quick14&quot;</span> method= <span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot; text&quot;</span> name=<span class="string">&quot; name &quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot; submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick14&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod14</span> <span class="params">(<span class="meta">@RequestParam</span> (<span class="string">&quot;name&quot;</span>)</span> String username) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println (username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注解@RequestParam还有如下参数可以使用:</strong></p>
<p><strong>.value:与请求参数名称</strong></p>
<p><strong>.required:此在指定的请求参数是否必须包括,默认是true,提交时如果没有此参数则报错</strong></p>
<p><strong>.defaultValue:当没有指定请求参数时,则使用指定的默认值赋值</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick14&quot;</span>)<span class="meta">@ResponseBodypublic</span> <span class="keyword">void</span> <span class="title function_">quickMethod14</span> <span class="params">(<span class="meta">@RequestParam</span> (value=<span class="string">&quot;name&quot;</span>, required= <span class="literal">false</span>, defaultvalue = <span class="string">&quot;itcast&quot;</span>)</span> string username) <span class="keyword">throws</span> IOException &#123; System.out.println (username);&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-8-获得Restful风格的参数"><a href="#2-8-获得Restful风格的参数" class="headerlink" title="2.8 获得Restful风格的参数"></a>2.8 获得Restful风格的参数</h2><p><strong>Restful是一种软件架构风格、设计风格,而不是标准,只是提供了一组设计原则和约束条件。主要用于客户端和服务器交互类的软件,基于这个风格设计的软件可以更简洁,更有层次,更易于实现缓存机制等。</strong></p>
<p><strong>Restful风格的请求是使用”url+请求方式”表示一次请求目的的,HTTP协议里面四个表示操作方式的动词如下:</strong></p>
<p><strong>.GET:用于获取资源</strong></p>
<p><strong>.POST:用于新建资源</strong></p>
<p><strong>.PUT:用于更新资源</strong></p>
<p><strong>.DELETE:用于删除资源</strong></p>
<p><strong>例如:</strong></p>
<p><strong>&#x2F;user&#x2F;1 	GET: 得到id &#x3D; 1的user</strong></p>
<p><strong>&#x2F;user&#x2F;1 	DELETE: 删除id &#x3D; 1的user</strong></p>
<p><strong>&#x2F;user&#x2F;1 	PUT: 更新id &#x3D; 1的user</strong></p>
<p><strong>&#x2F;user&#x2F;1	POST: 新增user</strong></p>
<p><strong>上述url地址&#x2F;user&#x2F;1中的1就是要获得的请求参数,在SpringMVC中可以使用占位符进行参数绑定。地址&#x2F;user&#x2F;1可以写成&#x2F;user&#x2F;(id),占位符(id对应的就是1的值。在业务方法中我们可以使用@PathVariable注解进行占位符的匹配获取工作。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//localhost: 8080/itheima_springmvc1/quick19/zhangsan</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick19/&#123;name&#125;&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod19</span> <span class="params">(<span class="meta">@Pathvariable</span> (value=<span class="string">&quot;name &quot;</span>required = <span class="literal">true</span>)</span> string name) &#123;</span><br><span class="line">          System.out.println(name);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-9自定义类型转换器"><a href="#2-9自定义类型转换器" class="headerlink" title="2.9自定义类型转换器"></a>2.9自定义类型转换器</h2><p><strong>SpringMVC默认已经提供了一些常用的类型转换器,例如客户端提交的字符串转换成int型进行参数设置。</strong></p>
<p><strong>但是不是所有的数据类型都提供了转换器,没有提供的就需要自定义转换器,例如:日期类型的数据就需要自定义转换器。</strong></p>
<p><strong>自定义类型转换器的开发步骤:</strong></p>
<p><strong>①定义转换器类实现Converter接口</strong></p>
<p><strong>②在配置文件中声明转换器</strong></p>
<p><strong>③在<annotation-driven>中引用转换器</strong></p>
<h2 id="2-10-获得Servlet相关API"><a href="#2-10-获得Servlet相关API" class="headerlink" title="2.10 获得Servlet相关API"></a>2.10 获得Servlet相关API</h2><p><strong>SpringMVC支持使用原始ServletAPI对象作为控制器方法的参数进行注入,常用的对象如下:.</strong></p>
<p><strong>HttpServletRequest.</strong></p>
<p><strong>HttpServletResponse</strong></p>
<p><strong>HttpSession</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot; /quick16&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod16</span> <span class="params">(HttpservletRequest request, HttpservletResponse response,Httpsession session)</span> </span><br><span class="line">	&#123;System.out.println (request) ;</span><br><span class="line">     System.out.println (response);</span><br><span class="line">     System. out.println (session);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-11获得请求头"><a href="#2-11获得请求头" class="headerlink" title="2.11获得请求头"></a>2.11获得请求头</h2><p><strong>1.@RequestHeader</strong></p>
<p><strong>使用@RequestHeader可以获得请求头信息,相当于web阶段学习的request.getHeader(name)</strong></p>
<p><strong>@RequestHeader注解的属性如下:</strong></p>
<p><strong>value:请求头的名称</strong></p>
<p><strong>required:是否必须携带此请求头</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick17&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod17</span><span class="params">(<span class="meta">@RequestHeader</span> (value = <span class="string">&quot;User-Agent&quot;</span>, required = <span class="literal">false</span>)</span> String headervalue) &#123;</span><br><span class="line">    System.out.println (headervalue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.@CookieValue</strong></p>
<p><strong>使用@CookieValue可以获得指定Cookie的值</strong></p>
<p><strong>@CookieValue注解的属性如下:</strong></p>
<p><strong>.value:指定cookie的名称</strong></p>
<p><strong>.required: 是否必须携带此cookie</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick18&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod18</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="meta">@cookievalue</span> (value = <span class="string">&quot;JSESSIONID&quot;</span>, required= <span class="literal">false</span>)</span> string jsessionid)&#123;</span><br><span class="line">    system.out.println (jsessiqgid);</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h2 id="2-12-文件上传"><a href="#2-12-文件上传" class="headerlink" title="2.12 文件上传"></a>2.12 文件上传</h2><p><strong>1.文件上传客户端三要素</strong></p>
<p><strong>表单项type&#x3D; “file”</strong></p>
<p><strong>表单的提交方式是post</strong></p>
<p><strong>表单的enctype属性是多部分表单形式,及enctype&#x3D; “multipart&#x2F;form-data”</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$[pagecontext.request.contextPath]/quick20&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    名称: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name &quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    文件: &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot; submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&lt;br&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2.文件上传原理</strong></p>
<p><strong>.当form表单修改为多部分表单时,request.getParameterO将失效。</strong></p>
<p><strong>.enctype&#x3D; “application&#x2F;x-www-form-urlencoded” 时, form表单的正文内容格式是:key&#x3D;value&amp;key&#x3D;value&amp;key&#x3D;value.</strong></p>
<p><strong>当form表单的enctype取值为Mutilpart&#x2F;form-data时,请求正文内容就变成多部分形式:</strong></p>
<h2 id="2-13-单文件上传步骤"><a href="#2-13-单文件上传步骤" class="headerlink" title="2.13 单文件上传步骤"></a>2.13 单文件上传步骤</h2><p><strong>① 导入fileupload和io坐标</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactid</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactid</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>②配置文件上传解析器</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart. commons. CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上传文件总大小--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxuploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242800&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上传单个文件的大小--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxuploadsizePerFile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5242800&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--上传文件的编码类型--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>③编写文件上传代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot;/quick20&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod20</span> <span class="params">(string name, MultipartFile uploadFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获得文件名称</span></span><br><span class="line">    <span class="type">string</span> <span class="variable">originalFilename</span> <span class="operator">=</span> uploadFile. getoriginalFilename ();</span><br><span class="line">    <span class="comment">//保存文件</span></span><br><span class="line">    uploadFile.transferTo (<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\upload\\&quot;</span>+originalFilename));</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h2 id="2-15多文件上传实现"><a href="#2-15多文件上传实现" class="headerlink" title="2.15多文件上传实现"></a>2.15多文件上传实现</h2><p><strong>文件上传,只需要将页面修改为多个文件上传项,将方法参数MultipartFile类型修改为MultipartFile[]即可</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;多文件上传测试&lt;/h1&gt;    &lt;form action=<span class="string">&quot;$(pageContext.request.contextPath)/quick21&quot;</span> method= <span class="string">&quot;post&quot;</span>enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;    名称: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name &quot;</span>&gt;&lt;br&gt;        文件<span class="number">1</span>: &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;upladFiles&quot;</span>&gt;&lt;br&gt;            文件<span class="number">2</span>: &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;uploadFiles&quot;</span>&gt;&lt;br&gt;                文件<span class="number">3</span>: &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;uploadFiles&quot;</span>&gt;&lt;br&gt;                    &lt;input type=<span class="string">&quot; submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;&lt;br&gt; &lt;/form&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span> (<span class="string">&quot; /quick21&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickMethod21</span> <span class="params">(string name, Multipartrile [] uploadFiles)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">for</span> (MultipartFile uploadFile : uploadFiles) &#123;</span><br><span class="line">        <span class="type">string</span> <span class="variable">originalFilename</span> <span class="operator">=</span> uploadFile.getoriginalFilename ();</span><br><span class="line">        uploadFile.transferTo (<span class="keyword">new</span> <span class="title class_">File</span> (<span class="string">&quot;C:\\upload\\&quot;</span>+originalFilename));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-14-知识要点"><a href="#2-14-知识要点" class="headerlink" title="2.14 知识要点"></a>2.14 知识要点</h2><p><strong>MVC实现数据请求方式</strong></p>
<p><strong>基本类型参数.</strong></p>
<p><strong>POJO类型参数.</strong></p>
<p><strong>数组类型参数.</strong></p>
<p><strong>集合类型参数</strong></p>
<p><strong>MVC获取数据细节</strong></p>
<p><strong>.中文乱码问题</strong></p>
<p><strong>@RequestParam和 @Pathvariable</strong></p>
<p><strong>自定义类型转换器</strong></p>
<p><strong>获得Servlet相关API</strong></p>
<p><strong>@RequestHeader 和@Cookievalue</strong></p>
<p><strong>文件上传</strong></p>
<h1 id="1-spring-JdbcTemplate基本使用"><a href="#1-spring-JdbcTemplate基本使用" class="headerlink" title="1.spring  JdbcTemplate基本使用"></a>1.spring  JdbcTemplate基本使用</h1><h2 id="1-1-JdbcTemplate概述"><a href="#1-1-JdbcTemplate概述" class="headerlink" title="1.1 JdbcTemplate概述"></a>1.1 JdbcTemplate概述</h2><p><strong>它是spring框架中提供的一个对象,是对原始繁琐的JdbcAPI对象的简单封装。spring框架为我们提供了很多的操作模板类。例如:操作关系型数据的JdbcTemplate和HibernateTemplate,操作nosql数据库的RedisTemplate,操作消息队列的JmsTemplate等等。</strong></p>
<h2 id="1-2-JdbcTemplate开发步骤"><a href="#1-2-JdbcTemplate开发步骤" class="headerlink" title="1.2 JdbcTemplate开发步骤"></a>1.2 JdbcTemplate开发步骤</h2><p><strong>① 导入spring-jdbc和spring-tx坐标</strong></p>
<p><strong>②创建数据库表和实体</strong></p>
<p><strong>③创建JdbcTemplate对象</strong></p>
<p><strong>④执行数据库操作</strong></p>
<h2 id="1-4-Spring产生JdbcTemplate对象"><a href="#1-4-Spring产生JdbcTemplate对象" class="headerlink" title="1.4 Spring产生JdbcTemplate对象"></a>1.4 Spring产生JdbcTemplate对象</h2><p><strong>我们可以将JdbcTemplate的创建权交给Spring,将数据源DataSource的创建权也交给Spring,在Spring容器内部将数据源DataSource注入到JdbcTemplate模版对象中,配置如下:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--数据源DataSource--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2. c3p0. Combo PooledDataSource &quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot; com. mysql. jdbo.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot; jdboUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot; jdba :mysql:///test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&lt;/<span class="attr">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&lt;/<span class="attr">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--JdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbeTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org. springframework. jdbc. core.JdbeTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&lt;/<span class="attr">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-6知识要点"><a href="#1-6知识要点" class="headerlink" title="1.6知识要点"></a>1.6知识要点</h2><p><strong>1.导入spring-jdbc和spring-tx坐标</strong></p>
<p><strong>2.创建数据库表和实体</strong></p>
<p><strong>3.创建JdbcTemplate对象</strong></p>
<p><strong>Jdbctemplate jdbctemplate &#x3D; new Jdbctemplate () ;</strong></p>
<p><strong>jdbcTemplate.setDatasource (datasource);</strong></p>
<p><strong>4.执行数据库操作</strong></p>
<p><strong>更新操作:</strong></p>
<p><strong>jdbctemplate. update (sql, params)</strong></p>
<p><strong>查询操作:</strong></p>
<p><strong>jdbctemplate.query (sql, Mapper, params)</strong></p>
<p><strong>jdbctemplate.queryForobject (sql, Mapper, params)</strong></p>
<h1 id="1-Spring练习环境搭建"><a href="#1-Spring练习环境搭建" class="headerlink" title="1.Spring练习环境搭建"></a>1.Spring练习环境搭建</h1><h2 id="1-1-Spring环境搭建步骤"><a href="#1-1-Spring环境搭建步骤" class="headerlink" title="1.1 Spring环境搭建步骤"></a>1.1 Spring环境搭建步骤</h2><p><strong>① 创建工程(Project&amp;Module)</strong></p>
<p><strong>② 导入静态页面(见资料jsp页面)</strong></p>
<p><strong>③ 导入需要坐标(见资料中的pom.xml)</strong></p>
<p><strong>④创建包结构(controller, service, dao, domain, utils)</strong></p>
<p><strong>⑤导入数据库脚本(见资料testsql)</strong></p>
<p><strong>6.创建POJO类(见资料User.java和Role.java)</strong></p>
<p><strong>7.创建配置文件(applicationContext.xml, spring-mvc.xml, jdbc.properties, log4j.properties)</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\24861\Desktop\数据库关系.JPG" alt="数据库关系"></p>
<h1 id="2-角色列表的展示和添加操作"><a href="#2-角色列表的展示和添加操作" class="headerlink" title="2.角色列表的展示和添加操作"></a>2.角色列表的展示和添加操作</h1><h2 id="2-2角色列表的展示步骤分析"><a href="#2-2角色列表的展示步骤分析" class="headerlink" title="2.2角色列表的展示步骤分析"></a>2.2角色列表的展示步骤分析</h2><p><strong>点击角色管理菜单发送请求到服务器端(修改角色管理菜单的url地址)</strong></p>
<p><strong>创建RoleController和showListO方法</strong></p>
<p><strong>创建RoleService和showListO方法</strong></p>
<p><strong>创建RoleDao和findAlIO方法</strong></p>
<p><strong>使用JdbcTemplate完成查询操作</strong></p>
<p><strong>将查询数据存储到Model中</strong></p>
<p><strong>转发到role-list.jsp页面进行展示</strong></p>
<p><strong>2.4角色添加的步骤分析</strong></p>
<p><strong>①点击列表页面新建按钮跳转到角色添加页面</strong></p>
<p><strong>②输入角色信息,点击傑存按钮,表单数据提交服务器</strong></p>
<p><strong>③编写RoleController的save0方法</strong></p>
<p><strong>④编写RoleService的save0方法</strong></p>
<p><strong>⑤编写RoleDao的saveO方法</strong></p>
<p><strong>6使用JdbcTemplate保存Role数据到sys_role</strong></p>
<p><strong>7跳转回角色列表页面</strong></p>
<h1 id="1-SpringMVC拦截器"><a href="#1-SpringMVC拦截器" class="headerlink" title="1.SpringMVC拦截器"></a>1.SpringMVC拦截器</h1><h2 id="1-1-拦截器-interceptor-的作用"><a href="#1-1-拦截器-interceptor-的作用" class="headerlink" title="1.1 拦截器(interceptor)的作用"></a>1.1 拦截器(interceptor)的作用</h2><p><strong>Spring MVC的拦截器类似于Servlet开发中的过滤器Filter,用于对处理器进行预处理和后处理。</strong></p>
<p><strong>将拦截器按一定的顺序联结成一条链,这条链称为拦截器链(Interceptor Chain).在访问被拦截的方法或字段时,拦截器链中的拦截器就会按其之前定义的顺序被调用。拦截器也是AOP思想的具体实现。</strong></p>
<h2 id="1-2拦截器和过滤器区别"><a href="#1-2拦截器和过滤器区别" class="headerlink" title="1.2拦截器和过滤器区别"></a>1.2拦截器和过滤器区别</h2><p><strong>区别							过滤器(Filter)																								拦截器(Interceptor)</strong></p>
<p><strong>使用范围				是servlet规范中的一部分,任何Java Web 工程都可以使用					是SpringMVC 框架自己的,只有使用了SpringMVC 																																						框架的工程才能用</strong></p>
<p>*<em>拦截范围				在url-pattern中配置了&#x2F;<em>之后,可以对所有要访问的资源拦截			在&lt;mvc:mapping path&#x3D; “” &#x2F;&gt;中配置了&#x2F;“之后,可																																					以多所有资源进行拦截,但是可以通以对所有要访问																																			资源拦截过&lt;mvc:exclude-mapping path&#x3D; “”&#x2F;&gt;标签																																					排除不需要拦截的资源</em></em></p>
<h2 id="1-3拦截器是快速入门"><a href="#1-3拦截器是快速入门" class="headerlink" title="1.3拦截器是快速入门"></a>1.3拦截器是快速入门</h2><p><strong>自定义拦截器很简单,只有如下三步:</strong></p>
<p><strong>创建拦截器类实现Handlerlnterceptor接口</strong></p>
<p><strong>配置拦截器</strong></p>
<p><strong>测试拦截器的拦截效果</strong></p>
<h2 id="1-5拦截器方法说明"><a href="#1-5拦截器方法说明" class="headerlink" title="1.5拦截器方法说明"></a>1.5拦截器方法说明</h2><p><strong>方法名																													说明</strong></p>
<p><strong>preHandle																		方法将在请求处理之前进行调用,该方法的返回值是布尔值Boolean类型的。</strong></p>
<p>​																						<strong>当它返回为false时,表示请求结束,后续的Interceptor和Controller都不会再执行:</strong></p>
<p>​																						<strong>当返回值为true时就会继续调用下一个Interceptor的preHandle方法</strong></p>
<p><strong>postHandle														该方法是在当前请求进行处理之后被调用,前提是preHandle方法的返回值为true 时才能</strong></p>
<p>​																					<strong>被调用,且它会在DispatcherServlet进行视图返回演染之前被调用,所以我们可以在这个</strong></p>
<p>​																						<strong>方法中对Controller处理之后的ModelAndView对象进行操作</strong></p>
<p><strong>afterCompletion()											该方法将在整个请求结束之后,也就是在DispatcherServlet這染了对应的视图之后执行</strong></p>
<p>​																				<strong>,前提是preHandle方法的返回值为true时才能被调用</strong></p>
<h2 id="1-6-知识要点"><a href="#1-6-知识要点" class="headerlink" title="1.6 知识要点"></a>1.6 知识要点</h2><p><strong>自定义拦截器步骤</strong></p>
<p><strong>创建拦截器类实现Handlerlnterceptor接口</strong></p>
<p><strong>②配置拦截器</strong></p>
<p><strong>③测试拦截器的拦截效果</strong></p>
<h1 id="1-SpringMVC异常处理"><a href="#1-SpringMVC异常处理" class="headerlink" title="1.SpringMVC异常处理"></a>1.SpringMVC异常处理</h1><h2 id="1-1异常处理的思路"><a href="#1-1异常处理的思路" class="headerlink" title="1.1异常处理的思路"></a>1.1异常处理的思路</h2><p><strong>系统中异常包括两类:预期异常和运行时异常RuntimeException,前者通过捕获异常从而获取异常信息,后者主要通过规范代码开发、测试等手段减少运行时异常的发生。</strong></p>
<p><strong>系统的Dao, Service, Controller出现都通过throws Exception向上抛出,最后由SpringMVC前端控制器交由异常处理器进行异常处理,如下图:</strong></p>
<p><strong>客户端	——	前端控制器	—-	Controller	——–		Service	——-	Dao</strong></p>
<p>​					<strong>HandlerExceptionResolver</strong></p>
<p>​							<strong>异常处理器</strong></p>
<h2 id="1-2异常处理两种方式"><a href="#1-2异常处理两种方式" class="headerlink" title="1.2异常处理两种方式"></a>1.2异常处理两种方式</h2><p><strong>.使用Spring MVC提供的简单异常处理器SimpleMappingExceptionResolver</strong></p>
<p><strong>实现Spring的异常处理接口HandlerExceptionResolver自定义自己的异常处理器</strong></p>
<h2 id="1-3-简单异常处理器SimpleMappingExceptionResolver"><a href="#1-3-简单异常处理器SimpleMappingExceptionResolver" class="headerlink" title="1.3 简单异常处理器SimpleMappingExceptionResolver"></a>1.3 简单异常处理器SimpleMappingExceptionResolver</h2><p>S<strong>pringMVC已经定义好了该类型转换器,在使用时可以根据项目情况进行相应异常与视图的映射配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置简单映射异常处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>&quot;<span class="attr">defaultErrorView</span>&quot; <span class="attr">value</span>=<span class="string">&quot;error&quot;</span>/&gt;</span>//默认错误视图</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exoeptionMappings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span>//异常类型错误视图</span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;com. itheima. exception. MyException&quot;</span> <span class="attr">value</span>=<span class="string">&#x27;error&quot;/&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">             &lt;entry key=&quot;java.lang. ClassCastException&quot; value=&quot;error&quot;/&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">         &lt;/map&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &lt;/property&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag"> &lt;/bean&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-自定义异常处理步骤"><a href="#1-4-自定义异常处理步骤" class="headerlink" title="1.4 自定义异常处理步骤"></a>1.4 自定义异常处理步骤</h2><p><strong>创建异常处理器类实现HandlerExceptionResolver</strong></p>
<p><strong>配置异常处理器</strong></p>
<p><strong>编写异常页面</strong></p>
<p><strong>测试异常跳转</strong></p>
<h2 id="1-5知识要点-2"><a href="#1-5知识要点-2" class="headerlink" title="1.5知识要点"></a>1.5知识要点</h2><p><strong>异常处理方式</strong></p>
<p><strong>.配置简单异常处理器SimpleMappingExceptionResolver.</strong></p>
<p><strong>自定义异常处理器</strong></p>
<p><strong>自定义异常处理步骤</strong></p>
<p><strong>①创建异常处理器类实现HandlerExceptionResolver</strong></p>
<p><strong>2.配置异常处理器</strong></p>
<p><strong>③编写异常页面</strong></p>
<p><strong>④测试异常跳转</strong></p>
<h1 id="1-Spring-的AOP-简介"><a href="#1-Spring-的AOP-简介" class="headerlink" title="1.Spring 的AOP 简介"></a>1.Spring 的AOP 简介</h1><h2 id="1-1-什么是AOP"><a href="#1-1-什么是AOP" class="headerlink" title="1.1 什么是AOP"></a>1.1 什么是AOP</h2><p><strong>AOP 为Aspect Oriented Programming的缩写,意思为面向切面编程,是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</strong></p>
<p><strong>AOP是 OOP的延续,是软件开发中的一个热点,也是Spring框架中的一个重要内容,是函数式编程的一种衍生范型。利用AOP可以对业务逻辑的各个部分进行隔离,从而使得业务逻辑各部分之间的耦合度降低,提高程序的可重用性,同时提高了开发的效率。</strong></p>
<h2 id="1-2-AOP-的作用及其优势"><a href="#1-2-AOP-的作用及其优势" class="headerlink" title="1.2 AOP 的作用及其优势"></a>1.2 AOP 的作用及其优势</h2><p><strong>作用:在程序运行期间,在不修改源码的情况下对方法进行功能增强</strong></p>
<p><strong>优势:减少重复代码,提高开发效率,并且便于维护</strong></p>
<h2 id="1-3-AOP-的底层实现"><a href="#1-3-AOP-的底层实现" class="headerlink" title="1.3 AOP 的底层实现"></a>1.3 AOP 的底层实现</h2><p><strong>实际上,AOP的底层是通过Spring提供的的动态代理技术实现的。在运行期间, Spring通过动态代理技术动态的生成代理对象,代理对象方法执行时进行增强功能的介入,在去调用目标对象的方法,从而完成功能的增强。</strong></p>
<h2 id="1-4-AOP-的动态代理技术"><a href="#1-4-AOP-的动态代理技术" class="headerlink" title="1.4 AOP 的动态代理技术"></a>1.4 AOP 的动态代理技术</h2><p><strong>常用的动态代理技术</strong></p>
<p><strong>JDK代理:基于接口的动态代理技术</strong></p>
<p><strong>cglib代理:基于父类的动态代理技术</strong></p>
<h2 id="1-5-JDK-的动态代理"><a href="#1-5-JDK-的动态代理" class="headerlink" title="1.5 JDK 的动态代理"></a>1.5 JDK 的动态代理</h2><h2 id="1-6-cglib-的动态代理"><a href="#1-6-cglib-的动态代理" class="headerlink" title="1.6 cglib 的动态代理"></a>1.6 cglib 的动态代理</h2><h2 id="1-7-AOP-相关概念"><a href="#1-7-AOP-相关概念" class="headerlink" title="1.7 AOP 相关概念"></a>1.7 AOP 相关概念</h2><p><strong>Spring的 AOP实现底层就是对上面的动态代理的代码进行了封装,封装后我们只需要对需要关注的部分进行代码编写,并通过配置的方式完成指定目标的方法增强。</strong></p>
<p><strong>在正式讲解AOP的操作之前,我们必须理解AOP的相关术语,常用的术语如下:</strong></p>
<p><strong>.Target (目标对象) :代理的目标对象</strong></p>
<p><strong>Proxy (代理) :一个类被AOP织入增强后,就产生一个结果代理类</strong></p>
<p><strong>Joinpoint (连接点) :所谓连接点是指那些被拦截到的点。在spring中,这些点指的是方法,因为spring只支持方法类型的连接点</strong></p>
<p><strong>Pointcut (切入点) :所谓切入点是指我们要对哪些Joinpoint进行拦截的定义</strong></p>
<p><strong>Advice (通知&#x2F;增强) :所谓通知是指拦截到Joinpoint之后所要做的事情就是通知</strong></p>
<p><strong>Aspect (切面):是切入点和通知(引介)的结合</strong></p>
<p><strong>Weaving (织入) :是指把增强应用到目标对象来创建新的代理对象的过程。spring采用动态代理织入,而Aspect&#x2F;采用编译期织入和类装载期织入</strong></p>
<h2 id="1-8-AOP-开发明确的事项"><a href="#1-8-AOP-开发明确的事项" class="headerlink" title="1.8 AOP 开发明确的事项"></a>1.8 AOP 开发明确的事项</h2><p><strong>1.需要编写的内容</strong></p>
<p><strong>编写核心业务代码(目标类的目标方法)</strong></p>
<p><strong>编写切面类,切面类中有通知(增强功能方法)</strong></p>
<p><strong>在配置文件中,配置织入关系,即将哪些通知与哪些连接点进行结合</strong></p>
<p><strong>2.AOP 技术实现的内容</strong></p>
<p><strong>Spring框架监控切入点方法的执行。一旦监控到切入点方法被运行,使用代理机制,动态创建目标对象的代理对象,根据通知类别,在代理对象的对应位置,将通知对应的功能织入,完成完整的代码逻辑运行。</strong></p>
<p><strong>3.AOP 底层使用哪种代理方式</strong></p>
<p><strong>在spring中,框架会根据目标类是否实现了接口来决定采用哪种动态代理的方式。</strong></p>
<h2 id="1-9-知识要点"><a href="#1-9-知识要点" class="headerlink" title="1.9 知识要点"></a>1.9 知识要点</h2><p><strong>aop:面向切面编程</strong></p>
<p><strong>aop底层实现:基于JDK的动态代理和基于Cglib的动态代理</strong></p>
<p><strong>aop的重点概念:</strong></p>
<p><strong>Pointcut (切入点) :被增强的方法</strong></p>
<p><strong>Advice (通知&#x2F;增强) :封装增强业务逻辑的方法</strong></p>
<p><strong>Aspect (切面) :切点+通知</strong></p>
<p><strong>Weaving (织入) :将切点与通知结合的过程</strong></p>
<p><strong>开发明确事项:</strong></p>
<p><strong>谁是切点(切点表达式配置)</strong></p>
<p><strong>谁是通知(切面类中的增强方法)</strong></p>
<p><strong>将切点和通知进行织入配置</strong></p>
<h1 id="2-基于XML的AOP开发"><a href="#2-基于XML的AOP开发" class="headerlink" title="2.基于XML的AOP开发"></a>2.基于XML的AOP开发</h1><h2 id="2-1快速入门"><a href="#2-1快速入门" class="headerlink" title="2.1快速入门"></a>2.1快速入门</h2><p><strong>① 导入AOP相关坐标</strong></p>
<p><strong>②创建目标接口和目标类(内部有切点)</strong></p>
<p><strong>③创建切面类(内部有增强方法)</strong></p>
<p><strong>④将目标类和切面类的对象创建权交给spring</strong></p>
<p><strong>5.在applicationContext.xml中配置织入关系</strong></p>
<p><strong>6测试代码</strong></p>
<h2 id="2-2-XML-配置AOP-详解"><a href="#2-2-XML-配置AOP-详解" class="headerlink" title="2.2 XML 配置AOP 详解"></a>2.2 XML 配置AOP 详解</h2><p><strong>1.切点表达式的写法</strong></p>
<p><strong>表达式语法:</strong></p>
<p><strong>execution([修饰符]返回值类型包名.类名.方法名(参数))</strong></p>
<p><strong>访问修饰符可以省略</strong></p>
<p><strong>返回值类型、包名、类名、方法名可以使用星号*代表任意</strong></p>
<p><strong>包名与类名之间一个点.代表当前包下的类,两个点..表示当前包及其子包下的类</strong></p>
<p><strong>参数列表可以使用两个点..表示任意个数,任意类型的参数列表</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">execution (public void com. ithe ima. aop. Target.method ())</span><br><span class="line">execution (void com.itheima.aop.Target.* (..))</span><br><span class="line">execution (* com.itheima.aop. *.* (..))</span><br><span class="line">execution (* com. itheima. aop..*.* (..))</span><br><span class="line">execution (* *..*.* (..))</span><br></pre></td></tr></table></figure>



<p><strong>2.通知的类型</strong></p>
<p><strong>通知的配置语法:</strong></p>
<p><strong>&lt;aop:通知类型method&#x3D; “切面类中方法名” pointcut&#x3D; “切点表达式”&gt;&lt;&#x2F;aop:通知类型&gt;</strong></p>
<p><strong>名称									标签							说明</strong></p>
<p><strong>前置通知				<a href="aop:before">aop:before</a>						用于配置前置通知。指定增强的方法在切入点方法之前执行</strong></p>
<p><strong>后置通知				<a href="aop:after-returning">aop:after-returning</a>		用于配置后置通知。指定增强的方法在切入点方法之后执行</strong></p>
<p><strong>环绕通知				<a href="aop:around">aop:around</a>						用于配置环绕通知。指定增强的方法在切入点方法之前和之后都执行</strong></p>
<p><strong>异常抛出通知		<a href="aop:throwing">aop:throwing</a>					用于配置异常抛出通知。指定增强的方法在出现异常时执行</strong></p>
<p><strong>最終通知				<a href="aop:after">aop:after</a>							用于配置最终通知。无论增强方式执行是否有异常都会执行</strong></p>
<p><strong>3.切点表达式的抽取</strong></p>
<p><strong>当多个增强的切点表达式相同时,可以将切点表达式进行抽取,在增强中使用pointcut-ref属性代替pointcut属性来引用抽取后的切点表达式。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引用myAspect的Bean为切面对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop</span> <span class="attr">:</span> <span class="attr">aspeat</span> <span class="attr">ref</span>=<span class="string">&quot;myAspeat&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop</span> <span class="attr">:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;myPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution (* com.itheima.aop.*.*(..)) &quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop</span> <span class="attr">:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;myPointcut&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.3 知识要点</strong></p>
<p><strong>.aop织入的配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:</span> <span class="attr">aspect</span> <span class="attr">ref</span>=<span class="string">&quot;切面类&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:</span> <span class="attr">before</span> <span class="attr">method</span>=<span class="string">&quot;通知方法名称&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;切点表达式&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aonfig</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>通知的类型:前置通知、后置通知、环绕通知、异常抛出通知、最终通知.</strong></p>
<p><strong>切点表达式的写法:</strong></p>
<p><strong>execution([修饰符]返回值类型包名.类名.方法名(参数))</strong></p>
<h1 id="3-基于注解的AOP开发"><a href="#3-基于注解的AOP开发" class="headerlink" title="3.基于注解的AOP开发"></a>3.基于注解的AOP开发</h1><h2 id="3-1快速入门"><a href="#3-1快速入门" class="headerlink" title="3.1快速入门"></a>3.1快速入门</h2><p><strong>基于注解的aop开发步骤:</strong></p>
<p><strong>①创建目标接口和目标类(内部有切点)</strong></p>
<p><strong>②创建切面类(内部有增强方法)</strong></p>
<p><strong>③将目标类和切面类的对象创建权交给spring</strong></p>
<p><strong>④在切面类中使用注解配置织入关系</strong></p>
<p><strong>⑤在配置文件中开启组件扫描和AOP的自动代理</strong></p>
<p><strong>6.测试</strong></p>
<h2 id="3-2注解配置AOP-详解"><a href="#3-2注解配置AOP-详解" class="headerlink" title="3.2注解配置AOP 详解"></a>3.2注解配置AOP 详解</h2><p><strong>1.注解通知的类型</strong></p>
<p><strong>通知的配置语法:@通知注解(“切点表达式”)</strong></p>
<p><strong>注解aop开发步骤</strong></p>
<p><strong>①使用@Aspect标注切面类</strong></p>
<p><strong>②使用@通知注解标注通知方法</strong></p>
<p><strong>③在配置文件中配置aop自动代理&lt;aop: aspectj-autoproxy&#x2F;&gt;</strong></p>
<p><strong>名称								注解								说明</strong></p>
<p><strong>前置通知					@Before						用于配置前置通知。指定增强的方法在切入点方法之前执行</strong></p>
<p><strong>后置通知				@AfterReturning			 用于配置后置通知。指定增强的方法在切入点方法之后执行</strong></p>
<p><strong>环绕通知				@Around							用于配置环绕通知。指定增强的方法在切入点方法之前和之后都执行</strong></p>
<p><strong>异常抛出通知		@AfterThrowing 				用于配置异常抛出通知。指定增强的方法在出现异常时执行</strong></p>
<p><strong>最终通知				@After									用于配置最终通知。无论增强方式执行是否有异常都会执行</strong></p>
<p><strong>2.切点表达式的抽取</strong></p>
<p><strong>同xml配置aop一样,我们可以将切点表达式抽取。抽取方式是在切面内定义方法,在该方法上使用@Pointcut注解定义切点表达式,然后在在增强注解中进行引用。具体如下:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> (<span class="string">&quot;myAspeat&quot;</span>)</span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Before</span> (<span class="string">&quot;MyAspect.myPoint () &quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span> <span class="params">()</span>&#123;</span><br><span class="line">        System.out.println (<span class="string">&quot;前置代码增强....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Pointcut</span> (<span class="string">&quot;exeoution (* com.itheima.aop.*.* (..))&quot;</span>)</span><br><span class="line">    publio <span class="keyword">void</span> <span class="title function_">myPoint</span> <span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1-编程式事务控制相关对象"><a href="#1-编程式事务控制相关对象" class="headerlink" title="1.编程式事务控制相关对象"></a>1.编程式事务控制相关对象</h1><h2 id="1-1-PlatformTransactionManager"><a href="#1-1-PlatformTransactionManager" class="headerlink" title="1.1 PlatformTransactionManager"></a>1.1 PlatformTransactionManager</h2><p><strong>PlatformTransactionManager 接口是spring 的事务管理器,它里面提供了我们常用的操作事务的方法。</strong></p>
<p><strong>平台事务管理器</strong></p>
<p><strong>方法																									说明</strong></p>
<p><strong>Transactionstatus																		获取事务的状态信息</strong></p>
<p><strong>getTransaction (TransactionDefination defination)</strong></p>
<p>​			</p>
<p><strong>void commit (Transactionstatus status)								提交事务</strong></p>
<p><strong>void rollback (Transactionstatus status)								回滚事务</strong></p>
<p><strong>注意</strong>:</p>
<p><strong>PlatformTransactionManager 是接口类型,不同的Dao层技术则有不同的实现类,</strong></p>
<p>**例如: **</p>
<p><strong>Dao层技术是jdbc或mybatis 时: org.springframework.jdbc.datasource. DatasourcetransactionManager</strong></p>
<p><strong>Dao 层技术是hibernatel: org.springframework.orm.hibernate5.HibernateTransactionManager</strong></p>
<h2 id="1-2-TransactionDefinition"><a href="#1-2-TransactionDefinition" class="headerlink" title="1.2 TransactionDefinition"></a>1.2 TransactionDefinition</h2><p><strong>TransactionDefinition是事务的定义信息对象,里面有如下方法:</strong></p>
<p><strong>事务定义</strong></p>
<p><strong>方法																		说明</strong></p>
<p><strong>int getIsolationLevel ()								获得事务的隔离级别</strong></p>
<p><strong>int getPropogationBehavior ()				  获得事务的传播行为</strong></p>
<p><strong>int gettimeout ()										  获得超时时间</strong></p>
<p><strong>boolean isReadOnly()								 是否只读</strong></p>
<p><strong>1.事务隔离级别</strong></p>
<p><strong>设置隔离级别,可以解决事务并发产生的问题,如脏读、不可重复读和虚读。</strong></p>
<p><strong>ISOLATION_DEFAULT</strong></p>
<p><strong>ISOLATION_READ_UNCOMMITTED</strong></p>
<p><strong>ISOLATION_READ_COMMITTED</strong></p>
<p><strong>ISOLATION_REPEATABLE_READ</strong></p>
<p><strong>ISOLATION_SERIALIZABLE</strong></p>
<p><strong>2.事务传播行为</strong></p>
<p><strong>REQUIRED:如果当前没有事务,就新建一个事务,如果已经存在一个事务中,加入到这个事务中。一般的选择(默认值).</strong> </p>
<p><strong>SUPPORTS:支持当前事务,如果当前没有事务,就以非事务方式执行(没有事务)</strong></p>
<p><strong>MANDATORY:使用当前的事务,如果当前没有事务,就抛出异常.</strong></p>
<p><strong>REQUERS_NEW:新建事务,如果当前在事务中,把当前事务挂起。.</strong> </p>
<p><strong>NOT SUPPORTED:以非事务方式执行操作,如果当前存在事务,就把当前事务挂起.</strong></p>
<p><strong>NEVER:以非事务方式运行,如果当前存在事务,抛出异常.</strong></p>
<p><strong>NESTED:如果当前存在事务,则在嵌套事务内执行。如果当前没有事务,则执行REQUIRED类似的操作</strong></p>
<p><strong>超时时间:默认值是-1,没有超时限制。如果有,以秒为单位进行设置</strong></p>
<p><strong>是否只读:建议查询时设置为只读</strong></p>
<h2 id="1-3-TransactionStatus"><a href="#1-3-TransactionStatus" class="headerlink" title="1.3 TransactionStatus"></a>1.3 TransactionStatus</h2><p><strong>TransactionStatus接口提供的是事务具体的运行状态,方法介绍如下。</strong></p>
<p><strong>方法																			说明</strong></p>
<p><strong>boolean hassavepoint ()								是否存储回滚点</strong></p>
<p><strong>boolean iscompleted ()								事务是否完成</strong></p>
<p><strong>boolean isNewrransaction ()						是否是新事务</strong></p>
<p><strong>boolean isRollbackonly ()								事务是否回滚</strong></p>
<h2 id="1-4知识要点"><a href="#1-4知识要点" class="headerlink" title="1.4知识要点"></a>1.4知识要点</h2><p><strong>编程式事务控制三大对象</strong></p>
<p><strong>PlatformTransactionManager   	接口只定义行为</strong></p>
<p><strong>TransactionDefinition   					封装事务参数</strong></p>
<p><strong>TransactionStatu							被动封装状态信息</strong></p>
<h1 id="2-基于XML的声明式事务控制"><a href="#2-基于XML的声明式事务控制" class="headerlink" title="2.基于XML的声明式事务控制"></a>2.基于XML的声明式事务控制</h1><h2 id="2-1什么是声明式事务控制"><a href="#2-1什么是声明式事务控制" class="headerlink" title="2.1什么是声明式事务控制"></a>2.1什么是声明式事务控制</h2><p><strong>Spring的声明式事务顾名思义就是采用 <u>声明的方式来处理事务</u> 。这里所说的声明,就是指在配置文件中声明用在Spring配置文件中声明式的处理事务来代替代码式的处理事务。</strong></p>
<h2 id="声明式事务处理的作用"><a href="#声明式事务处理的作用" class="headerlink" title="声明式事务处理的作用"></a><strong>声明式事务处理的作用</strong></h2><p><strong>事务管理不侵入开发的组件。具体来说,业务逻辑对象就不会意识到正在事务管理之中,事实上也应该如此,因为事务管理是属于系统层面的服务,而不是业务逻辑的一部分,如果想要改变事务管理策划的话,也只需要在定义文件中重新配置即可</strong></p>
<p><strong>在不需要事务管理的时候,只要在设定文件上修改一下,即可移去事务管理服务,无需改变代码重新编译,这样维护起来极其方便</strong></p>
<p><strong>注意: Spring声明式事务控制底层就是AOP</strong></p>
<h2 id="2-2声明式事务控制的实现"><a href="#2-2声明式事务控制的实现" class="headerlink" title="2.2声明式事务控制的实现"></a>2.2声明式事务控制的实现</h2><p><strong>声明式事务控制明确事项:.</strong></p>
<p><strong>谁是切点?.</strong></p>
<p><strong>谁是通知?.</strong></p>
<p><strong>配置切面?</strong></p>
<h2 id="2-3切点方法的事务参数的配置"><a href="#2-3切点方法的事务参数的配置" class="headerlink" title="2.3切点方法的事务参数的配置"></a>2.3切点方法的事务参数的配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--事务增强配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot; transactionManager &quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:me</span> <span class="attr">thod</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>其中,<a href="tx:method">tx:method</a>代表切点方法的事务参数的配置,例如:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot; transfer&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;REPEATABLE_READ&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">timeout</span>=<span class="string">&quot;-1&quot;</span><span class="attr">read-only</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>name:切点方法名称</strong></p>
<p><strong>isolation:事务的离级别</strong></p>
<p><strong>propogation: 事务的传播行为</strong></p>
<p><strong>timeout:超时时间</strong></p>
<p><strong>read-only: 是否只读</strong></p>
<h2 id="2-4知识要点"><a href="#2-4知识要点" class="headerlink" title="2.4知识要点"></a>2.4知识要点</h2><p><strong>声明式事务控制的配置要点</strong></p>
<p><strong>平台事务管理器配置.</strong></p>
<p><strong>事务通知的配置.</strong></p>
<p><strong>事务aop织入的配置</strong></p>
<h1 id="3-基于注解的声明式事务控制"><a href="#3-基于注解的声明式事务控制" class="headerlink" title="3.基于注解的声明式事务控制"></a>3.基于注解的声明式事务控制</h1><h2 id="3-2注解配置声明式事务控制解析"><a href="#3-2注解配置声明式事务控制解析" class="headerlink" title="3.2注解配置声明式事务控制解析"></a>3.2注解配置声明式事务控制解析</h2><p><strong>①使用@Transactional在需要进行事务控制的类或是方法上修饰,注解可用的属性同xml配置方式,例如隔离级别、传播行为等。</strong></p>
<p><strong>②注解使用在类上,那么该类下的所有方法都使用同一套注解参数配置。</strong></p>
<p><strong>3.在方法上,不同的方法可以采用不同的事务参数配置。</strong></p>
<p><strong>④ Xml配置文件中要开启事务的注解驱动&lt;tx: annotation-driven &#x2F;&gt;</strong></p>
<h2 id="3-3知识要点"><a href="#3-3知识要点" class="headerlink" title="3.3知识要点"></a>3.3知识要点</h2><p><strong>注解声明式事务控制的配置要点.</strong></p>
<p><strong>平台事务管理器配置(xml方式).</strong></p>
<p><strong>事务通知的配置(@Transactional注解配置).</strong></p>
<p><strong>事务注解驱动的配置&lt;tx: annotation-driven&#x2F;&gt;</strong></p>
<h1 id="1-Mybatis简介"><a href="#1-Mybatis简介" class="headerlink" title="1.Mybatis简介"></a>1.Mybatis简介</h1><h2 id="1-1原始jdbc操作-查询数据"><a href="#1-1原始jdbc操作-查询数据" class="headerlink" title="1.1原始jdbc操作(查询数据)"></a>1.1原始jdbc操作(查询数据)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册驱动</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"><span class="comment">//获得连接</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url: <span class="string">&quot;jdbc: mysql:///test&quot;</span>, user: <span class="string">&quot;root&quot;</span>, password: <span class="string">&quot;root&quot;</span>);</span><br><span class="line"><span class="comment">//获得statement</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.prepareStatement( sql: <span class="string">&quot;select id, username, password from user&quot;</span>);</span><br><span class="line"><span class="comment">//执行查询</span></span><br><span class="line">ResultSet resultSet= statement.executeQuery();</span><br><span class="line"><span class="comment">//遍历结果集</span></span><br><span class="line"><span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">    <span class="comment">//封装实体</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(resultSet.getInt( columnLabel: <span class="string">&quot;id&quot;</span>));</span><br><span class="line">    user.setUsername (resultSet.getString( columnLabel: <span class="string">&quot;username&quot;</span>));</span><br><span class="line">    user.setPassword(resultSet.getString( columnLabel: <span class="string">&quot;password&quot;</span>));</span><br><span class="line">    <span class="comment">//user实体封装完毕</span></span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//释放资源</span></span><br><span class="line">resultSet.close();</span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>

<h2 id="1-1原始jdbc操作-插入数据"><a href="#1-1原始jdbc操作-插入数据" class="headerlink" title="1.1原始jdbc操作(插入数据)"></a>1.1原始jdbc操作(插入数据)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模拟实体对象</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setId(<span class="number">2</span>);</span><br><span class="line">user.setUsername(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">user, setPassword(<span class="string">&quot;lucy&quot;</span>)</span><br><span class="line">    <span class="comment">//注册驱动</span></span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"><span class="comment">//获得连接</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection( url: <span class="string">&quot;jdbc:mysql:///test&quot;</span>, user: <span class="string">&quot;root&quot;</span>, password: <span class="string">&quot;root&quot;</span>);</span><br><span class="line"><span class="comment">//获得statement</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.prepareStatement( sgl: <span class="string">&quot;insert into user(id, username, password) values(?,?,?)&quot;</span>);</span><br><span class="line"><span class="comment">//设置占位符参数</span></span><br><span class="line">statement. setInt( parameterlndex: <span class="number">1</span>, user-getId());</span><br><span class="line">statement. setString( parameterlndex: <span class="number">2</span>,user.getUsername());</span><br><span class="line">statement,setString( parameterlndexc: <span class="number">3</span>,user.getPassword());</span><br><span class="line"><span class="comment">//执行更新操作</span></span><br><span class="line">statement.executeUpdate();</span><br><span class="line"><span class="comment">//释放资源</span></span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>



<h2 id="1-2原始jdbc操作的分析"><a href="#1-2原始jdbc操作的分析" class="headerlink" title="1.2原始jdbc操作的分析"></a>1.2原始jdbc操作的分析</h2><p><strong>原始jdbc开发存在的问题如下:</strong></p>
<p><strong>①数据库连接创建、释放频繁造成系统资源浪费从而影响系统性能</strong></p>
<p><strong>② sql 语句在代码中硬编码,造成代码不易维护,实际应用sql变化的可能较大, sql变动需要改变java代码。</strong></p>
<p><strong>③查询操作时,需要手动将结果集中的数据手动封装到实体中。插入操作时,需要手动将实体的数据设置到sql语句的占位,符位置</strong></p>
<p><strong>应对上述问题给出的解决方案:</strong></p>
<p><strong>①使用数据库连接池初始化连接资源</strong></p>
<p><strong>②将sql语句抽取到xml配置文件中</strong></p>
<p><strong>③使用反射、内省等底层技术,自动将实体与表进行属性与字段的自动映射</strong></p>
<h2 id="1-3-什么是Mybatis"><a href="#1-3-什么是Mybatis" class="headerlink" title="1.3 什么是Mybatis"></a>1.3 什么是Mybatis</h2><p><strong>. mybatis 是一个优秀的基于java的持久层框架,它内部封装了jdbc,使开发者只需要关注sql语句本身,而不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程。</strong></p>
<p><strong>. mybatis通过xml或注解的方式将要执行的各种statement配置起来,并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句。</strong></p>
<p><strong>.最后mybatis框架执行sql并将结果映射为java对象并返回。采用ORM思想解决了实体和数据库映射的问题,对jdbc进行了封装,屏蔽了jdbcapi底层访问细节,使我们不用与jdbcapi打交道,就可以完成对数据库的持久化操作。</strong></p>
<h1 id="2-Mybatis的快速入门"><a href="#2-Mybatis的快速入门" class="headerlink" title="2.Mybatis的快速入门"></a>2.Mybatis的快速入门</h1><h2 id="2-1-MyBatis开发步骤"><a href="#2-1-MyBatis开发步骤" class="headerlink" title="2.1 MyBatis开发步骤"></a>2.1 MyBatis开发步骤</h2><p><strong>MyBatis官网地址: <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/">http://www.mybatis.org/mybatis-3/</a></strong></p>
<p><strong>MyBatis开发步骤:</strong></p>
<p><strong>①添加MyBatis的坐标</strong></p>
<p><strong>②创建user数据表</strong></p>
<p><strong>③编写User实体类</strong></p>
<p><strong>④编写映射文件UserMapper.xml</strong></p>
<p><strong>⑤编写核心文件SqlMapConfig.xml</strong></p>
<p><strong>6.编写测试类</strong></p>
<h2 id="2-2-环境搭建"><a href="#2-2-环境搭建" class="headerlink" title="2.2 环境搭建"></a>2.2 环境搭建</h2><p><strong>1.导入MyBatis的坐标和其他相关坐标</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//mybatis坐标</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.27<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">//mysql驱动坐标</span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--单元测试坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependenoy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifaatId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2环境搭建"><a href="#2-2环境搭建" class="headerlink" title="2.2环境搭建"></a>2.2环境搭建</h2><p><strong>2.创建user数据表</strong></p>
<p><strong>3.编写User实体</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"><span class="comment">//省略get个set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4.编写UserMapper映射文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;userMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">        select * from User </span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>5.编写MyBatis核心文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">           	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///test&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">       		<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/itheima/mapper/UserMapper.xml&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3编写测试代码"><a href="#2-3编写测试代码" class="headerlink" title="2.3编写测试代码"></a>2.3编写测试代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载核心配置文件</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line"><span class="comment">//获得sqlSession 工厂对象</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactry</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line"><span class="comment">//获得sqlSession对象</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//执行sql语句</span></span><br><span class="line">List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;userMapper.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//打印结果</span></span><br><span class="line">System.out.println(userList);</span><br><span class="line"><span class="comment">//释放资源</span></span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure>



<h2 id="2-4知识小结"><a href="#2-4知识小结" class="headerlink" title="2.4知识小结"></a>2.4知识小结</h2><p><strong>MyBatis开发步骤:</strong></p>
<p><strong>①添加MyBatis的坐标</strong></p>
<p><strong>②创建user数据表</strong></p>
<p><strong>③编写User实体类</strong></p>
<p><strong>④编写映射文件UserMapper.xml</strong></p>
<p><strong>⑤编写核心文件SqlMapConfig.xml</strong></p>
<p><strong>6编写测试类</strong> </p>
<h1 id="4-MyBatis的增删改查操作"><a href="#4-MyBatis的增删改查操作" class="headerlink" title="4.MyBatis的增删改查操作"></a>4.MyBatis的增删改查操作</h1><h2 id="4-1-MyBatis的插入数据操作"><a href="#4-1-MyBatis的插入数据操作" class="headerlink" title="4.1 MyBatis的插入数据操作"></a>4.1 MyBatis的插入数据操作</h2><p><strong>3.插入操作注意问题</strong></p>
<p><strong>插入语句使用insert标签</strong></p>
<p><strong>在映射文件中使用parameterType属性指定要插入的数据类型</strong></p>
<p><strong>Sql语句中使用#[实体属性名)方式引用实体中的属性值</strong></p>
<p><strong>插入操作使用的API是sqlSession.insert( “命名空间.id”,实体对象);</strong></p>
<p><strong>插入操作涉及数据库数据变化,所以要使用sqlSession对象显示的提交事务,即sqlSession.commit)</strong></p>
<h2 id="4-2-MyBatis的修改数据操作"><a href="#4-2-MyBatis的修改数据操作" class="headerlink" title="4.2 MyBatis的修改数据操作"></a>4.2 MyBatis的修改数据操作</h2><p><strong>1.编写UserMapper映射文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;userMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">     update user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125; </span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.编写修改实体User的代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得核心配置文件</span></span><br><span class="line">      <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;sqlMapConfig.xml&quot;</span>);</span><br><span class="line"><span class="comment">//获得session工厂对象</span></span><br><span class="line">      <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">      <span class="comment">//获得session会话对象</span></span><br><span class="line">      SqlSession sqlSession=sqlSessionFactory.openSession();</span><br><span class="line">      <span class="comment">//执行操作 参数：namespace+id</span></span><br><span class="line">      sqlSession.update(<span class="string">&quot;userMapper.update&quot;</span>,user);</span><br><span class="line">      <span class="comment">//mybatis执行更新操作  除了查询都需要提交事务</span></span><br><span class="line">      sqlSession.commit();</span><br><span class="line">      <span class="comment">//释放资源</span></span><br><span class="line">      sqlSession.close();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.修改操作注意问题</strong></p>
<p><strong>修改语句使用update标签</strong></p>
<p><strong>修改操作使用的API是sqlSession.update( “命名空间.id”,实体对象);</strong></p>
<h2 id="4-3-MyBatis的删除数据操作"><a href="#4-3-MyBatis的删除数据操作" class="headerlink" title="4.3 MyBatis的删除数据操作"></a>4.3 MyBatis的删除数据操作</h2><p><strong>3.删除操作注意问题</strong></p>
<p><strong>删除语句使用delete标签</strong></p>
<p><strong>Sql语句中使用#(任意字符串)方式引用传递的单个参数</strong></p>
<p><strong>删除操作使用的API是sqlSession.delete(“命名空间.id” ,Object);</strong></p>
<h2 id="4-4知识小结增删改查映射配置与API"><a href="#4-4知识小结增删改查映射配置与API" class="headerlink" title="4.4知识小结增删改查映射配置与API:"></a>4.4知识小结增删改查映射配置与API:</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">查询数据:</span><br><span class="line">List<span class="tag">&lt;<span class="name">User</span>&gt;</span> userList = sqlsession.selectList (&quot;userMapper.findAll&quot;);</span><br><span class="line">    <span class="tag">&lt;<span class="name">seleat</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima. domain.User&quot;</span>&gt;</span></span><br><span class="line">        select * from User </span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">添加数据: </span><br><span class="line">    sqlsession.insert (&quot;userMapper.add&quot;, user);</span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.itheima, domain. User&quot;</span>&gt;</span> </span><br><span class="line">        insert into user values (#(id), #(username), #[password)) <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">修改数据: </span><br><span class="line">    sqlSession.update (&quot;userMapper. update&quot;, user);</span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot; com.itheima. domain.User&quot;</span>&gt;</span></span><br><span class="line">        update user set username=# &#123;username&#125;, password=# &#123;password&#125; where id=#&#123;id&#125; </span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">删除数据: </span><br><span class="line">    sqlsession.delete (&quot;userMapper.delete&quot;,3);</span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang. Integer&quot;</span>&gt;</span></span><br><span class="line">        delete from user where id=# &#123;id&#125; </span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="5-1-MyBatis核心配置文件层级关系"><a href="#5-1-MyBatis核心配置文件层级关系" class="headerlink" title="5.1 MyBatis核心配置文件层级关系"></a>5.1 MyBatis核心配置文件层级关系</h2><p><strong>configuration 配置</strong></p>
<p><strong>。properties 属性</strong></p>
<p><strong>。settings设置</strong></p>
<p><strong>。typeAliases 类型别名</strong></p>
<p><strong>。typeHandlers 类型处理器</strong></p>
<p><strong>。objectFactory 对象工厂plugins 插件</strong></p>
<p><strong>。environments 环境</strong></p>
<p>​		<strong>..environment 环境变量</strong></p>
<p>​			<strong>…transactionManager 事务管理器</strong></p>
<p>​			<strong>…dataSource数据源</strong></p>
<p><strong>。databaseldProvider数据库厂商标识</strong></p>
<p><strong>。mappers 映射器</strong></p>
<h2 id="5-2-MyBatis常用配置解析"><a href="#5-2-MyBatis常用配置解析" class="headerlink" title="5.2 MyBatis常用配置解析"></a>5.2 MyBatis常用配置解析</h2><p><strong>1.environments标签</strong></p>
<p><strong>数据库环境的配置,支持多环境配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  配置数据源的环境  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span> 		//指定默认的环境名称</span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span>			//指定当前环境的名称</span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span>	//指定事务管理类型是jdbc</span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span> 			//指定当前数据源类型是连接池</span><br><span class="line">                //数据源配置的基本参数</span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>其中,事务管理器(transactionManager)类型有两种:</strong></p>
<p><strong>JDBC:这个配置就是直接使用了JDBC的提交和回滚设置,它依赖于从数据源得到的连接来管理事务作用域。</strong></p>
<p><strong>MANAGED:这个配置几乎没做什么。它从来不提交或回滚一个连接,而是让容器来管理事务的整个生命周期(比如JEE应用服务器的上下文) 。默认情况下它会关闭连接,然而一些容器并不希望这样,因此需要将closeConnection属性设置为false来阻止它默认的关闭行为。</strong></p>
<p><strong>其中,数据源(dataSource)类型有三种:</strong></p>
<p><strong>UNPOOLED:这个数据源的实现只是每次被请求时打开和关闭连接。</strong></p>
<p><strong>POOLED:这种数据源的实现利用“池”的概念将JDBC连接对象组织起来。</strong></p>
<p><strong>JNDI:这个数据源的实现是为了能在如EJB或应用服务器这类容器中使用,容器可以集中或在外部配置数据源,然后放置一个JNDI上下文的引用。</strong></p>
<p><strong>2.mapper标签</strong></p>
<p><strong>该标签的作用是加载映射的,加载方式有如下几种:</strong></p>
<p><strong>使用相对类路径的资源引用,例如: <mapper resource="org/mybatis/builder/AuthorMapper.xml"/></strong></p>
<p><strong>使用完全限定资源定位符(URL) ,例如: <mapper url="file:///var/mappers/AuthorMapper.xml"/></strong></p>
<p><strong>使用映射器接口实现类的完全限定类名,例如: <mapper class="org.mybatis.builder.AuthorMapper"/></strong></p>
<p><strong>将包内的映射器接口实现全部注册为映射器,例如: <package name="org.mybatis.builder"/></strong></p>
<p><strong>3.Properties标签</strong></p>
<p><strong>实际开发中,习惯将数据源的配置信息单独抽取成一个properties文件,该标签可以加载额外配置的properties文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载外部proponties--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc, password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>



<h2 id="5-2-MyBatis常用配置解析-1"><a href="#5-2-MyBatis常用配置解析-1" class="headerlink" title="5.2 MyBatis常用配置解析"></a>5.2 MyBatis常用配置解析</h2><p><strong>4.typeAliases标签</strong></p>
<p><strong>类型别名是为Java类型设置一个短的名字。原来的类型名称配置如下</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    select * from User </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span>							//User全限定名称</span><br></pre></td></tr></table></figure>

<p><strong>配置typeAliases, 为com.itheima.domain.User定义別名为user</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;selectid=&quot;findAll&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">    select * from User</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span>						//user为别名</span><br></pre></td></tr></table></figure>



<p><strong>4.typeAliases标签</strong></p>
<p><strong>上面我们是自定义的别名, mybatis框架已经为我们设置好的一些常用的类型的别名</strong></p>
<p><strong>别名				数据类型</strong></p>
<p><strong>string				  	String</strong></p>
<p><strong>long						Long</strong></p>
<p><strong>int							Integer</strong></p>
<p><strong>double					Double</strong></p>
<p><strong>boolean			     Boolean</strong></p>
<h2 id="5-3知识小结"><a href="#5-3知识小结" class="headerlink" title="5.3知识小结"></a>5.3知识小结</h2><p><strong>核心配置文件常用配置:</strong></p>
<p><strong>1.properties标签:该标签可以加载外部的properties文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>2.typeAliases标签:设置类型别名</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>3.mappers标签:加载映射配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot; com/itheima/mapper/UserMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>核心配置文件常用配置:</strong></p>
<p><strong>4, environments标签:数据源环境配置标签</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc, password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="6-MyBatis相应API"><a href="#6-MyBatis相应API" class="headerlink" title="6.MyBatis相应API"></a>6.MyBatis相应API</h1><h2 id="6-1-SqlSessionI厂构建器SqlSessionFactoryBuilder"><a href="#6-1-SqlSessionI厂构建器SqlSessionFactoryBuilder" class="headerlink" title="6.1 SqlSessionI厂构建器SqlSessionFactoryBuilder"></a>6.1 SqlSessionI厂构建器SqlSessionFactoryBuilder</h2><p><strong>常用API: SqlSessionFactory build(InputStream inputStream)</strong></p>
<p><strong>通过加载mybatis的核心文件的输入流的形式构建一个SqISessionFactory对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">string</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;org/mybatis/builder/mybatis-config.xml&quot;</span>;</span><br><span class="line"><span class="type">Inputstream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream (resource);</span><br><span class="line"><span class="type">SqlsessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span> ();</span><br><span class="line"><span class="type">SqlsessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build (inputstream);</span><br></pre></td></tr></table></figure>

<p><strong>其中, Resources T具类,这个类在org.apache.ibatis.io包中。Resources类帮助你从类路径下、文件系统或一个web URL中加载资源文件。</strong></p>
<h2 id="6-2-SqlSession工厂对象SqlSessionFactory"><a href="#6-2-SqlSession工厂对象SqlSessionFactory" class="headerlink" title="6.2 SqlSession工厂对象SqlSessionFactory"></a>6.2 SqlSession工厂对象SqlSessionFactory</h2><p><strong>SqlSessionFactory有多个个方法创建SqlSession实例。常用的有如下两个:</strong></p>
<p>​	<strong>方法																				解释</strong></p>
<p><strong>openSession()									会默认开启一个事务,但事务不会自动提交,也就意味着需要手动提交该事务,更新操作数据才会持久化到数据库中</strong></p>
<p><strong>openSession(booleanautoCommit)			参数为是否自动提交,如果设置为true,那么不需要手动提交事务</strong></p>
<h2 id="6-3-SqlSession会话对象"><a href="#6-3-SqlSession会话对象" class="headerlink" title="6.3 SqlSession会话对象"></a>6.3 SqlSession会话对象</h2><p><strong>SqlSession实例在MyBatis中是非常强大的一个类。在这里你会看到所有执行语句、提交或回滚事务和获取映射器实例的方法。执行语句的方法主要有:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; T <span class="title function_">selectone</span> <span class="params">(string statement, Object parameter)</span></span><br><span class="line">&lt;E&gt; List&lt;E&gt; <span class="title function_">selectList</span> <span class="params">(String statement, Object parameter)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span> <span class="params">(String statement, Object parameter)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span> <span class="params">(String statement, Object parameter)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span> <span class="params">(String statement, Object parameter)</span></span><br></pre></td></tr></table></figure>

<p><strong>操作事务的方法主要有;</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span></span><br></pre></td></tr></table></figure>





<h1 id="1-Mybatis的Dao层实现"><a href="#1-Mybatis的Dao层实现" class="headerlink" title="1.Mybatis的Dao层实现"></a>1.Mybatis的Dao层实现</h1><p><strong>1.1传统开发方式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>编写UserDao接口</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">find11</span> <span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-2代理开发方式"><a href="#1-2代理开发方式" class="headerlink" title="1.2代理开发方式"></a>1.2代理开发方式</h2><p><strong>1.代理开发方式介绍</strong></p>
<p><strong>采用Mybatis的代理开发方式实现DAO层的开发,这种方式是我们后面进入企业的主流。</strong></p>
<p><strong>Mapper接口开发方法只需要程序员编写Mapper接口(相当于Dao接口) ,由Mybatis框架根据接口定义创建接口的动态代理对象,代理对象的方法体同上边Dao接口实现类方法。</strong></p>
<p><strong>Mapper接口开发需要遵循以下规范:</strong></p>
<p><strong>1.Mapper.xml文件中的namespace与mapper接口的全限定名相同</strong></p>
<p><strong>2.Mapper接口方法名和Mapper.xml中定义的每个statement的id相同</strong></p>
<p><strong>3.Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同</strong></p>
<p><strong>4.Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</strong> </p>
<p><strong>2.编写UserMapper接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line"></span><br><span class="line"> User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span> ;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&#x27;com.itheima.mapper.UserMapper&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">findById</span> <span class="attr">parameterType</span>=<span class="string">&#x27;int&#x27;</span>  <span class="attr">resultType</span>=<span class="string">user</span>&gt;</span></span><br><span class="line">    select * from User where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-测试代理方式"><a href="#3-测试代理方式" class="headerlink" title="3.测试代理方式"></a>3.测试代理方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProxyDao</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//获得MyBatis框架生成的UserMapper接口的实现类</span></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.findByld(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="1-3知识小结"><a href="#1-3知识小结" class="headerlink" title="1.3知识小结"></a>1.3知识小结</h2><p><strong>mybatis的Dao层实现的两种方式:.</strong></p>
<p><strong>手动对Dao进行实现:传统开发方式.</strong></p>
<p><strong>代理方式对Dao进行实现:</strong></p>
<p><strong>UserMapper userMapper &#x3D; sqlSession.getMapper (UserMapper.class);</strong></p>
<h1>1.MyBatis映射文件深入</h1>

<h2>1.1 动态sql语句</h2>

<p><strong>1.动态sql语句概述</strong></p>
<p><strong>Mybatis的映射文件中,前面我们的SQL都是比较简单的,有些时候业务逻辑复杂时,我们的SQL是动态变化的,此时在前面的学习中我们的SQL就不能满足要求了。参考的官方文档,描述如下:</strong></p>
<p><strong>if</strong></p>
<p><strong>choose(when ,otherwise)</strong></p>
<p><strong>trim(where ,set)</strong></p>
<p><strong>foreach</strong></p>
<h1>1.MyBatis映射文件深入</h1>

<p><strong>2.动态SQL之<if></strong></p>
<p><strong>我们根据实体类的不同取假,使用不同的SQL语句来进行查询。比如在id如果不为空时可以根据id查询,如果username不同空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常会碰到。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByCondition&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    select * from User</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="line">            and id=#[id)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="line">            and username=#(username) </span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>3.动态 SQL 之<foreach></strong></p>
<p><em><em>循环执行sql的拼接操作,例如: SELECT</em> FROM USER WHERE id IN (1,2,5),</em>*</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot; findByIds&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    select * from User</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">colleation</span>=<span class="string">&quot;array&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;) &quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-2-SQL片段抽取"><a href="#1-2-SQL片段抽取" class="headerlink" title="1.2 SQL片段抽取"></a>1.2 SQL片段抽取</h2><p><strong>sql中可将重复的sql 提取出来,使用时用include引用即可,最终达到sql重用的目的</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--抽取sql片段简化编写--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">select</span> * <span class="attr">from</span> <span class="attr">User</span>&lt;/<span class="attr">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByld&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span>where id=#(id) </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">&lt;selectid=&quot;findBylds&quot; parameterType=&quot;list&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectUser&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">open</span>=<span class="string">&quot;id in(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #(id)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2>1.3知识小结</h2>

<p><strong>MyBatis映射文件配置:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span>:查询</span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span>&gt;</span> :插入</span><br><span class="line">        <span class="tag">&lt;<span class="name">update</span>&gt;</span>:修改</span><br><span class="line">            <span class="tag">&lt;<span class="name">delete</span>&gt;</span>:删除</span><br><span class="line">                <span class="tag">&lt;<span class="name">where</span>&gt;</span>: where条件</span><br><span class="line">                    <span class="tag">&lt;<span class="name">if</span>&gt;</span>: if判断</span><br><span class="line">                        <span class="tag">&lt;<span class="name">foreach</span>&gt;</span>:循环</span><br><span class="line">                            <span class="tag">&lt;<span class="name">sql</span>&gt;</span>: sql片段抽取</span><br></pre></td></tr></table></figure>



<h1 id="1-MyBatis核心配置文件深入"><a href="#1-MyBatis核心配置文件深入" class="headerlink" title="1.MyBatis核心配置文件深入"></a>1.MyBatis核心配置文件深入</h1><h2 id="1-1-typeHandlers标签"><a href="#1-1-typeHandlers标签" class="headerlink" title="1.1 typeHandlers标签"></a>1.1 typeHandlers标签</h2><p><strong>无论是MyBatis在预处理语句(PreparedStatement)中设置一个参数时,还是从结果集中取出一个值时,都会用类型处理器将获取的值以合适的方式转换成Java类型。下表描述了一些默认的类型处理器(截取部分)。</strong></p>
<p><strong>类型处理器										Java 类型													JDBC 类型</strong></p>
<p><strong>BooleanTypeHandler				Java. lang. Boolean, boolean					数据库兼容的BOOLEAN</strong></p>
<p><strong>ByteTypeHandler					 java. lang. Byte.byte									数据库兼容的NUMERIC或BYTE</strong></p>
<p><strong>ShortTypeHandler					Java. lang.Short,short								数据库兼容的NUMERIC 或 SHORT INTEGER</strong></p>
<p><strong>IntegerTypeHedler					java.lang.integer,int								数据库兼容的NUMERIC 或INTEGER</strong></p>
<p><strong>LongTypeHeer							Java. lang. Long, long								数据库兼容的NULERIC 或 LONG INTEGER</strong> </p>
<p><strong>你可以重写类型处理器或创建你自己的类型处理器来处理不支持的或非标准的类型。具体做法为:实现org.apache.ibatis.type.TypeHandler 接口,或继承一个很便利的类 org.apache.ibatis.type.BaseTypeHandler, 然后可以选择性地将它映射到一个JDBC类型。例如需求:一个Java中的Date数据类型,我想将之存到数据库的时候存成一个1970年至今的毫秒数,取出来时转换成jäva的Date, 即java的Date与数据库的varchar毫秒值之间转换。</strong></p>
<p><strong>开发步骤:</strong></p>
<p><strong>①定义转换类继承类BaseTypeHandler<T></strong></p>
<p><strong>②覆盖4个未实现的方法,其中setNonNullParameter为java程序设置数据到数据库的回调方法, getNullableResult为查询时mysql的字符串类型转换成java的Type类型的方法</strong></p>
<p><strong>③在MyBatis核心配置文件中进行注册</strong></p>
<p><strong>④测试转换是否正确</strong></p>
<h2 id="1-2-plugins标签"><a href="#1-2-plugins标签" class="headerlink" title="1.2 plugins标签"></a>1.2 plugins标签</h2><p><strong>MyBatis可以使用第三方的插件来对功能进行扩展,分页助手PageHelper是将分页的复杂操作进行封装,使用简单的方式即可获得分页的相关数据</strong></p>
<p><strong>开发步骤:</strong></p>
<p><strong>①导入通用PageHelper的坐标</strong></p>
<p><strong>② 在mybatis核心配置文件中配置PageHelper插件</strong></p>
<p><strong>③测试分页数据获取</strong></p>
<h2 id="1-3知识小结-1"><a href="#1-3知识小结-1" class="headerlink" title="1.3知识小结"></a>1.3知识小结</h2><p><strong>MyBatis核心配置文件常用标签:</strong></p>
<p><strong>1.properties标签:该标签可以加载外部的properties文件</strong></p>
<p><strong>2.typeAliases标签:设置类型别名</strong></p>
<p><strong>3.environments标签:数据源环境配置标签</strong></p>
<p><strong>4.typeHandlers标签:配置自定义类型处理器</strong></p>
<p><strong>5.plugins标签:配置MyBatis的插件</strong> </p>
<h1 id="1-Mybatis多表查询"><a href="#1-Mybatis多表查询" class="headerlink" title="1.Mybatis多表查询"></a>1.Mybatis多表查询</h1><h2 id="1-1一对一查询"><a href="#1-1一对一查询" class="headerlink" title="1.1一对一查询"></a>1.1一对一查询</h2><p><strong>1.一对一查询的模型</strong></p>
<p><strong>用户表和订单表的关系为,一个用户有多个订单,一个订单只从属于一个用户一对一查询的需求:查询一个订单,与此同时查询出该订单所属的用户</strong></p>
<p><strong>ordersuser</strong></p>
<p><strong>id: int</strong></p>
<p><strong>ordertime: varchar(255)</strong></p>
<p> <strong>total: double</strong></p>
<p><strong>uid: int</strong></p>
<p><strong>id: int</strong></p>
<p><strong>user</strong></p>
<p><strong>username: varchar(50)</strong></p>
<p> <strong>password: varchar(50)</strong> </p>
<p><strong>birthday: varchar(50)</strong></p>
<h2 id="1-2一对多查询"><a href="#1-2一对多查询" class="headerlink" title="1.2一对多查询"></a>1.2一对多查询</h2><p><strong>1.一对多查询的模型</strong></p>
<p><strong>用户表和订单表的关系为,一个用户有多个订单,一个订单只从属于一个用户一对多查询的需求:查询一个用户,与此同时查询出该用户具有的订单</strong></p>
<h2 id="1-3多对多查询"><a href="#1-3多对多查询" class="headerlink" title="1.3多对多查询"></a>1.3多对多查询</h2><p><strong>1.多对多查询的模型</strong></p>
<p><strong>表和角色表的关系为,一个用户有多个角色,一个角色被多个用户使用多对多查询的需求:查询用户同时查询出该用户的所有角色</strong></p>
<p><strong>user</strong></p>
<p><strong>id: int</strong></p>
<p><strong>usermame: varchar(50)</strong> </p>
<p><strong>password: varchar(50)</strong></p>
<p><strong>birthday: varchar(50)</strong></p>
<p><strong>user_role</strong></p>
<p><strong>user_id: int</strong> </p>
<p><strong>role_id: int</strong></p>
<p><strong>role</strong></p>
<p><strong>id: int</strong></p>
<p><strong>rolename: varchar(255)</strong></p>
<h2 id="1-4知识小结"><a href="#1-4知识小结" class="headerlink" title="1.4知识小结"></a>1.4知识小结</h2><p><strong>MyBatis多表配置方式:</strong></p>
<p><strong>一对一配置:使用<resultMap>做配置</strong></p>
<p><strong>一对多配置:使用<resultMap>+<collection>做配置</strong></p>
<p><strong>多对多配置:使用<resultMap>+<collection>做配置</strong></p>
<h1 id="1-Mybatis的注解开发"><a href="#1-Mybatis的注解开发" class="headerlink" title="1.Mybatis的注解开发"></a>1.Mybatis的注解开发</h1><h2 id="1-1-MyBatis的常用注解"><a href="#1-1-MyBatis的常用注解" class="headerlink" title="1.1 MyBatis的常用注解"></a>1.1 MyBatis的常用注解</h2><p><strong>这几年来注解开发越来越流行, Mybatis也可以使用注解开发方式,这样我们就可以减少编写Mapper映射文件了。我们先围绕一些基本的CRUD来学习,再学习复杂映射多表操作。</strong></p>
<p><strong>@Insert:实现新增</strong></p>
<p><strong>@Update:实现更新</strong></p>
<p><strong>@Delete:实现删除</strong></p>
<p><strong>@Select:实现查询</strong></p>
<p><strong>@Result:实现结果集封装</strong></p>
<p><strong>@Results:可以与</strong></p>
<p><strong>@Result一起使用,封装多个结果集</strong></p>
<p><strong>@One:实现一对一结果集封装</strong></p>
<p><strong>@Many:实现一对多结果集封装</strong> </p>
<h2 id="1-2-MyBatis的增删改查"><a href="#1-2-MyBatis的增删改查" class="headerlink" title="1.2 MyBatis的增删改查"></a>1.2 MyBatis的增删改查</h2><p><strong>我们完成简单的user表的增删改查的操作</strong></p>
<p><strong>private UserMapper userMapper;</strong></p>
<p><strong>@Before</strong></p>
<p><strong>public void before () throws IOException{</strong></p>
<p><strong>Inputstream resourceAsStream &#x3D; Resources.getResourceAsStream(“SqlMapconfig.xml”);</strong></p>
<p><strong>SglsessionFactory sqlsessionFactory &#x3D; newSqlsessionFactoryBuilder (). build (resourceAsstream);</strong></p>
<p><strong>Sqlsession sqlsession &#x3D; sqlsessionFactory. opensession (true);</strong></p>
<p><strong>userMapper &#x3D; sqlSession. getMapper (UserMapper.class);</strong> </p>
<p>}</p>
<h2 id="1-3-MyBatis的注解实现复杂映射开发"><a href="#1-3-MyBatis的注解实现复杂映射开发" class="headerlink" title="1.3 MyBatis的注解实现复杂映射开发"></a>1.3 MyBatis的注解实现复杂映射开发</h2><p><strong>实现复杂关系映射之前我们可以在映射文件中通过配置<resultMap>来实现,使用注解开发后,我们可以使用@Results注解@Result注解, @One注解, @Many注解组合完成复杂关系的配置</strong></p>
<p><strong>注解																						说明</strong></p>
<p><strong>@Results(一对多)							代替了<assocation>标签,是多表查询的关键,在注解中用来指定子查询返回单一对象。</strong></p>
<p>​															<strong>@One注解属性介绍:</strong></p>
<p>​														 <strong>select:指定用来多表查询的sqlmapper</strong></p>
<p>​														<strong>使用格式: @Result(column&#x3D;’”.property&#x3D;”,one&#x3D;@One(select&#x3D;”“))</strong> </p>
<p><strong>@Many (多对一)						代替了<collection>标签 是是多表查询的关键,在注解中用来指定子查询返回对象集合。</strong></p>
<p>​														<strong>使用格式: @Result(property&#x3D;”.column&#x3D;””.many&#x3D;@Many(select&#x3D;”“))</strong> </p>
<h2 id="1-6多对多查询"><a href="#1-6多对多查询" class="headerlink" title="1.6多对多查询"></a>1.6多对多查询</h2><p><strong>1.多对多查询的模型</strong></p>
<p><strong>用户表和角色表的关系为,一个用户有多个角色,一个角色被多个用户使用多对多查询的需求:查询用户同时查询出该用户的所有角色</strong></p>
<p><strong>user</strong></p>
<p><strong>id: int</strong></p>
<p><strong>username: varchar(50)</strong></p>
<p><strong>password: varchar(50)</strong></p>
<p><strong>birthday: varchar(50)</strong></p>
<p><strong>user_role</strong></p>
<p><strong>user_id: int</strong></p>
<p> <strong>role_id: int</strong></p>
<p><strong>role</strong></p>
<p><strong>id: int</strong></p>
<p><strong>rolename: varchar(255)</strong> </p>
<h1 id="1-SSM框架整合"><a href="#1-SSM框架整合" class="headerlink" title="1.SSM框架整合"></a>1.SSM框架整合</h1><h2 id="1-1准备工作"><a href="#1-1准备工作" class="headerlink" title="1.1准备工作"></a>1.1准备工作</h2><p><strong>1.原始方式整合</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database ssm;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> account(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span> (<span class="number">100</span>),</span><br><span class="line">    money <span class="keyword">double</span> (<span class="number">7</span>,<span class="number">2</span>)</span><br><span class="line">); </span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://2486125878.github.io">凯瑟兰森</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://2486125878.github.io/2024/03/13/SSM/">https://2486125878.github.io/2024/03/13/SSM/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JAVA/">JAVA</a></div><div class="post_share"><div class="social-share" data-image="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/13/%E2%80%98HTML%E9%AB%98%E7%BA%A7%E2%80%99/" title="‘HTML高级’"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">‘HTML高级’</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/13/JavaWeb/" title="JavaWeb"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">JavaWeb</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2024/03/13/JavaWeb/" title="JavaWeb"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-13</div><div class="title">JavaWeb</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.v8Y5QxZNIiQVIEk3JOCC2QHaGi?rs=1&amp;pid=ImgDetMain" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">凯瑟兰森</div><div class="author-info__description">...</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/xu-kai666"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://gitee.com/xu-kai666" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:2486125878@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">1.Spring简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Spring%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 Spring是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Spring%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Spring发展历程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-Spring%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 Spring的优势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%96%B9%E4%BE%BF%E8%A7%A3%E8%80%A6-%E7%AE%80%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-number">1.3.1.</span> <span class="toc-text">1)方便解耦,简化开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-AOP%E7%BC%96%E7%A8%8B%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">1.3.2.</span> <span class="toc-text">2) AOP编程的支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%94%AF%E6%8C%81"><span class="toc-number">1.3.3.</span> <span class="toc-text">3)声明式事务的支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%B9%E4%BE%BF%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.</span> <span class="toc-text">4)方便程序的测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%96%B9%E4%BE%BF%E9%9B%86%E6%88%90%E5%90%84%E7%A7%8D%E4%BC%98%E7%A7%80%E6%A1%86%E6%9E%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text">5)方便集成各种优秀框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%99%8D%E4%BD%8EJavaEE-API%E7%9A%84%E4%BD%BF%E7%94%A8%E9%9A%BE%E5%BA%A6"><span class="toc-number">1.4.2.</span> <span class="toc-text">6)降低JavaEE API的使用难度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Java%E6%BA%90%E7%A0%81%E6%98%AF%E7%BB%8F%E5%85%B8%E5%AD%A6%E4%B9%A0%E8%8C%83%E4%BE%8B"><span class="toc-number">1.4.3.</span> <span class="toc-text">7.Java源码是经典学习范例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-Spring%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.</span> <span class="toc-text">1.4 Spring的体系结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Spring%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">2.Spring快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Spring%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Spring程序开发步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E7%9A%84%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.1.1.</span> <span class="toc-text">Spring的开发步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">3.Spring配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Bean%E6%A0%87%E7%AD%BE%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 Bean标签基本配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Bean%E6%A0%87%E7%AD%BE%E8%8C%83%E5%9B%B4%E9%85%8D%E7%BD%AE"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 Bean标签范围配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-Bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 Bean生命周期配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-Bean%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 Bean实例化三种方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E5%88%86%E6%9E%90"><span class="toc-number">3.5.</span> <span class="toc-text">3.6 Bean的依赖注入分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%A6%82%E5%BF%B5"><span class="toc-number">3.6.</span> <span class="toc-text">3.7 Bean的依赖注入概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">3.7.</span> <span class="toc-text">3.7 Bean的依赖注入方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F-1"><span class="toc-number">3.8.</span> <span class="toc-text">3.7 Bean的依赖注入方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.9.</span> <span class="toc-text">3.8 Bean的依赖注入的数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9%E5%BC%95%E5%85%A5%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%88%86%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91"><span class="toc-number">3.10.</span> <span class="toc-text">3.9引入其他配置文件(分模块开发)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">3.11.</span> <span class="toc-text">3.6知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Spring%E7%9B%B8API"><span class="toc-number">4.</span> <span class="toc-text">4.Spring相API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-ApplicationContext%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 ApplicationContext继承体系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-ApplicationContext%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 ApplicationContext的实现类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-getBean-%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 getBean()方法使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">4.4.</span> <span class="toc-text">4.4知识要点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E7%9A%84%E9%87%8D%E7%82%B9API"><span class="toc-number">4.4.1.</span> <span class="toc-text">Spring的重点API</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">5.</span> <span class="toc-text">1.Spring配置数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E6%95%B0%E6%8D%AE%E6%BA%90-%E8%BF%9E%E6%8E%A5%E6%B1%A0-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">1.1数据源(连接池)的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">5.2.</span> <span class="toc-text">1.1数据源的开发步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA"><span class="toc-number">5.3.</span> <span class="toc-text">1.2数据源的手动创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-Spring%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">5.4.</span> <span class="toc-text">1.3 Spring配置数据源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E6%8A%BD%E5%8F%96jdbc%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.5.</span> <span class="toc-text">1.4抽取jdbc配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">5.6.</span> <span class="toc-text">1.5知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">6.</span> <span class="toc-text">2.Spring注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Spring%E5%8E%9F%E5%A7%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">6.1.</span> <span class="toc-text">2.1 Spring原始注解</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91-1"><span class="toc-number">7.</span> <span class="toc-text">2.Spring注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Spring%E6%96%B0%E6%B3%A8%E8%A7%A3"><span class="toc-number">7.1.</span> <span class="toc-text">2.2 Spring新注解</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Spring%E9%9B%86%E6%88%90Junit"><span class="toc-number">8.</span> <span class="toc-text">3.Spring集成Junit</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E5%8E%9F%E5%A7%8BJunit%E6%B5%8B%E8%AF%95Spring%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.1.</span> <span class="toc-text">3.1原始Junit测试Spring的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E4%B8%8A%E8%BF%B0%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF"><span class="toc-number">8.2.</span> <span class="toc-text">3.2上述问题解决思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-Spring%E9%9B%86%E6%88%90Junit%E6%AD%A5%E9%AA%A4"><span class="toc-number">8.3.</span> <span class="toc-text">3.3 Spring集成Junit步骤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring%E9%9B%86%E6%88%90web%E7%8E%AF%E5%A2%83"><span class="toc-number">9.</span> <span class="toc-text">1.Spring集成web环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-ApplicationContext%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E8%8E%B7%E5%8F%96%E6%96%B9%E5%BC%8F"><span class="toc-number">9.1.</span> <span class="toc-text">1.1 ApplicationContext应用上下文获取方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Spring%E6%8F%90%E4%BE%9B%E8%8E%B7%E5%8F%96%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-number">9.2.</span> <span class="toc-text">1.2 Spring提供获取应用上下文的工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E5%AF%BC%E5%85%A5Spring%E9%9B%86%E6%88%90web%E7%9A%84%E5%9D%90%E6%A0%87"><span class="toc-number">9.3.</span> <span class="toc-text">1.3导入Spring集成web的坐标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E9%85%8D%E7%BD%AEContextLoaderListener%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">9.4.</span> <span class="toc-text">1.4 配置ContextLoaderListener监听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E9%80%9A%E8%BF%87%E5%B7%A5%E5%85%B7%E8%8E%B7%E5%BE%97%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E5%AF%B9%E8%B1%A1"><span class="toc-number">9.5.</span> <span class="toc-text">1.5通过工具获得应用上下文对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9-1"><span class="toc-number">9.6.</span> <span class="toc-text">1.5知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-SpringMVC-%E7%AE%80%E4%BB%8B"><span class="toc-number">10.</span> <span class="toc-text">2.SpringMVC 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-SpringMVC%E6%A6%82%E8%BF%B0"><span class="toc-number">10.1.</span> <span class="toc-text">2.1 SpringMVC概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-SpringMVC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">10.2.</span> <span class="toc-text">2.3 SpringMVC快速入门</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-SpringMVC-%E7%BB%84%E4%BB%B6%E8%A7%A3%E6%9E%90"><span class="toc-number">11.</span> <span class="toc-text">3.SpringMVC 组件解析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-SpringMVC%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">11.1.</span> <span class="toc-text">3.1 SpringMVC的执行流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-SpringMVC%E6%B3%A8%E8%A7%A3%E8%A7%A3%E6%9E%90"><span class="toc-number">11.2.</span> <span class="toc-text">3.3 SpringMVC注解解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-SpringMVC%E7%9A%84XML%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">11.3.</span> <span class="toc-text">3.4 SpringMVC的XML配置解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">11.4.</span> <span class="toc-text">3.5 知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringMVC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94"><span class="toc-number">12.</span> <span class="toc-text">1.SpringMVC的数据响应</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-SpringMVC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E6%96%B9%E5%BC%8F"><span class="toc-number">12.1.</span> <span class="toc-text">1.1 SpringMVC的数据响应方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-number">12.2.</span> <span class="toc-text">1.2页面跳转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E5%9B%9E%E5%86%99%E6%95%B0%E6%8D%AE"><span class="toc-number">12.3.</span> <span class="toc-text">1.3回写数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">12.4.</span> <span class="toc-text">1.4 知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-SpringMVC-%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">13.</span> <span class="toc-text">2.SpringMVC 获得请求数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">13.1.</span> <span class="toc-text">2.1获得请求参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E8%8E%B7%E5%BE%97%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">13.2.</span> <span class="toc-text">2.2获得基本类型参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%8E%B7%E5%BE%97POJO%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">13.3.</span> <span class="toc-text">2.3 获得POJO类型参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E8%8E%B7%E5%BE%97%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">13.4.</span> <span class="toc-text">2.4获得数组类型参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5%E8%8E%B7%E5%BE%97%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">13.5.</span> <span class="toc-text">2.5获得集合类型参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">13.6.</span> <span class="toc-text">2.6请求数据乱码问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E5%8F%82%E6%95%B0%E5%AE%9A%E6%B3%A8%E8%A7%A3-requestParam"><span class="toc-number">13.7.</span> <span class="toc-text">2.7 参数定注解@requestParam</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E8%8E%B7%E5%BE%97Restful%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">13.8.</span> <span class="toc-text">2.8 获得Restful风格的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-9%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="toc-number">13.9.</span> <span class="toc-text">2.9自定义类型转换器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-10-%E8%8E%B7%E5%BE%97Servlet%E7%9B%B8%E5%85%B3API"><span class="toc-number">13.10.</span> <span class="toc-text">2.10 获得Servlet相关API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-11%E8%8E%B7%E5%BE%97%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">13.11.</span> <span class="toc-text">2.11获得请求头</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-12-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">13.12.</span> <span class="toc-text">2.12 文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-13-%E5%8D%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%AD%A5%E9%AA%A4"><span class="toc-number">13.13.</span> <span class="toc-text">2.13 单文件上传步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-15%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%AE%9E%E7%8E%B0"><span class="toc-number">13.14.</span> <span class="toc-text">2.15多文件上传实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-14-%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">13.15.</span> <span class="toc-text">2.14 知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-spring-JdbcTemplate%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">14.</span> <span class="toc-text">1.spring  JdbcTemplate基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-JdbcTemplate%E6%A6%82%E8%BF%B0"><span class="toc-number">14.1.</span> <span class="toc-text">1.1 JdbcTemplate概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-JdbcTemplate%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">14.2.</span> <span class="toc-text">1.2 JdbcTemplate开发步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-Spring%E4%BA%A7%E7%94%9FJdbcTemplate%E5%AF%B9%E8%B1%A1"><span class="toc-number">14.3.</span> <span class="toc-text">1.4 Spring产生JdbcTemplate对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">14.4.</span> <span class="toc-text">1.6知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring%E7%BB%83%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">15.</span> <span class="toc-text">1.Spring练习环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Spring%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="toc-number">15.1.</span> <span class="toc-text">1.1 Spring环境搭建步骤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E7%9A%84%E5%B1%95%E7%A4%BA%E5%92%8C%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C"><span class="toc-number">16.</span> <span class="toc-text">2.角色列表的展示和添加操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E7%9A%84%E5%B1%95%E7%A4%BA%E6%AD%A5%E9%AA%A4%E5%88%86%E6%9E%90"><span class="toc-number">16.1.</span> <span class="toc-text">2.2角色列表的展示步骤分析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringMVC%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">17.</span> <span class="toc-text">1.SpringMVC拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E6%8B%A6%E6%88%AA%E5%99%A8-interceptor-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">17.1.</span> <span class="toc-text">1.1 拦截器(interceptor)的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E6%8B%A6%E6%88%AA%E5%99%A8%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E5%8C%BA%E5%88%AB"><span class="toc-number">17.2.</span> <span class="toc-text">1.2拦截器和过滤器区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E6%8B%A6%E6%88%AA%E5%99%A8%E6%98%AF%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">17.3.</span> <span class="toc-text">1.3拦截器是快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E6%8B%A6%E6%88%AA%E5%99%A8%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E"><span class="toc-number">17.4.</span> <span class="toc-text">1.5拦截器方法说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">17.5.</span> <span class="toc-text">1.6 知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringMVC%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">18.</span> <span class="toc-text">1.SpringMVC异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">18.1.</span> <span class="toc-text">1.1异常处理的思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">18.2.</span> <span class="toc-text">1.2异常处理两种方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E7%AE%80%E5%8D%95%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8SimpleMappingExceptionResolver"><span class="toc-number">18.3.</span> <span class="toc-text">1.3 简单异常处理器SimpleMappingExceptionResolver</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%AD%A5%E9%AA%A4"><span class="toc-number">18.4.</span> <span class="toc-text">1.4 自定义异常处理步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9-2"><span class="toc-number">18.5.</span> <span class="toc-text">1.5知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Spring-%E7%9A%84AOP-%E7%AE%80%E4%BB%8B"><span class="toc-number">19.</span> <span class="toc-text">1.Spring 的AOP 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AFAOP"><span class="toc-number">19.1.</span> <span class="toc-text">1.1 什么是AOP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-AOP-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%8A%E5%85%B6%E4%BC%98%E5%8A%BF"><span class="toc-number">19.2.</span> <span class="toc-text">1.2 AOP 的作用及其优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-AOP-%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="toc-number">19.3.</span> <span class="toc-text">1.3 AOP 的底层实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-AOP-%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF"><span class="toc-number">19.4.</span> <span class="toc-text">1.4 AOP 的动态代理技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-JDK-%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">19.5.</span> <span class="toc-text">1.5 JDK 的动态代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-cglib-%E7%9A%84%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">19.6.</span> <span class="toc-text">1.6 cglib 的动态代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-AOP-%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">19.7.</span> <span class="toc-text">1.7 AOP 相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-AOP-%E5%BC%80%E5%8F%91%E6%98%8E%E7%A1%AE%E7%9A%84%E4%BA%8B%E9%A1%B9"><span class="toc-number">19.8.</span> <span class="toc-text">1.8 AOP 开发明确的事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">19.9.</span> <span class="toc-text">1.9 知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%9F%BA%E4%BA%8EXML%E7%9A%84AOP%E5%BC%80%E5%8F%91"><span class="toc-number">20.</span> <span class="toc-text">2.基于XML的AOP开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">20.1.</span> <span class="toc-text">2.1快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-XML-%E9%85%8D%E7%BD%AEAOP-%E8%AF%A6%E8%A7%A3"><span class="toc-number">20.2.</span> <span class="toc-text">2.2 XML 配置AOP 详解</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84AOP%E5%BC%80%E5%8F%91"><span class="toc-number">21.</span> <span class="toc-text">3.基于注解的AOP开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">21.1.</span> <span class="toc-text">3.1快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AEAOP-%E8%AF%A6%E8%A7%A3"><span class="toc-number">21.2.</span> <span class="toc-text">3.2注解配置AOP 详解</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9B%B8%E5%85%B3%E5%AF%B9%E8%B1%A1"><span class="toc-number">22.</span> <span class="toc-text">1.编程式事务控制相关对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-PlatformTransactionManager"><span class="toc-number">22.1.</span> <span class="toc-text">1.1 PlatformTransactionManager</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-TransactionDefinition"><span class="toc-number">22.2.</span> <span class="toc-text">1.2 TransactionDefinition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-TransactionStatus"><span class="toc-number">22.3.</span> <span class="toc-text">1.3 TransactionStatus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">22.4.</span> <span class="toc-text">1.4知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%9F%BA%E4%BA%8EXML%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-number">23.</span> <span class="toc-text">2.基于XML的声明式事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E4%BB%80%E4%B9%88%E6%98%AF%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-number">23.1.</span> <span class="toc-text">2.1什么是声明式事务控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">23.2.</span> <span class="toc-text">声明式事务处理的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">23.3.</span> <span class="toc-text">2.2声明式事务控制的实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E5%88%87%E7%82%B9%E6%96%B9%E6%B3%95%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%8F%82%E6%95%B0%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">23.4.</span> <span class="toc-text">2.3切点方法的事务参数的配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">23.5.</span> <span class="toc-text">2.4知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6"><span class="toc-number">24.</span> <span class="toc-text">3.基于注解的声明式事务控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%A7%A3%E6%9E%90"><span class="toc-number">24.1.</span> <span class="toc-text">3.2注解配置声明式事务控制解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E7%9F%A5%E8%AF%86%E8%A6%81%E7%82%B9"><span class="toc-number">24.2.</span> <span class="toc-text">3.3知识要点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Mybatis%E7%AE%80%E4%BB%8B"><span class="toc-number">25.</span> <span class="toc-text">1.Mybatis简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E5%8E%9F%E5%A7%8Bjdbc%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">25.1.</span> <span class="toc-text">1.1原始jdbc操作(查询数据)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E5%8E%9F%E5%A7%8Bjdbc%E6%93%8D%E4%BD%9C-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">25.2.</span> <span class="toc-text">1.1原始jdbc操作(插入数据)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E5%8E%9F%E5%A7%8Bjdbc%E6%93%8D%E4%BD%9C%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-number">25.3.</span> <span class="toc-text">1.2原始jdbc操作的分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E4%BB%80%E4%B9%88%E6%98%AFMybatis"><span class="toc-number">25.4.</span> <span class="toc-text">1.3 什么是Mybatis</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Mybatis%E7%9A%84%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">26.</span> <span class="toc-text">2.Mybatis的快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-MyBatis%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">26.1.</span> <span class="toc-text">2.1 MyBatis开发步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">26.2.</span> <span class="toc-text">2.2 环境搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">26.3.</span> <span class="toc-text">2.2环境搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-number">26.4.</span> <span class="toc-text">2.3编写测试代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93"><span class="toc-number">26.5.</span> <span class="toc-text">2.4知识小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-MyBatis%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">27.</span> <span class="toc-text">4.MyBatis的增删改查操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-MyBatis%E7%9A%84%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">27.1.</span> <span class="toc-text">4.1 MyBatis的插入数据操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-MyBatis%E7%9A%84%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">27.2.</span> <span class="toc-text">4.2 MyBatis的修改数据操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-MyBatis%E7%9A%84%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">27.3.</span> <span class="toc-text">4.3 MyBatis的删除数据操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E4%B8%8EAPI"><span class="toc-number">27.4.</span> <span class="toc-text">4.4知识小结增删改查映射配置与API:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-MyBatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B1%82%E7%BA%A7%E5%85%B3%E7%B3%BB"><span class="toc-number">27.5.</span> <span class="toc-text">5.1 MyBatis核心配置文件层级关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-MyBatis%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">27.6.</span> <span class="toc-text">5.2 MyBatis常用配置解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-MyBatis%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90-1"><span class="toc-number">27.7.</span> <span class="toc-text">5.2 MyBatis常用配置解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93"><span class="toc-number">27.8.</span> <span class="toc-text">5.3知识小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-MyBatis%E7%9B%B8%E5%BA%94API"><span class="toc-number">28.</span> <span class="toc-text">6.MyBatis相应API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-SqlSessionI%E5%8E%82%E6%9E%84%E5%BB%BA%E5%99%A8SqlSessionFactoryBuilder"><span class="toc-number">28.1.</span> <span class="toc-text">6.1 SqlSessionI厂构建器SqlSessionFactoryBuilder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-SqlSession%E5%B7%A5%E5%8E%82%E5%AF%B9%E8%B1%A1SqlSessionFactory"><span class="toc-number">28.2.</span> <span class="toc-text">6.2 SqlSession工厂对象SqlSessionFactory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-SqlSession%E4%BC%9A%E8%AF%9D%E5%AF%B9%E8%B1%A1"><span class="toc-number">28.3.</span> <span class="toc-text">6.3 SqlSession会话对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Mybatis%E7%9A%84Dao%E5%B1%82%E5%AE%9E%E7%8E%B0"><span class="toc-number">29.</span> <span class="toc-text">1.Mybatis的Dao层实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E4%BB%A3%E7%90%86%E5%BC%80%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-number">29.1.</span> <span class="toc-text">1.2代理开发方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">29.2.</span> <span class="toc-text">3.测试代理方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93"><span class="toc-number">29.3.</span> <span class="toc-text">1.3知识小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#userService"><span class="toc-number">30.</span> <span class="toc-text">1.MyBatis映射文件深入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#userService"><span class="toc-number">30.1.</span> <span class="toc-text">1.1 动态sql语句</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#userService"><span class="toc-number">31.</span> <span class="toc-text">1.MyBatis映射文件深入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-SQL%E7%89%87%E6%AE%B5%E6%8A%BD%E5%8F%96"><span class="toc-number">31.1.</span> <span class="toc-text">1.2 SQL片段抽取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#userService"><span class="toc-number">31.2.</span> <span class="toc-text">1.3知识小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-MyBatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B7%B1%E5%85%A5"><span class="toc-number">32.</span> <span class="toc-text">1.MyBatis核心配置文件深入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-typeHandlers%E6%A0%87%E7%AD%BE"><span class="toc-number">32.1.</span> <span class="toc-text">1.1 typeHandlers标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-plugins%E6%A0%87%E7%AD%BE"><span class="toc-number">32.2.</span> <span class="toc-text">1.2 plugins标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93-1"><span class="toc-number">32.3.</span> <span class="toc-text">1.3知识小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Mybatis%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">33.</span> <span class="toc-text">1.Mybatis多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">33.1.</span> <span class="toc-text">1.1一对一查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-number">33.2.</span> <span class="toc-text">1.2一对多查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-number">33.3.</span> <span class="toc-text">1.3多对多查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E7%9F%A5%E8%AF%86%E5%B0%8F%E7%BB%93"><span class="toc-number">33.4.</span> <span class="toc-text">1.4知识小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Mybatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">34.</span> <span class="toc-text">1.Mybatis的注解开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-MyBatis%E7%9A%84%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">34.1.</span> <span class="toc-text">1.1 MyBatis的常用注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-MyBatis%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">34.2.</span> <span class="toc-text">1.2 MyBatis的增删改查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-MyBatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E6%98%A0%E5%B0%84%E5%BC%80%E5%8F%91"><span class="toc-number">34.3.</span> <span class="toc-text">1.3 MyBatis的注解实现复杂映射开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-number">34.4.</span> <span class="toc-text">1.6多对多查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SSM%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88"><span class="toc-number">35.</span> <span class="toc-text">1.SSM框架整合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">35.1.</span> <span class="toc-text">1.1准备工作</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/thinkphp%E5%90%8E%E5%8F%B0%E7%AC%94%E8%AE%B0/" title="thinkphp后台笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="thinkphp后台笔记"/></a><div class="content"><a class="title" href="/2024/03/14/thinkphp%E5%90%8E%E5%8F%B0%E7%AC%94%E8%AE%B0/" title="thinkphp后台笔记">thinkphp后台笔记</a><time datetime="2024-03-14T07:51:34.000Z" title="Created 2024-03-14 15:51:34">2024-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/thinkphp%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="thinkphp学习笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="thinkphp学习笔记"/></a><div class="content"><a class="title" href="/2024/03/14/thinkphp%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="thinkphp学习笔记">thinkphp学习笔记</a><time datetime="2024-03-14T07:32:59.000Z" title="Created 2024-03-14 15:32:59">2024-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/thinkphp%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B6%E4%BB%96/" title="thinkphp数据库其他"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="thinkphp数据库其他"/></a><div class="content"><a class="title" href="/2024/03/14/thinkphp%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B6%E4%BB%96/" title="thinkphp数据库其他">thinkphp数据库其他</a><time datetime="2024-03-14T04:04:00.000Z" title="Created 2024-03-14 12:04:00">2024-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/thinkphp%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2/" title="thinkphp多种查询"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="thinkphp多种查询"/></a><div class="content"><a class="title" href="/2024/03/14/thinkphp%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2/" title="thinkphp多种查询">thinkphp多种查询</a><time datetime="2024-03-14T03:47:23.000Z" title="Created 2024-03-14 11:47:23">2024-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/14/thinkphp%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C/" title="thinkphp链式操作"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gss0.baidu.com/9fo3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/0bd162d9f2d3572c03d4a3348113632762d0c327.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="thinkphp链式操作"/></a><div class="content"><a class="title" href="/2024/03/14/thinkphp%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C/" title="thinkphp链式操作">thinkphp链式操作</a><time datetime="2024-03-14T03:18:02.000Z" title="Created 2024-03-14 11:18:02">2024-03-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer"><div class="bubbles"><div class="bubble" style="--size:5.33168091645124rem; --distance:6.800874602296689rem; --position:73.67273270926373%; --time:3.714491694359759s; --delay:-3.892449049600332s;"></div><div class="bubble" style="--size:4.435954903550978rem; --distance:7.120109893440341rem; --position:35.72102869911059%; --time:3.802843093554586s; --delay:-2.432249202702165s;"></div><div class="bubble" style="--size:2.528770894332176rem; --distance:7.045156159258485rem; --position:30.942205294215263%; --time:2.6395793562836185s; --delay:-2.1015446321376006s;"></div><div class="bubble" style="--size:4.526268952617896rem; --distance:8.685054791208568rem; --position:43.87383856615363%; --time:3.032198517083734s; --delay:-2.0519974110887254s;"></div><div class="bubble" style="--size:5.619524190426227rem; --distance:9.17137774072932rem; --position:102.31907979738013%; --time:2.921400374519874s; --delay:-3.2304465931872954s;"></div><div class="bubble" style="--size:5.911611592110401rem; --distance:7.915929372816992rem; --position:98.48444678512789%; --time:3.869600628531416s; --delay:-3.410892645832441s;"></div><div class="bubble" style="--size:5.848217333886595rem; --distance:6.884488333557035rem; --position:64.02708381005728%; --time:3.863746038350981s; --delay:-3.94637410997803s;"></div><div class="bubble" style="--size:4.21512918623436rem; --distance:7.598807369740887rem; --position:59.25501992634668%; --time:3.6242552364593252s; --delay:-3.29661273918888s;"></div><div class="bubble" style="--size:2.1174699917058453rem; --distance:6.603867778251329rem; --position:3.14962771813631%; --time:3.150032676199715s; --delay:-2.3754271732709147s;"></div><div class="bubble" style="--size:3.973212177755613rem; --distance:9.283398919563947rem; --position:64.16704719082237%; --time:2.8748116764568343s; --delay:-2.480957018728821s;"></div><div class="bubble" style="--size:4.990742648240973rem; --distance:9.398382834340504rem; --position:54.50277466661652%; --time:2.626971247857011s; --delay:-2.974461710551503s;"></div><div class="bubble" style="--size:4.680190815500058rem; --distance:6.349359872580534rem; --position:17.202556278435292%; --time:3.74135612983394s; --delay:-3.797626744344433s;"></div><div class="bubble" style="--size:5.339381659898733rem; --distance:9.346250484756691rem; --position:83.18211898811958%; --time:2.5583976175699563s; --delay:-3.467342184453691s;"></div><div class="bubble" style="--size:5.889846809873764rem; --distance:7.2570839288432545rem; --position:-3.592990183718945%; --time:2.0938530854804798s; --delay:-3.147499231288342s;"></div><div class="bubble" style="--size:2.5719956442020786rem; --distance:7.3914324990071405rem; --position:-2.301359986905962%; --time:2.817395977598492s; --delay:-2.0492793104253497s;"></div><div class="bubble" style="--size:3.7632637586776223rem; --distance:8.391631095727245rem; --position:21.413623260483508%; --time:2.547367783702804s; --delay:-2.6014552634029204s;"></div><div class="bubble" style="--size:3.5818502601565587rem; --distance:7.828957253694254rem; --position:8.669591763318973%; --time:3.312149954177703s; --delay:-3.5907534246545842s;"></div><div class="bubble" style="--size:5.353080144047511rem; --distance:7.067115950039737rem; --position:99.8692469832202%; --time:2.924646323656019s; --delay:-2.682418067986075s;"></div><div class="bubble" style="--size:4.983880340967617rem; --distance:6.052416762250792rem; --position:54.090465594728514%; --time:2.762237767974641s; --delay:-2.0656594936297723s;"></div><div class="bubble" style="--size:2.50511278518725rem; --distance:9.929747975814589rem; --position:29.5532262370457%; --time:2.6493158274906907s; --delay:-2.6804228615326604s;"></div><div class="bubble" style="--size:3.411299881222531rem; --distance:7.658389284113082rem; --position:7.586523227187055%; --time:2.128071165691948s; --delay:-2.4533575094898254s;"></div><div class="bubble" style="--size:2.6352276853630086rem; --distance:7.716760872859077rem; --position:24.12341867688436%; --time:3.4749859746811578s; --delay:-3.599762726393619s;"></div><div class="bubble" style="--size:2.204304451313747rem; --distance:9.490364608733849rem; --position:101.2012250482154%; --time:2.400061871390084s; --delay:-2.970976762784361s;"></div><div class="bubble" style="--size:2.3490101567860027rem; --distance:7.177914204979019rem; --position:13.629990922266032%; --time:3.448613846054386s; --delay:-3.552942116693014s;"></div><div class="bubble" style="--size:5.944656140868687rem; --distance:6.582983076546638rem; --position:52.332260570263266%; --time:3.2860310121865086s; --delay:-2.824183770047582s;"></div><div class="bubble" style="--size:2.439991864919813rem; --distance:9.062465531121147rem; --position:53.62907262579731%; --time:2.0054255232557905s; --delay:-3.38935285162731s;"></div><div class="bubble" style="--size:4.973696260180372rem; --distance:7.100031036663184rem; --position:46.12922684611302%; --time:3.0418195033034108s; --delay:-2.0386107411385237s;"></div><div class="bubble" style="--size:3.337967553362615rem; --distance:7.640286076189404rem; --position:72.02478302248606%; --time:3.070839243630562s; --delay:-3.022144251056371s;"></div><div class="bubble" style="--size:5.436077982510474rem; --distance:7.014393854586737rem; --position:41.58112481980886%; --time:2.3773374825812783s; --delay:-2.379395586164052s;"></div><div class="bubble" style="--size:5.129720107781539rem; --distance:8.80312218467212rem; --position:11.925506550494305%; --time:2.683767023963208s; --delay:-3.998338832694291s;"></div><div class="bubble" style="--size:2.385178418674851rem; --distance:6.550662406379509rem; --position:7.1250232519664625%; --time:3.8206262197474516s; --delay:-3.156272501907999s;"></div><div class="bubble" style="--size:4.547788079858504rem; --distance:9.199239723020728rem; --position:53.70530598091217%; --time:3.2957489206633275s; --delay:-3.8976051505896296s;"></div><div class="bubble" style="--size:4.545391540684994rem; --distance:7.214983041874127rem; --position:28.333939303800385%; --time:3.4236611634662233s; --delay:-3.8647802072524367s;"></div><div class="bubble" style="--size:5.467877159782978rem; --distance:7.002825952011117rem; --position:58.91309190173054%; --time:2.3849947208942313s; --delay:-2.4597317270306016s;"></div><div class="bubble" style="--size:3.819775342772453rem; --distance:8.716280884057689rem; --position:50.16908390186528%; --time:3.256427658146074s; --delay:-3.025139007258795s;"></div><div class="bubble" style="--size:2.0116329851723487rem; --distance:7.71315762061042rem; --position:91.73198940349327%; --time:3.9606135993319964s; --delay:-3.808591839470548s;"></div><div class="bubble" style="--size:5.8464355089344116rem; --distance:7.766730487856093rem; --position:81.0986237665573%; --time:2.7234623188554536s; --delay:-2.070833353168554s;"></div><div class="bubble" style="--size:2.7145936343637445rem; --distance:7.337556096145859rem; --position:7.454845111333929%; --time:3.6054824636323355s; --delay:-2.5457941485831324s;"></div><div class="bubble" style="--size:5.396372469160517rem; --distance:6.640751699923458rem; --position:54.14929418591001%; --time:2.576174953407761s; --delay:-3.25165399943344s;"></div><div class="bubble" style="--size:5.770292328162439rem; --distance:9.572177748930162rem; --position:1.5204514978628154%; --time:3.953221362673499s; --delay:-3.9748381727558306s;"></div><div class="bubble" style="--size:5.2604321659218805rem; --distance:8.004678093138175rem; --position:56.08992168067914%; --time:2.6915691708189704s; --delay:-3.8581717567937535s;"></div><div class="bubble" style="--size:5.385728087176931rem; --distance:6.52282956988546rem; --position:99.09249245939066%; --time:3.3654247503153183s; --delay:-3.838865689793407s;"></div><div class="bubble" style="--size:5.129498745899368rem; --distance:9.881042889241783rem; --position:67.98752023639598%; --time:3.3387255621085146s; --delay:-3.1553315086280027s;"></div><div class="bubble" style="--size:3.1900617863527785rem; --distance:8.766572681779248rem; --position:102.95014651135898%; --time:3.9821547786782587s; --delay:-3.2635189660049564s;"></div><div class="bubble" style="--size:4.34891833802435rem; --distance:6.013099773269783rem; --position:81.61784778344895%; --time:2.600450878584543s; --delay:-3.4901395402353534s;"></div><div class="bubble" style="--size:4.091348871120503rem; --distance:8.817597179148438rem; --position:98.99644899655162%; --time:2.341568572374247s; --delay:-3.107787687753971s;"></div><div class="bubble" style="--size:5.380218263994424rem; --distance:6.160956561243099rem; --position:85.69780235885887%; --time:2.975807821138679s; --delay:-2.558485724553939s;"></div><div class="bubble" style="--size:2.137092686003971rem; --distance:7.111777321647835rem; --position:18.002069306234254%; --time:3.342078411392919s; --delay:-2.227903726898877s;"></div><div class="bubble" style="--size:4.1140457125009rem; --distance:7.165333183394347rem; --position:99.30093970767045%; --time:2.744079089803282s; --delay:-3.826403443027202s;"></div><div class="bubble" style="--size:2.1927665372822798rem; --distance:7.606336361492884rem; --position:93.80022783819757%; --time:2.9543580944061922s; --delay:-2.8739580960048405s;"></div><div class="bubble" style="--size:5.658207893063406rem; --distance:7.299654407077567rem; --position:47.75485088001345%; --time:2.8035703442896014s; --delay:-3.0501512535495325s;"></div><div class="bubble" style="--size:5.733099010506288rem; --distance:9.017412024762507rem; --position:37.52924479327213%; --time:3.162449172858292s; --delay:-2.287996965389232s;"></div><div class="bubble" style="--size:2.7288377856832806rem; --distance:6.090444117213385rem; --position:71.04313130854334%; --time:2.7648849206644988s; --delay:-3.7369074963943123s;"></div><div class="bubble" style="--size:2.10320697945955rem; --distance:9.43752432760104rem; --position:69.68524828654921%; --time:3.632596166021065s; --delay:-2.439143245214204s;"></div><div class="bubble" style="--size:5.386973947355152rem; --distance:9.702229045337525rem; --position:72.76864473058401%; --time:2.4004102752551244s; --delay:-2.3850530897786s;"></div><div class="bubble" style="--size:5.310903940204954rem; --distance:6.118678519885588rem; --position:29.324221237187594%; --time:2.2172921483062913s; --delay:-2.9546630811084045s;"></div><div class="bubble" style="--size:3.0020371112262954rem; --distance:8.987347373998318rem; --position:28.596016902832332%; --time:3.2007158777491913s; --delay:-3.023097833074174s;"></div><div class="bubble" style="--size:3.448381081162422rem; --distance:9.264297035848614rem; --position:25.791955903989535%; --time:2.516560276379459s; --delay:-3.3099338133907805s;"></div><div class="bubble" style="--size:5.264059642936571rem; --distance:9.517032426509319rem; --position:14.593885208046864%; --time:3.1907044247774357s; --delay:-2.631382440339955s;"></div><div class="bubble" style="--size:2.639143408043279rem; --distance:6.69024626184798rem; --position:52.263392885932376%; --time:2.992873153178615s; --delay:-2.2839288395105104s;"></div><div class="bubble" style="--size:4.03586475744686rem; --distance:8.174591625462583rem; --position:1.2860159087401124%; --time:2.7356443066539544s; --delay:-3.167866414369234s;"></div><div class="bubble" style="--size:4.051201477790219rem; --distance:7.171870881266915rem; --position:48.02399478674648%; --time:2.5570040855769474s; --delay:-3.315464634726263s;"></div><div class="bubble" style="--size:3.7118408729181587rem; --distance:8.87103197410369rem; --position:32.12678793699308%; --time:2.5884715714890136s; --delay:-3.1118384780303625s;"></div><div class="bubble" style="--size:5.2876000840613235rem; --distance:9.899567912638997rem; --position:71.96884342179098%; --time:3.7910296171411106s; --delay:-3.4691817559609133s;"></div><div class="bubble" style="--size:2.3230034371548127rem; --distance:6.891758236459004rem; --position:97.33447838347999%; --time:2.267799129232158s; --delay:-2.920867377603445s;"></div><div class="bubble" style="--size:4.554460504831997rem; --distance:9.802029032271719rem; --position:50.64825839139768%; --time:3.6323393901332097s; --delay:-2.4797502570804024s;"></div><div class="bubble" style="--size:4.643810400130343rem; --distance:7.163653310659524rem; --position:11.639136678982947%; --time:2.565347228772141s; --delay:-2.361863434975847s;"></div><div class="bubble" style="--size:4.021985485020196rem; --distance:9.994348676136733rem; --position:45.71153089808159%; --time:2.838621350885201s; --delay:-3.0591475020659162s;"></div><div class="bubble" style="--size:3.875567713380849rem; --distance:9.449034279502868rem; --position:81.44057358524209%; --time:2.1379802266533035s; --delay:-3.78640156627189s;"></div><div class="bubble" style="--size:2.1472387247320395rem; --distance:6.394135931487839rem; --position:21.069463411952547%; --time:2.5784698572003557s; --delay:-2.456904006056296s;"></div><div class="bubble" style="--size:3.793166642452844rem; --distance:9.287144949371278rem; --position:9.255172690120151%; --time:2.854963926727132s; --delay:-3.739666837205009s;"></div><div class="bubble" style="--size:2.1089461841234716rem; --distance:6.559481612606577rem; --position:87.11379821201923%; --time:3.4573179027945065s; --delay:-3.6284481851838315s;"></div><div class="bubble" style="--size:2.112953867319858rem; --distance:6.531889418607929rem; --position:61.66648169496207%; --time:2.26107754583957s; --delay:-2.7661089527094704s;"></div><div class="bubble" style="--size:5.225041652113367rem; --distance:7.759450370346174rem; --position:73.42579765807955%; --time:2.4324517112856854s; --delay:-2.952662222257187s;"></div><div class="bubble" style="--size:3.1644473153587374rem; --distance:6.48731144569041rem; --position:104.5105783527609%; --time:3.0246342148573575s; --delay:-2.231436580786401s;"></div><div class="bubble" style="--size:5.252855924118357rem; --distance:6.8512720983282875rem; --position:91.91017548781394%; --time:2.502412937338094s; --delay:-3.092690268630882s;"></div><div class="bubble" style="--size:4.910125467324532rem; --distance:6.247973558004903rem; --position:99.66841939411549%; --time:2.556762392671851s; --delay:-2.467722549141294s;"></div><div class="bubble" style="--size:4.971934204293508rem; --distance:8.982661357220882rem; --position:16.5124525808352%; --time:2.448324611009s; --delay:-2.380971248907923s;"></div><div class="bubble" style="--size:3.328829687357784rem; --distance:6.1585221769220535rem; --position:45.040578678933926%; --time:2.455028836084748s; --delay:-3.897019561942337s;"></div><div class="bubble" style="--size:3.92756543252258rem; --distance:8.685126368581521rem; --position:103.92347571338672%; --time:2.709964048377705s; --delay:-3.25278259047547s;"></div><div class="bubble" style="--size:4.046462759859184rem; --distance:9.488797660760282rem; --position:52.421723943421014%; --time:2.291292786262117s; --delay:-3.6539863230365173s;"></div><div class="bubble" style="--size:2.0439476746593277rem; --distance:8.867793751737663rem; --position:102.1348610732117%; --time:2.7294702711642618s; --delay:-3.683048832594953s;"></div><div class="bubble" style="--size:2.353540712161726rem; --distance:6.6473431151843245rem; --position:7.829520064150852%; --time:3.192117851353978s; --delay:-2.436400818258121s;"></div><div class="bubble" style="--size:2.919759075285831rem; --distance:7.52949019688464rem; --position:12.496763424765916%; --time:2.797216459470274s; --delay:-3.3558087080908225s;"></div><div class="bubble" style="--size:5.048020378822525rem; --distance:6.933037916541821rem; --position:-1.9905090514838242%; --time:2.3980043067414707s; --delay:-3.312461750638536s;"></div><div class="bubble" style="--size:5.5347802475366015rem; --distance:6.704791264346788rem; --position:16.179051317777876%; --time:2.199263578106823s; --delay:-2.704192030161912s;"></div><div class="bubble" style="--size:4.582205725611541rem; --distance:9.949408537965118rem; --position:50.88664821938675%; --time:3.6159819811996896s; --delay:-2.7586286494728376s;"></div><div class="bubble" style="--size:5.465243075072866rem; --distance:9.03239607588819rem; --position:95.30997466835358%; --time:3.151558093749513s; --delay:-2.374521573907104s;"></div><div class="bubble" style="--size:3.0167307807446484rem; --distance:6.542851113455375rem; --position:84.4709440665615%; --time:3.2402487809567093s; --delay:-3.7620979989482595s;"></div><div class="bubble" style="--size:3.275039760093314rem; --distance:7.115450843164551rem; --position:30.871894343704966%; --time:2.8980515961704s; --delay:-3.9124698240897144s;"></div><div class="bubble" style="--size:5.446098496586016rem; --distance:6.739548696350511rem; --position:43.51919727013906%; --time:2.576145192612115s; --delay:-3.111108785389234s;"></div><div class="bubble" style="--size:4.020219990417927rem; --distance:9.125336064885198rem; --position:99.14335374581958%; --time:3.441513421802155s; --delay:-3.2537040511535746s;"></div><div class="bubble" style="--size:2.306029341061178rem; --distance:7.769678955305201rem; --position:75.38082880685852%; --time:3.8503599525864938s; --delay:-3.987677493736263s;"></div><div class="bubble" style="--size:2.7435103601386004rem; --distance:8.03224579228582rem; --position:103.32745135667058%; --time:3.4533569254433685s; --delay:-3.447984933197147s;"></div><div class="bubble" style="--size:3.477911646987743rem; --distance:6.034388016811632rem; --position:-4.493137575351261%; --time:2.702389324991462s; --delay:-2.9108658250095534s;"></div><div class="bubble" style="--size:2.9668150256693027rem; --distance:7.58040579468407rem; --position:53.62106676788755%; --time:3.8234810868148292s; --delay:-2.0122610038215187s;"></div><div class="bubble" style="--size:5.661356930895883rem; --distance:9.634817606556883rem; --position:86.97276610270748%; --time:2.956190173336015s; --delay:-2.627566810913989s;"></div><div class="bubble" style="--size:3.138666814073665rem; --distance:7.646621916281149rem; --position:59.945148045928306%; --time:3.2142179954549057s; --delay:-2.0535094836640964s;"></div><div class="bubble" style="--size:5.9189083119650485rem; --distance:8.776589538246084rem; --position:27.18214877691574%; --time:2.362476070599975s; --delay:-3.399232826756507s;"></div><div class="bubble" style="--size:4.013876970133443rem; --distance:8.847784291453173rem; --position:88.6666158261624%; --time:3.7287434814261977s; --delay:-3.5531222247195346s;"></div><div class="bubble" style="--size:5.599519248741072rem; --distance:7.457543607526672rem; --position:18.055164970562352%; --time:2.0227342639390895s; --delay:-3.7503866769970635s;"></div><div class="bubble" style="--size:2.369329432543789rem; --distance:8.236459002931138rem; --position:12.70572261330479%; --time:3.600604156928288s; --delay:-2.0266129735258662s;"></div><div class="bubble" style="--size:4.148867737618227rem; --distance:8.58682402853271rem; --position:86.65488208684233%; --time:3.972613227315021s; --delay:-2.197684333184784s;"></div><div class="bubble" style="--size:2.894760542437221rem; --distance:9.089099358284447rem; --position:25.341627610217195%; --time:2.7388714667365037s; --delay:-3.0862693495026607s;"></div><div class="bubble" style="--size:5.628306980592591rem; --distance:7.934125946750787rem; --position:57.56163728637448%; --time:3.7769553746424713s; --delay:-3.126083823655486s;"></div><div class="bubble" style="--size:5.192500470213904rem; --distance:6.911356639363773rem; --position:2.4823808001144565%; --time:2.521010020318816s; --delay:-3.5484773124808524s;"></div><div class="bubble" style="--size:5.779499749477662rem; --distance:8.356201948800257rem; --position:6.842914050926199%; --time:3.9778846357107507s; --delay:-2.8169757260120947s;"></div><div class="bubble" style="--size:2.4276707449990944rem; --distance:9.468583431452338rem; --position:68.44440180526828%; --time:2.9608419071208547s; --delay:-2.0256878913855507s;"></div><div class="bubble" style="--size:3.341650568711123rem; --distance:8.62004468073983rem; --position:20.922409126929512%; --time:2.895105102479055s; --delay:-3.1808325889413496s;"></div><div class="bubble" style="--size:3.8669922701953885rem; --distance:6.498857974456352rem; --position:46.28761335197774%; --time:2.5035050294959236s; --delay:-3.9220597158745023s;"></div><div class="bubble" style="--size:3.404820411670671rem; --distance:7.793036872869038rem; --position:10.370192984939568%; --time:3.163608020132964s; --delay:-2.182391077675211s;"></div><div class="bubble" style="--size:5.4603349545499675rem; --distance:7.565129127395309rem; --position:100.61786805374038%; --time:2.1798116032823316s; --delay:-3.734048663857188s;"></div><div class="bubble" style="--size:5.969144919823586rem; --distance:6.282578561272308rem; --position:71.51974563623867%; --time:2.1721767690374576s; --delay:-3.160494372800595s;"></div><div class="bubble" style="--size:5.160361425499416rem; --distance:6.56558059710458rem; --position:65.47334337132818%; --time:2.2665394862904558s; --delay:-2.0380591179713266s;"></div><div class="bubble" style="--size:2.3649722069480745rem; --distance:7.683755144986387rem; --position:37.9079202929312%; --time:2.70647509624775s; --delay:-3.543029543215733s;"></div><div class="bubble" style="--size:4.477259638538061rem; --distance:6.623671287441727rem; --position:38.64058076575345%; --time:2.8408515843161437s; --delay:-3.9570407762114s;"></div><div class="bubble" style="--size:5.501701089050583rem; --distance:7.683695527449987rem; --position:84.9787985962549%; --time:2.536144750979521s; --delay:-3.8172813629324955s;"></div><div class="bubble" style="--size:3.902759473729512rem; --distance:9.391350404023155rem; --position:33.00512991956911%; --time:3.5149303083903374s; --delay:-3.5057474013006984s;"></div><div class="bubble" style="--size:2.4216886081965923rem; --distance:8.009658982733841rem; --position:95.65977074880975%; --time:3.5645495975554446s; --delay:-3.095584077980274s;"></div><div class="bubble" style="--size:4.702617124718012rem; --distance:9.549025900491678rem; --position:60.168726804906925%; --time:2.63296393077198s; --delay:-3.892958213468643s;"></div><div class="bubble" style="--size:2.4122093788569368rem; --distance:6.711995016295546rem; --position:95.29303141188845%; --time:3.5145928907726964s; --delay:-3.6127395395625124s;"></div><div class="bubble" style="--size:3.4566499340132433rem; --distance:6.900782426716361rem; --position:67.0086614855984%; --time:3.9676578994235734s; --delay:-3.7936157527013865s;"></div><div class="bubble" style="--size:3.20848003610962rem; --distance:7.328547473561694rem; --position:16.972548803144253%; --time:2.962318924289385s; --delay:-2.644738460459653s;"></div><div class="bubble" style="--size:3.0777146468379915rem; --distance:8.378032949390867rem; --position:93.23292782388147%; --time:2.5175490962134215s; --delay:-2.015543378305324s;"></div><div class="bubble" style="--size:5.922878132798861rem; --distance:8.147257066345718rem; --position:98.4450693351649%; --time:2.083170998344909s; --delay:-3.34718974532419s;"></div><div class="bubble" style="--size:5.974790261529384rem; --distance:6.80006903624047rem; --position:30.82612132808528%; --time:2.5199504223176845s; --delay:-3.629706086092655s;"></div><div class="bubble" style="--size:3.642876139282664rem; --distance:7.113576410297278rem; --position:56.70641417528547%; --time:3.1911624229077846s; --delay:-3.1761049045348555s;"></div><div class="bubble" style="--size:4.454411305309288rem; --distance:6.42920211125971rem; --position:54.830811706265315%; --time:3.9817377160645275s; --delay:-2.487133093927058s;"></div></div><div class="content"><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><div class="aplayer" data-id="2101454162" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>